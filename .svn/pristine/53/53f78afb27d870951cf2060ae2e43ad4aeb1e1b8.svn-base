<template>
  <div class="addFiling" id="addFiling" ref="addFiling">
    <div class="left">
      <el-form
        ref="objForm"
        :model="objForm"
        v-model="labelPosition"
        :rules="rules"
        label-width="140px"
        :validate-on-rule-change="false"
      >
        <el-collapse v-model="activeName" ref="one">
          <el-collapse-item name="1" id="0">
            <template slot="title">
              出险人信息
              <i
                class="header-icon el-icon-caret-bottom"
                style="margin: 0 0 0 auto;font-size: 30px;"
              ></i>
            </template>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人姓名" prop="occname">
                    <el-input v-model="objForm.occname" disabled></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人证件类型" prop="occidtype">
                    <el-select v-model="objForm.occidtype" clearable placeholder="请选择" disabled>
                      <el-option
                        v-for="item in cardTypeList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人证件号码" prop="occidno">
                    <el-input v-model="objForm.occidno" disabled></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人性别" prop="sex">
                    <el-select v-model="objForm.sex" clearable placeholder="请选择" disabled>
                      <el-option
                        v-for="item in sexList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人年龄" prop="age">
                    <el-input v-model="objForm.age" disabled></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="电话号码"
                    prop="remark"
                    :rules="objForm.remark != null && objForm.remark != ''?rules.remark:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-input v-model="objForm.remark" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>

            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="证件有效期止期"
                    prop="idenddate"
                    :rules="objForm.occidtype==='1'?rules.idenddate:[{ required: false, message: '请选择证件有效期止期', trigger: 'blur' }]"
                  >
                    <el-date-picker
                      v-model="objForm.idenddate"
                      type="date"
                      placeholder="选择日期"
                      value-format="yyyy-MM-dd"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="来源渠道">
                    <el-input v-model="rgtclass" disabled maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8" v-if="!rgtno">
                <div class="grid-content" style="text-align:right;margin-right:30px;">
                  <el-button type="primary" round @click="toRiskList" style="text-align:right;">客户查询</el-button>
                </div>
              </el-col>
            </el-row>
            <el-row style="visibility:hidden;height:0px">
              <el-input v-model="objForm.homeprovince" maxlength="100"></el-input>
              <el-input v-model="objForm.homecity" maxlength="100"></el-input>
              <el-input v-model="objForm.homecounty" maxlength="100"></el-input>
              <el-input v-model="objForm.homecommunity" maxlength="100"></el-input>
            </el-row>
          </el-collapse-item>
        </el-collapse>
        <div id="1"></div>
        <div id="2"></div>
        <div id="3"></div>
        <Policy :customerno="this.customerno"></Policy>
        <el-collapse v-model="activeName">
          <el-collapse-item name="2" id="4">
            <template slot="title">
              立案申请信息
              <i
                class="header-icon el-icon-caret-bottom"
                style="margin: 0 0px 0 auto;font-size: 30px;"
              ></i>
            </template>
            <div>
              <el-row>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="理赔号">
                      <el-input v-model="objForm.rgtno" disabled></el-input>
                    </el-form-item>
                  </div>
                </el-col>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="申请日期" prop="applydate">
                      <el-date-picker
                        type="date"
                        placeholder="选择日期"
                        v-model="objForm.applydate"
                        style="width: 100%;"
                        value-format="yyyy-MM-dd"
                      ></el-date-picker>
                    </el-form-item>
                  </div>
                </el-col>
                <el-col :span="3">
                  <div class="grid-content" style="margin:5px 0 0 17px;">
                    <span>
                      <el-button type="primary" round @click="toMarketerSelection">营销员查询与关联</el-button>
                    </span>
                  </div>
                </el-col>
                <!-- <el-col :span="5" class="isNewdate">
                  <el-form-item label="资料齐全日">
                    <el-input style="width:75%" v-model="objForm.accepteddate" disabled></el-input>
                  </el-form-item>
                </el-col> -->
              </el-row>

              <el-row>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="保单号" prop="contno">
                      <el-input v-model="objForm.contno" maxlength="10"></el-input>
                    </el-form-item>
                  </div>
                </el-col>
                <!-- <span v-model="objForm.agentcode" style="display:none;"></span> -->
                <span style="display:none;">{{objForm.agentcode}}</span>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="营销员电话">
                      <el-input v-model="objForm.agentphone" disabled></el-input>
                    </el-form-item>
                  </div>
                </el-col>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="是否通知营销员" prop="notice">
                      <el-select v-model="objForm.notice" placeholder="请选择" clearable>
                        <el-option label="是" value="1"></el-option>
                        <el-option label="否" value="0"></el-option>
                      </el-select>
                    </el-form-item>
                  </div>
                </el-col>
              </el-row>
              <el-row v-if="rptno">
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="报案人姓名">
                      <el-input v-model="objForm.reportname" disabled></el-input>
                    </el-form-item>
                  </div>
                </el-col>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="报案日期">
                      <el-input v-model="objForm.reportdate" disabled></el-input>
                    </el-form-item>
                  </div>
                </el-col>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="报案人电话">
                      <el-input v-model="objForm.reportmobile" disabled></el-input>
                    </el-form-item>
                  </div>
                </el-col>
              </el-row>
              <el-row v-if="rptno">
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="报案人与出险人关系">
                      <!-- <el-input v-model="objForm.relatoinsure" disabled></el-input> -->
                      <el-select v-model="objForm.relatoinsure" disabled>
                        <el-option
                          v-for="item in relatoinsureList"
                          :key="item.code"
                          :label="item.codename"
                          :value="item.code"
                        ></el-option>
                      </el-select>
                    </el-form-item>
                  </div>
                </el-col>
                <el-col :span="8">
                  <div class="grid-content">
                    <el-form-item label="报案渠道">
                      <el-input v-model="objForm.reportchannel" disabled></el-input>
                    </el-form-item>
                  </div>
                </el-col>
              </el-row>
            </div>
          </el-collapse-item>
        </el-collapse>

        <el-collapse v-model="activeName">
          <el-collapse-item name="3" id="5">
            <template slot="title">
              出险信息
              <i
                class="header-icon el-icon-caret-bottom"
                style="margin: 0 0px 0 auto;font-size: 30px;"
              ></i>
            </template>

            <el-row style="padding-top:10px;height:52px;">
              <el-col :span="8" style="height:52px;">
                <div class="grid-content">
                  <el-form-item label="出险类型" prop="accidenttype">
                    <el-radio-group v-model="objForm.accidenttype" @change="changeAcc()">
                      <el-radio
                        v-for="item in accidenttypeList"
                        :label="item.code"
                        :key="item.code"
                      >{{item.codename}}</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8" style="height:52px;">
                <div class="grid-content">
                  <el-form-item label="直付标志">
                    <el-switch
                      v-model="objForm.directpay"
                      active-value="1"
                      inactive-value="0"
                      active-color="#13ce66"
                      inactive-color="#ff4949"
                    ></el-switch>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>

            <el-row style="height:52px;" class="reasoncodeSty">
              <el-col :span="24" style="height:52px;">
                <el-form-item
                  style="margin-bottom:0px;"
                  label="理赔类型"
                  prop="reasoncode"
                  :rules="confirm?[{ required: true, message: '理赔类型不能为空！', trigger: 'blur' }]:rules.reasoncode"
                >
                  <!-- :disabled="item.code != '105'" -->
                  <el-checkbox-group v-model="objForm.reasoncode">
                    <!-- :disabled="item.code != '105'" -->

                    <el-checkbox
                      v-for="(item) in llclaimtypeList"
                      :key="item.code"
                      :label="item.code"
                    >{{item.codename}}</el-checkbox>
                  </el-checkbox-group>
                </el-form-item>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险日期" prop="accidentdate">
                    <el-date-picker
                      type="date"
                      placeholder="选择日期"
                      v-model="objForm.accidentdate"
                      style="width: 100%;"
                      value-format="yyyy-MM-dd"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="事故原因"
                    prop="accidentreason"
                    :rules="objForm.accidenttype==='02'?rules.accidentReason:[{ required: false, message: '事故原因不能为空！', trigger: 'blur' }]"
                  >
                    <el-select
                      v-model="objForm.accidentreason"
                      clearable
                      placeholder="请选择"
                      filterable
                    >
                      <el-option
                        v-for="item in accReasonList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="21">
                <div class="grid-content place">
                  <el-form-item
                    label="出险地点"
                    prop="accprovince"
                    :rules="objForm.accidenttype==='02'?rules.accprovince:[{ required: false, message: '省不能为空！', trigger: 'blur' }]"
                  >
                    <el-select
                      v-model="objForm.accprovince"
                      placeholder="省"
                      clearable
                      filterable
                      @change="changevince(objForm.accprovince)"
                      @clear="clearMes()"
                    >
                      <el-option
                        v-for="item in provinceList"
                        :key="item.code"
                        :label="item.province"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item
                    label
                    prop="acccity"
                    :rules="objForm.accidenttype==='02'&&objForm.accprovince!=='999999'?rules.acccity:[{ required: false, message: '市不能为空！', trigger: 'blur' }]"
                    class="risk_address"
                  >
                    <el-select
                      v-model="objForm.acccity"
                      clearable
                      filterable
                      placeholder="市"
                      @change="changaccity(objForm.acccity)"
                      ref="acccity"
                      @clear="clearArea()"
                    >
                      <el-option
                        v-for="item in cityList"
                        :key="item.code"
                        :label="item.city"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item
                    label
                    prop="acccounty"
                    :rules="objForm.accidenttype==='02'&&objForm.accprovince!=='999999'?rules.acccounty:[{ required: false, message: '市不能为空！', trigger: 'blur' }]"
                    class="risk_address"
                  >
                    <el-select
                      v-model="objForm.acccounty"
                      placeholder="区"
                      clearable
                      filterable
                      @change="changeCounty()"
                    >
                      <el-option
                        v-for="item in areaList"
                        :key="item.code"
                        :label="item.country"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item
                    label
                    prop="accaddress"
                    :rules="objForm.accidenttype==='02'?rules.accaddress:[{ required: false, message: '市不能为空！', trigger: 'blur' }]"
                    class="risk_address"
                  >
                    <el-input
                      v-model="objForm.accaddress"
                      placeholder="详细地址"
                      maxlength="100"
                      class="place_des"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="事故发生地点性质"
                    prop="accidentsite"
                    :rules="objForm.accidenttype==='02'?rules.accidentsite:[{ required: false, message: '事故发生地点性质不能为空！', trigger: 'change' }]"
                  >
                    <el-cascader v-model="objForm.accidentsite" :options="placeOptions" clearable></el-cascader>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="就诊医院"
                    prop="hospitalname"
                    :rules="objForm.accidenttype=='01'?rules.hospitalname:[{ required: false, message: '不能为空！', trigger: 'blur' }]"
                  >
                    <template>
                      <el-select
                        class="jiuzhenhosp"
                        v-model="objForm.hospitalname"
                        filterable
                        placeholder="请选择"
                        clearable
                        :filter-method="waitFunc(filtered,400)"
                        @change="changeHospital(objForm.hospitalname)"
                        @focus="clearHospital(objForm.hospitalname)"
                        @blur="clHos()"
                        v-el-select-loadmore="loadmore"
                      >
                        <el-option
                          v-for="(item) in hospitalLists"
                          :key="item.hospitcode"
                          :label="item.hospitalname"
                          :value="item.hospitcode"
                        ></el-option>
                      </el-select>
                      <el-popover
                        v-if="remarkContents && objForm.hospitalname"
                        placement="top-start"
                        width="200"
                        trigger="hover"
                        content="这"
                      >
                        <div>{{remarkContents}}</div>
                        <el-button slot="reference" class="jiuzhens">
                          <img
                            src="../../assets/images/filing/warn.png"
                            alt
                            style="width:20px;height:20px"
                          />
                        </el-button>
                      </el-popover>
                    </template>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="病区">
                    <el-input v-model="objForm.hospitallesion" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="床位">
                    <el-input v-model="objForm.hospitalbed" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="确诊日期"
                    prop="dianosedate"
                    :rules="objForm.reasoncode.indexOf('102')!==-1?rules.dianosedate:[{ required: false, message: '事故发生地点性质不能为空！', trigger: 'blur' }]"
                  >
                    <el-date-picker
                      type="date"
                      placeholder="选择日期"
                      v-model="objForm.dianosedate"
                      style="width: 100%;"
                      value-format="yyyy-MM-dd"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>

              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="身故日期"
                    prop="deathdate"
                    :rules="objForm.reasoncode.indexOf('100')!==-1?rules.deathdate:[{ required: false, message: '事故发生地点性质不能为空！', trigger: 'blur' }]"
                  >
                    <el-date-picker
                      type="date"
                      placeholder="选择日期"
                      v-model="objForm.deathdate"
                      style="width: 100%;"
                      value-format="yyyy-MM-dd"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="受益人是否指定"
                    prop="pointbnf"
                    :rules="objForm.reasoncode.indexOf('100')!==-1?rules.pointbnf:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group v-model="objForm.pointbnf">
                      <el-radio label="1">是</el-radio>
                      <el-radio label="0">否</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="申请豁免原因"
                    prop="exempt"
                    :rules="objForm.reasoncode.indexOf('104')!==-1 ? rules.exempt:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-select
                      v-if="objForm.accidenttype==='01'"
                      v-model="objForm.exempt"
                      clearable
                      placeholder="请选择"
                    >
                      <el-option
                        v-for="item in resource"
                        :key="item.value"
                        :label="item.text"
                        :value="item.value"
                      ></el-option>
                    </el-select>

                    <el-select
                      v-else-if="objForm.accidenttype==='02'"
                      v-model="objForm.exempt"
                      clearable
                      placeholder="请选择"
                    >
                      <el-option
                        v-for="item in resource1"
                        :key="item.value"
                        :label="item.text"
                        :value="item.value"
                      ></el-option>
                    </el-select>

                    <el-select v-else v-model="objForm.exempt" clearable placeholder="请选择">
                      <el-option
                        v-for="item in resource2"
                        :key="item.value"
                        :label="item.text"
                        :value="item.value"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="伤残鉴定报告"
                    prop="disableddrpt"
                    :rules="objForm.reasoncode.indexOf('101')!==-1||objForm.reasoncode.indexOf('103')!==-1||objForm.reasoncode.indexOf('104')!==-1||objForm.reasoncode.indexOf('6')!==-1||objForm.reasoncode.indexOf('7')!==-1?rules.disableddrpt:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group v-model="objForm.disableddrpt">
                      <el-radio label="1">是</el-radio>
                      <el-radio label="0">否</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    class="occuprptStyle"
                    label="工伤报告（失能鉴定、残疾证）"
                    prop="occuprpt"
                    :rules="objForm.reasoncode.indexOf('101')!==-1||objForm.reasoncode.indexOf('103')!==-1||objForm.reasoncode.indexOf('104')!==-1||objForm.reasoncode.indexOf('6')!==-1||objForm.reasoncode.indexOf('7')!==-1?rules.occuprpt:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group v-model="objForm.occuprpt">
                      <el-radio label="1">是</el-radio>
                      <el-radio label="0">否</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-collapse-item>
        </el-collapse>

        <el-collapse v-model="activeName">
          <el-collapse-item name="4" id="6">
            <template slot="title">
              申请人信息
              <i
                class="header-icon el-icon-caret-bottom"
                style="margin: 0 0px 0 auto;font-size: 30px;"
              ></i>
            </template>

            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="申请人姓名" prop="rgtantname">
                    <el-input v-model="objForm.rgtantname" maxlength="20" :disabled="unFlag"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="申请人与出险人关系" prop="relation" class="occuprptStyle">
                    <el-select
                      v-model="objForm.relation"
                      placeholder="请选择"
                      clearable
                      @change="getRiskPer"
                    >
                      <el-option
                        v-for="item in relations"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="证件类型" prop="rgtantidtype">
                    <el-select
                      v-model="objForm.rgtantidtype"
                      placeholder="请选择"
                      clearable
                      :disabled="unFlag"
                    >
                      <el-option
                        v-for="item in cardTypeList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content" v-if="objForm.relation=='00'">
                  <el-form-item
                    label="证件号码"
                    prop="rgtantidno"
                    :rules="objForm.relation=='00'?rules.rgtantidno1:[{ required: false, message: '证件号码不能为空！',trigger: 'blur'}]"
                  >
                    <el-input
                      v-model="objForm.rgtantidno"
                      :disabled="unFlag"
                      class="special"
                      @change="objForm.rgtantidno = ToCDB(objForm.rgtantidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                </div>

                <div class="grid-content" v-else>
                  <el-form-item
                    label="证件号码"
                    prop="rgtantidno"
                    v-if="objForm.rgtantidtype==='1'&&!objForm.relation=='00'"
                    :rules="objForm.rgtantidtype==='1'&&!objForm.relation=='00'?rules.rgtantidno:[{ required: false, message: '证件号码不能为空！',trigger: 'blur'}]"
                  >
                    <el-input
                      v-model="objForm.rgtantidno"
                      :disabled="unFlag"
                      class="special"
                      @change="objForm.rgtantidno = ToCDB(objForm.rgtantidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                  <el-form-item
                    label="证件号码"
                    prop="rgtantidno"
                    v-else-if="objForm.rgtantidtype==='2'||objForm.rgtantidtype==='8'&&!objForm.relation=='00'"
                    :rules="(objForm.rgtantidtype==='2'||objForm.rgtantidtype==='8')&&!objForm.relation=='00'?rules.passwork:[{ required: false, message: '证件号码不能为空！',trigger: 'blur'}]"
                  >
                    <el-input
                      v-model="objForm.rgtantidno"
                      :disabled="unFlag"
                      @change="objForm.rgtantidno = ToCDB(objForm.rgtantidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                  <el-form-item
                    label="证件号码"
                    prop="rgtantidno"
                    v-else
                    :rules="objForm.rgtantidtype!='2'&&objForm.rgtantidtype!=='8'&&objForm.rgtantidtype!='1'&&!objForm.relation=='00'?rules.document:[{ required: false, message: '证件号码不能为空！',trigger: 'blur'}]"
                  >
                    <el-input
                      v-model="objForm.rgtantidno"
                      :disabled="unFlag"
                      @change="objForm.rgtantidno = ToCDB(objForm.rgtantidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="移动电话" prop="rgtantmobile">
                    <el-input v-model="objForm.rgtantmobile" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="邮政编码" prop="postcode">
                    <el-input v-model="objForm.postcode" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="24">
                <div class="grid-content apply_address">
                  <el-form-item label="联系地址" prop="rgtantprovince">
                    <el-select
                      v-model="objForm.rgtantprovince"
                      placeholder="省"
                      clearable
                      filterable
                      @change="changevince3(objForm.rgtantprovince)"
                      @clear="clearMes1()"
                    >
                      <el-option
                        v-for="item in provinceList3"
                        :key="item.code"
                        :label="item.province"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                    <el-select
                      v-model="objForm.rgtantcity"
                      placeholder="市"
                      filterable
                      clearable
                      @change="changaccity3(objForm.rgtantcity)"
                      @clear="clearArea1()"
                    >
                      <el-option
                        v-for="item in cityList3"
                        :key="item.code"
                        :label="item.city"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                    <el-select
                      v-model="objForm.rgtantcounty"
                      placeholder="区"
                      filterable
                      clearable
                      @change="changeCounty3()"
                    >
                      <el-option
                        v-for="item in areaList3"
                        :key="item.code"
                        :label="item.country"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                    <span class="full">
                      <el-input v-model="objForm.rgtantaddress" placeholder="详细地址" maxlength="100"></el-input>
                    </span>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-collapse-item>
        </el-collapse>

        <el-collapse v-model="activeName">
          <el-collapse-item name="5" id="7">
            <template slot="title">
              领款人信息
              <i
                class="header-icon el-icon-caret-bottom"
                style="margin: 0 0 0 auto;font-size: 30px;"
              ></i>
            </template>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="与被保险人关系"
                    prop="relationtocont"
                    :rules="(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.receidno)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.relationtocont"
                  >
                    <el-select
                      v-model="objForm.relationtocont"
                      @change="toChangeRel(objForm.relationtocont)"
                      clearable
                      @clear="clearName()"
                    >
                      <el-option
                        v-for="item in linglist"
                        :key="item.id"
                        :label="item.name"
                        :value="item.id"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="账户所有人姓名"
                    prop="recename"
                    :rules="(!objForm.relationtocont)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.receidno)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.recename"
                  >
                    <!-- :disabled="!objForm.relationtocont || (objForm.receidtype != '10' && objForm.receidtype != '7')" -->
                    <el-input v-model="objForm.recename" disabled maxlength="20"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    class="occuprptStyle"
                    label="账户所有人身份证件号码"
                    prop="receidno"
                    ref="receidno"
                    :rules="!objForm.receidno&&!objForm.contactway&&!objForm.bankaccno&&!objForm.headbankname&&!objForm.profession&&!objForm.annualincome&&!objForm.workunit&&!objForm.workaddress&&!objForm.receiveaccprovinc&&!objForm.recename?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receidno"
                  >
                    <el-input
                      v-model="objForm.receidno"
                      class="special"
                      @change="objForm.receidno = ToCDB(objForm.receidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>-->
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="职业"
                    prop="profession"
                    ref="profession"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.receidno)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.profession"
                  >
                    <el-select
                      v-model="objForm.profession"
                      placeholder="请选择"
                      clearable
                      filterable
                      v-el-select-loadmore="loadmore2"
                    >
                      <el-option
                        v-for="item in workList"
                        :key="item.occupationcode"
                        :label="item.occuptionname"
                        :value="item.occupationcode"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="年收入"
                    prop="annualincome"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.receidtype)&&(!objForm.receidno)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.annualincome"
                  >
                    <el-input v-model="objForm.annualincome" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="证件类型"
                    prop="receidtype"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidno)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receidtype"
                  >
                    <el-select v-model="objForm.receidtype" placeholder="请选择" clearable>
                      <el-option
                        v-for="item in cardTypeList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="证件号码"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receidno"
                    v-if="objForm.receidtype=='1'"
                  >
                    <el-input
                      v-model="objForm.receidno"
                      class="special"
                      @change="objForm.receidno = ToCDB(objForm.receidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                  <el-form-item
                    label="证件号码"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receidno"
                    v-else-if="objForm.receidtype=='2'||objForm.receidtype=='7'"
                  >
                    <el-input
                      v-model="objForm.receidno"
                      @change="objForm.receidno = ToCDB(objForm.receidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                  <el-form-item
                    label="证件号码"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receidno"
                    v-else
                  >
                    <el-input
                      v-model="objForm.receidno"
                      @change="objForm.receidno = ToCDB(objForm.receidno)"
                      maxlength="100"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="证件有效止期"
                    prop="annualincome"
                    :rules="!objForm.receidno&&!objForm.contactway&&!objForm.bankaccno&&!objForm.headbankname&&!objForm.profession&&!objForm.annualincome&&!objForm.workunit&&!objForm.workaddress&&!objForm.receiveaccprovinc&&!objForm.recename?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.annualincome"
                  >
                    <el-input v-model="objForm.annualincome" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>-->
            </el-row>
            <el-row>
              <el-col :span="16">
                <div class="grid-content bank">
                  <el-form-item
                    label="授权银行"
                    prop="headbankname"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.receidno)&&(!objForm.province)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.headbankname"
                  >
                    <el-select
                      v-model="objForm.headbankname"
                      filterable
                      placeholder="下拉模糊"
                      :filter-method="waitFunc(filtered3,400)"
                      clearable
                      @change="getHeadBank()"
                      @clear="clearBank()"
                      v-el-select-loadmore="loadmore3"
                    >
                      <el-option
                        v-for="item in tBankList"
                        :key="item.bankid"
                        :label="item.bankname"
                        :value="item.bankid"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item
                    label
                    prop="province"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.receidno)&&(!objForm.headbankname)&&(!objForm.bankname)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.province"
                    class="bank_style"
                  >
                    <el-select
                      v-model="objForm.province"
                      filterable
                      placeholder="所在地区"
                      clearable
                      @focus="focusBank"
                      @change="getBanchBank(objForm.headbankname,objForm.province)"
                      :filter-method="filterBankP"
                      v-el-select-loadmore="loadmore4"
                    >
                      <el-option
                        v-for="item in bankAddressList"
                        :key="item.standardareasid"
                        :label="item.standardareasname"
                        :value="item.standardareasid"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item label class="bank_style">
                    <el-select v-model="objForm.bankname" filterable placeholder="支行" clearable>
                      <el-option
                        v-for="item in branchBankList"
                        :key="item.banklocationsid"
                        :label="item.banklocationsname"
                        :value="item.banklocationsid"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="授权账户号码"
                    prop="bankaccno"
                    ref="bankaccno"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.bankaccno"
                  >
                    <el-input
                      v-model="objForm.bankaccno"
                      maxlength="100"
                      ref="input"
                      @change="bankAccountBluer(objForm.bankaccno)"
                      @paste.native.capture.prevent="handlePaste"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>

            <el-row>
              <el-col :span="24">
                <div class="grid-content address">
                  <el-form-item
                    label="联系地址"
                    prop="receiveaccprovinc"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receiveaccprovinc"
                  >
                    <el-select
                      v-model="objForm.receiveaccprovinc"
                      clearable
                      filterable
                      placeholder="省"
                      @change="changevince2(objForm.receiveaccprovinc)"
                      @clear="clearMes2()"
                    >
                      <el-option
                        v-for="item in provinceList2"
                        :key="item.code"
                        :label="item.province"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item
                    label
                    prop="receivecity"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receivecity"
                    class="address_style"
                  >
                    <el-select
                      v-model="objForm.receivecity"
                      clearable
                      filterable
                      placeholder="市"
                      @change="changaccity2(objForm.receivecity)"
                      @clear="clearArea2()"
                    >
                      <el-option
                        v-for="item in cityList2"
                        :key="item.code"
                        :label="item.city"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item
                    label
                    prop="receivedistrict"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receiveaddress)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receivedistrict"
                    class="address_style"
                  >
                    <el-select
                      v-model="objForm.receivedistrict"
                      placeholder="区"
                      clearable
                      filterable
                      @change="changeCounty2()"
                    >
                      <el-option
                        v-for="item in areaList2"
                        :key="item.code"
                        :label="item.country"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item
                    label
                    prop="receiveaddress"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.contactway)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.receiveaddress"
                    class="address_style"
                  >
                    <span class="full">
                      <el-input v-model="objForm.receiveaddress" placeholder="详细地址" maxlength="100"></el-input>
                    </span>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="联系方式"
                    prop="contactway"
                    ref="contactway"
                    :rules="(!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.workunit)&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.contactway"
                  >
                    <el-input v-model="objForm.contactway" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="单位名称"
                    prop="workunit"
                    :rules="((!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway))&&(!objForm.workaddress)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.workunit"
                  >
                    <el-input v-model="objForm.workunit" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="单位地址"
                    prop="workaddress"
                    :rules="((!objForm.relationtocont)&&(!objForm.recename)&&(!objForm.profession)&&(!objForm.annualincome)&&(!objForm.receidtype)&&(!objForm.bankname)&&(!objForm.headbankname)&&(!objForm.province)&&(!objForm.bankaccno)&&(!objForm.bankaccno)&&(!objForm.receiveaccprovinc)&&(!objForm.receivecity)&&(!objForm.receivedistrict)&&(!objForm.receiveaddress)&&(!objForm.contactway))&&(!objForm.workunit)?[{ required: false, message: '请输入', trigger: 'blur' }]:rules.workaddress"
                  >
                    <el-input v-model="objForm.workaddress" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-collapse-item>
        </el-collapse>

        <el-collapse v-model="activeName">
          <el-collapse-item name="6" id="8">
            <template slot="title">
              立案结论信息
              <i
                class="header-icon el-icon-caret-bottom"
                style="margin: 0 0 0 auto;font-size: 30px;"
              ></i>
            </template>

            <el-row style="padding-top:20px;">
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="立案结论" prop="rgtconclusion">
                    <el-select v-model="objForm.rgtconclusion" placeholder="请选择" clearable>
                      <el-option label="立案通过" value="01"></el-option>
                      <el-option label="不予立案" value="02"></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="9" v-if="objForm.rgtconclusion==='02'">
                <div class="grid-content">
                  <el-form-item
                    label="不予立案原因"
                    prop="norgtreason"
                    :rules="objForm.rgtconclusion==='02'?rules.norgtreason:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-select
                      v-model="objForm.norgtreason"
                      placeholder="请选择"
                      clearable
                      @change="changeR"
                    >
                      <el-option label="缺少资料" value="01"></el-option>
                      <el-option label="无匹配保单责任" value="02"></el-option>
                      <el-option label="微信预赔付金额可能≥3000元" value="03"></el-option>
                      <el-option label="重复立案" value="05"></el-option>
                      <el-option label="其他" value="04"></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="24" v-if="objForm.rgtconclusion==='02'">
                <div class="grid-content">
                  <el-form-item
                    label="原因说明"
                    prop="reasondetail"
                    :rules="objForm.rgtconclusion==='02'&&objForm.norgtreason!='05'?rules.reasondetail:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-input
                      type="textarea"
                      :autosize="{ minRows: 3}"
                      maxlength="100"
                      show-word-limit
                      v-model="objForm.reasondetail"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-collapse-item>
        </el-collapse>

        <div style="overflow:hidden;margin-bottom:50px;">
          <div style="float:right;margin:10px 10px 30px 0">
            <el-button
              type="primary"
              round
              @click="save2('objForm')"
              :disabled="disConfirmCase()"
            >立案确认</el-button>
            <el-button
              type="primary"
              round
              @click="noticepdfprint"
              :disabled="!objForm.rgtno"
            >不予立案通知书打印</el-button>
          </div>
        </div>
        <div class="botton_box">
          <div style="text-align:center;" class="button_style">
            <el-button type="primary" round @click="getMedical" :disabled="!objForm.rgtno">医疗单证录入</el-button>
            <el-button type="primary" round @click="toPhoto" :disabled="getPhotoState()">生成照会</el-button>
            <el-button type="primary" round @click="toInitiateSurvey()" :disabled="getState()">提起调查</el-button>
            <el-button type="primary" round @click="toInitImg" :disabled="!objForm.rgtno">影像查询</el-button>
            <el-button type="primary" round @click="isShowRemark()" :disabled="!objForm.rgtno">备注信息</el-button>
            <el-button
              type="primary"
              round
              @click="torRollBackMes()"
              :disabled="casebackList.length == 0"
            >回退查询</el-button>
            <el-button type="primary" round @click="saveForm()" :disabled="flagBtn">保 存</el-button>
            <el-button type="primary" round @click="goBank">返 回</el-button>
          </div>
        </div>
      </el-form>
    </div>
    <div class="right">
      <img src="../../assets/images/filing/downArrow.png" alt class="downArrow" />
      <img src="../../assets/images/filing/TOP.png" alt @click="jump('top')" class="top" />
      <img src="../../assets/images/filing/upArrow.png" alt @click="jump('top')" class="upArrow" />
      <p
        v-for="(item,index) in btnArr"
        :key="index"
        class="btn_text"
        @click="jump(index)"
        :style="{color: activeStep === index ? '#F1CF60' : '#333'}"
      >{{item}}</p>
    </div>
    <!-- 医疗单证录入 -->
    <el-dialog
      class="diamh"
      :visible.sync="isShowhospital"
      :close-on-click-modal="false"
      width="100%"
      :show-close="false"
      :fullscreen="true"
    >
      <el-tabs class="mels" v-model="activeNames">
        <el-tab-pane label="普通医疗单证" name="first">
          <medical-dialog
            ref="medicals"
            :isShowhospital.sync="isShowhospital"
            :rgtno.sync="this.rgtno"
            :customerno.sync="this.customerno"
            :hospitalname.sync="this.objForm.hospitalname"
          ></medical-dialog>
        </el-tab-pane>
        <el-tab-pane label="北京医疗单证" name="second">
          <beijing-dialog
            :bjObjForm.sync="bjObjForm"
            :isShowhospital.sync="isShowhospital"
            :key="timer"
          />
        </el-tab-pane>
      </el-tabs>
    </el-dialog>
    <!-- 备注 -->
    <el-dialog :visible.sync="isshowremark" width="74%">
      <remark-dialog
        @changeisshow="changeisshow"
        :is-show-remark.sync="isshowremark"
        :rgtno="this.rgtno"
        :startphase="2"
      ></remark-dialog>
    </el-dialog>
    <Drag v-if="rgtclass == '微信渠道'" ref="dragno" :rgtobj="rgtobj"></Drag>
  </div>
</template>
<script>
import axios from "axios";
import BeijingDialog from "@/components/BeijingDialog";
import Drag from "../../components/dragCard";
import remarkDialog from "../../components/remarkDialog";
import { service, post } from "../../utils/request";
import { IDType } from "../../utils/service";
import { ISYMD } from "../../utils/common";
import Policy from "../../components/policy";
import MedicalDialog from "../../components/medicalDialog";
import { lstat } from "fs";
import {
  checkdeff,
  checkLfor3,
  checkMfor,
  sumDays,
  checkLfor1,
  checkLfor2,
  accMul,
  numTwo,
  getCodeType
} from "../../utils/service.js";
import { generateUUID, getDate, getTime } from "../../utils/common.js";
export default {
  name: "AddFiling",
  components: {
    Drag,
    BeijingDialog,
    remarkDialog,
    Policy,
    MedicalDialog
  },
  directives: {
    "el-select-loadmore": {
      bind(el, binding) {
        const elss = el.querySelector(
          ".el-select-dropdown .el-select-dropdown__wrap"
        );
        elss.addEventListener("scroll", function() {
          const condition =
            this.scrollHeight - this.scrollTop - 1 <= this.clientHeight;
          if (condition) {
            binding.value();
          }
        });
      }
    }
  },
  filters: {
    codeToname: function(obj, arr) {
      var a = null;
      arr.forEach(element => {
        if (element.code === obj) {
          a = element.name;
        }
      });
      return a;
    }
  },
  data() {
    var isMobileNumber = (rule, value, callback) => {
      if (!value) {
        return new Error("电话不能为空！");
      } else {
        var reg = /^\d+$|^\d+[.]?\d+$/;
        if (!reg.test(value)) {
          callback(new Error("电话号码不合法!"));
        } else {
          if (value.substr(0, 1) == 1) {
            if (value.length != 11) {
              callback(new Error("电话号码不合法!"));
            } else {
              callback();
            }
          } else {
            callback();
          }
        }
      }
    };
    var isMobileNumber1 = (rule, value, callback) => {
      if (!value) {
        return new Error("电话不能为空！");
      } else {
        var reg = /^\d+$|^\d+[.]?\d+$/;
        if (!reg.test(value)) {
          callback(new Error("移动电话不合法!"));
        } else {
          if (value.length != 11) {
            callback(new Error("移动电话不合法!"));
          } else {
            if (value.substr(0, 1) != 1) {
              callback(new Error("移动电话不合法!"));
            } else {
              callback();
            }
          }
        }
      }
    };

    var isCheckID = (rule, value, callback) => {
      if (!value) {
        return new Error("身份证号码不能为空！");
      } else {
        const reg1 = /^[0-9a-zA-Z]*$/g;
        if (!reg1.test(value)) {
          callback(new Error("请输入合法的证件号码"));
        } else {
          if (value.length != 15 && value.length != 18) {
            callback(new Error("身份证只能为15位或18位"));
          } else {
            const reg = /(^[1-9]\d{5}(18|19|([23]\d))\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}$)/;
            if (!reg.test(value)) {
              callback(new Error("请输入合法的的身份证号码"));
            } else {
              callback();
            }
          }
        }
      }
    };
    var isCheckPass = (rule, value, callback) => {
      if (!value) {
        return new Error("护照号码不能为空！");
      } else {
        let reg = /^[0-9a-zA-Z]*$/g;
        if (!reg.test(value)) {
          callback(new Error("请输入合法的证件号码"));
        } else {
          if (value.length < 6) {
            callback(new Error("护照的长度必须大于等于6"));
          } else {
            callback();
          }
        }
      }
    };
    var isCheckOther = (rule, value, callback) => {
      if (!value) {
        return new Error("证件号码不能为空！");
      } else {
        const reg = /^[0-9a-zA-Z]*$/g;
        if (!reg.test(value)) {
          callback(new Error("请输入合法的证件号码"));
        } else {
          callback();
        }
      }
    };
    var isMoney = (rule, value, callback) => {
      if (!value) {
        return new Error("年收入不能为空！");
      } else {
        var reg = /^\d+$|^\d*\.\d+$/g;
        if (!reg.test(value)) {
          callback(new Error("只能填写数字！"));
        } else {
          if (value.substr(0, 1) === "." || value.substr(-1, 1) === ".") {
            callback(new Error("只能填写数字！"));
          } else {
            var amtreg = /^(\d+)(.\d{0,2})?$/;
            if (!amtreg.test(value)) {
              callback(new Error("最多支持两位小数！"));
            } else {
              callback();
            }
          }
        }
      }
    };
    var workunit = (rule, value, callback) => {
      if (!value && !this.objForm.workaddress) {
        callback(new Error("请输入单位名称"));
      } else {
        callback();
      }
    };
    var workaddress = (rule, value, callback) => {
      if (!value && !this.objForm.workunit) {
        callback(new Error("请输入单位地址"));
      } else {
        callback();
      }
    };
    // var isapplydate = (rule, value, callback) => {
    //   if (value) {
    //     let time3 =
    //       new Date(localStorage.getItem("isDate")).getTime() ||
    //       new Date().getTime();
    //     let applydate = new Date(this.objForm.applydate).getTime();
    //     if (time3 < applydate) {
    //       callback(new Error("申请日期不能大于当前日期"));
    //     }
    //   } else {
    //     callback();
    //   }
    // };
    return {
      relatoinsureList: [], //报案人与出险人关系
      isshowremark: false, //备注弹框
      linglist: [
        {
          id: "8",
          name: "投保人"
        },
        {
          id: "32",
          name: "被保人"
        }
      ],
      activeNames: "first",
      bJdialogVisible: false,
      objForm: {},
      rgtobj: null, // 微信浮动框所需参数
      rptno: "", // 报案信息参数

      dialogVisible: false,
      isShowhospital: false,
      isAutofocus: false,
      remarkContents: "",
      toShowss: false, // 就诊医院备注
      abc: false,
      confirm: true,
      btn: false,
      isSaveForm: 1,
      bankAccountNumBlur: 1,
      bankFirst: "",
      pagesize: 10,
      currpage: 1,
      currentPage: 1,
      total: 0,
      genObj: {},
      flagBtn: false,
      unCheck: false,
      unValue: false,
      unValueNo: false,
      unFlag: false,
      saveFlag: false,
      isSaveFlag: true,
      isSave: false,
      isEmpty: false,
      bigObj: {},
      bigObj2: {},
      casebackList: "",
      flag1: false,
      flag2: false,
      obj: {},
      axiosList: [],
      Oaccprovince: "",
      Oacccity: "",
      Oacccounty: "",
      Oaccaddress: "",
      rgtclass: "柜面渠道",
      objForm: {
        operator: localStorage.getItem("userCode"),
        mngcom: localStorage.getItem("comCode"),
        customerno: this.$route.query.customerno,
        // accno: null,
        rgtno: "",
        agentcode: sessionStorage.getItem("agentcode"),
        remark: "",
        idenddate: "",
        reasoncode: [],
        occname: "",
        occidtype: "",
        occidno: "",
        occidno1: "",
        sex: "",
        age: "",
        applydate: new Date(),
        accidenttype: "",
        notice: "1",
        contno: "",
        agentphone: "",
        directpay: "0",
        accidentdate: "",
        accidentreason: "",
        accidentcourse: "",
        accidentsite: [],
        accsite: "",
        accprovince: null,
        acccity: null,
        acccounty: null,
        accaddress: null,
        hospitalname: "",
        hospitallesion: "",
        hospitalbed: "",
        // inhospitaldate: "",
        // outhospitaldate: "",
        dianosedate: "",
        // dieasetype: "",
        // dianobasis: [],
        deathdate: "",
        pointbnf: "",
        exempt: "",
        disableddrpt: "",
        occuprpt: "",
        rgtantname: "",
        relation: "",
        rgtantidtype: "",
        rgtantidno: "",
        rgtantprovince: "",
        rgtantcity: "",
        rgtantcounty: "",
        rgtantaddress: "",
        postcode: "",
        rgtantmobile: "",
        recename: "",
        receidno: "",
        receidtype: "",
        relationtocont: "",
        bankaccno: "",
        headbankname: "",
        bankname: "",
        province: "",
        city: "",
        address: "",
        profession: "",
        annualincome: "",
        contactway: "",
        workunit: "",
        workaddress: "",
        receiveaccprovinc: "",
        receivecity: "",
        receivedistrict: "",
        receiveaddress: "",
        rgtconclusion: "",
        norgtreason: "",
        reasondetail: ""
      },
      ObjForm: {
        reasoncode: []
      },
      NewObj: {
        reasoncode: []
      },
      bjObjForm: {},
      reasoncode: [],
      rgtno: "",
      expands: [],
      rgtNo: "",
      accNo: "",
      array: [],
      province: "",
      city: "",
      address: "",
      bankname: "",
      cityArr: [],
      addressArr: [],
      bankArr: [],
      timer: "",
      tableMessage1: {},
      tableMessage2: {},
      tableMessage3: {},
      tableMessage4: {},
      tableMessage5: {},
      tableMessage6: {},
      activeStep: 0,
      btnArr: [
        "出险人信息",
        "保单信息查询",
        "既往赔案查询",
        "保全记录",
        "立案申请信息",
        "出险信息",
        "申请人信息",
        "领款人信息",
        "立案结论信息"
      ],
      conclusionForm: {}, //立案结论信息
      caseLossListArr: [], // 既往赔案
      baoquanArr: [], // 保全记录
      sexList: [], //性别枚举值
      cardTypeList: [], // 证件类型
      accidenttypeList: [], // 出险类型
      accReasonList: [], // 事故原因
      shoushangList: [], //受伤程度
      llclaimtypeList: [], // 理赔类型
      provinceList: [], // 省
      cityList: [], // 市
      areaList: [], // 区
      provinceList1: [], // 省
      cityList1: [], // 市
      areaList1: [], // 区
      provinceList2: [], // 省
      provinceList3: [], // 省
      cityList2: [], // 市
      areaList2: [], // 区
      cityList3: [], // 市
      areaList3: [], // 区
      hospitalLists: [], // 医院
      hospitalListss: [], // 医院备注
      workList: [], // 职业
      policyArr1: [],
      policyArr2: [],
      policyArr3: [],
      policydetail: [],
      tBankList: [], //银行总行
      bankAddressList: [], //银行地区
      branchBankList: [], //银行分行

      accidentReason: [
        {
          value: "1",
          text: "交通事故"
        },
        {
          value: "2",
          text: "单车交通事故"
        },
        {
          value: "3",
          text: "意外受伤"
        },
        {
          value: "4",
          text: "高坠"
        },
        {
          value: "5",
          text: "溺水"
        },
        {
          value: "6",
          text: "其他"
        }
      ],
      placeOptions: [
        {
          value: "1",
          label: "室内",
          children: [
            {
              value: "01",
              label: "厂房内"
            },
            {
              value: "02",
              label: "室内职场"
            },
            {
              value: "03",
              label: "住宅内"
            },
            {
              value: "04",
              label: "公共室内"
            },
            {
              value: "15",
              label: "电梯"
            }
          ]
        },
        {
          value: "2",
          label: "室外",
          children: [
            {
              value: "05",
              label: "工地"
            },
            {
              value: "06",
              label: "农田"
            },
            {
              value: "07",
              label: "山岭"
            },
            {
              value: "08",
              label: "公共室外"
            }
          ]
        },
        {
          value: "3",
          label: "道路上"
        },
        {
          value: "4",
          label: "交通工具",
          children: [
            {
              value: "09",
              label: "运营车辆内"
            },
            {
              value: "10",
              label: "私家车辆内"
            },
            {
              value: "11",
              label: "火车"
            },
            {
              value: "12",
              label: "飞机"
            },
            {
              value: "13",
              label: "轮船"
            },
            {
              value: "14",
              label: "非机动车"
            }
          ]
        },
        {
          value: "5",
          label: "其他"
        }
      ],
      dianoBasis: [
        {
          value: "1",
          text: "病理报告"
        },
        {
          value: "2",
          text: "生化检查"
        },
        {
          value: "3",
          text: "心电图检查"
        },
        {
          value: "4",
          text: "放射线检查"
        },
        {
          value: "5",
          text: "内窥镜检查"
        },
        {
          value: "6",
          text: "其他检查"
        }
      ],
      resource: [
        {
          value: "1",
          text: "恶性肿瘤"
        },
        {
          value: "2",
          text: "非恶性肿瘤"
        }
      ],
      resource1: [
        {
          value: "3",
          text: "交通事故"
        },
        {
          value: "4",
          text: "非交通事故"
        }
      ],
      resource2: [],
      relations: [],
      form: {
        name: "",
        region: "",
        date1: "",
        date2: "",
        delivery: false,
        type: [],
        resource: "",
        desc: ""
      },
      pictureRemark: require("../../assets/images/filing/warn.png"),
      activeName: ["1", "2", "3", "4", "5", "6"],
      labelPosition: "right",
      isbox: true,
      style1: {
        margin: "0 0 0 15px"
      },
      active: "first",
      pageData: {
        startPage: 0,
        endPage: 100
      },
      rules: {
        accprovince: [
          {
            required: true,
            message: "省不能为空！",
            trigger: "change"
          }
        ],
        acccity: [
          {
            required: true,
            message: "市不能为空！",
            trigger: "change"
          }
        ],
        acccounty: [
          {
            required: true,
            message: "区不能为空！",
            trigger: "change"
          }
        ],
        accaddress: [
          {
            required: true,
            message: "详细地址不能为空！",
            trigger: "blur"
          }
        ],
        receiveaccprovinc: [
          {
            required: true,
            message: "请选择省",
            trigger: "change"
          }
        ],
        receivecity: [
          {
            required: true,
            message: "请选择市",
            trigger: "change"
          }
        ],
        receivedistrict: [
          {
            required: true,
            message: "请选择区",
            trigger: "change"
          }
        ],
        receiveaddress: [
          {
            required: true,
            message: "请输入详细地址",
            trigger: "blur"
          }
        ],
        document: [
          {
            required: true,
            message: "证件号码不能为空！",
            trigger: ["blur", "change"]
          },
          { validator: isCheckOther, trigger: "blur" } //注
        ],
        passwork: [
          {
            required: true,
            message: "证件号码不能为空！",
            trigger: ["blur", "change"]
          },
          { validator: isCheckPass, trigger: "blur" } //注
        ],
        occname: [
          { required: true, message: "出险人姓名不能为空！", trigger: "blur" }
        ],
        occidtype: [
          {
            required: true,
            message: "出险人证件类型不能为空！",
            trigger: "change"
          }
        ],
        occidno: [
          {
            required: true,
            message: "证件号码不能为空！",
            trigger: "blur"
          }
        ],
        rgtantidno: [
          {
            required: true,
            message: "证件号码不能为空！",
            trigger: ["blur", "change"]
          },
          { validator: isCheckID, trigger: "blur" }
          // {
          //   pattern: /^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,
          //   message: "请输入正确的身份证件号码"
          // }
        ],
        rgtantidno1: [
          {
            required: true,
            message: "证件号码不能为空！",
            trigger: ["blur", "change"]
          }
          // {
          //   pattern: /^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,
          //   message: "请输入正确的身份证件号码"
          // }
        ],
        sex: [
          { required: true, message: "出险人性别不能为空！", trigger: "blur" }
        ],
        age: [
          { required: true, message: "出险人年龄不能为空！", trigger: "blur" }
        ],
        idenddate: [
          {
            required: true,
            message: "证件有效期止期不能为空！",
            trigger: "blur"
          }
          // { validator: isDateNow, trigger: "change" }
        ],
        notice: [
          {
            required: true,
            message: "是否通知营销员不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        contno: [
          {
            required: true,
            message: "保单号不能为空！",
            trigger: "blur"
          }
        ],

        applydate: [
          {
            required: true,
            message: "申请日期不能为空！",
            trigger: ["blur"]
          }
          // { validator: isapplydate, trigger: "blur" } //注
        ],
        accidentdate: [
          {
            required: true,
            message: "出险日期不能为空！",
            trigger: ["blur"]
          }
        ],
        reasoncode: [
          {
            type: "array",
            required: true,
            message: "理赔类型不能为空！",
            trigger: "change"
          }
        ],
        accidenttype: [
          {
            required: true,
            message: "出险类型不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        accidentreason: [
          {
            required: true,
            message: "事故原因不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        accidentsite: [
          {
            required: true,
            message: "事故发生地点性质不能为空！",
            trigger: "change"
          }
        ],
        hospitalname: [
          {
            required: true,
            message: "就诊医院不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        dianosedate: [
          {
            required: true,
            message: "确诊日期不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        deathdate: [
          {
            required: true,
            message: "身故日期不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        pointbnf: [
          {
            required: true,
            message: "受益人是否指定不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        exempt: [
          {
            required: true,
            message: "申请豁免原因不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        // resource: [
        //   {
        //     required: true,
        //     message: "请选择申请豁免原因",
        //     trigger: ["blur", "change"]
        //   }
        // ],
        disableddrpt: [
          {
            required: true,
            message: "伤残鉴定报告不能为空！",
            trigger: "change"
          }
        ],
        occuprpt: [
          {
            required: true,
            message: "工伤报告不能为空！",
            trigger: "change"
          }
        ],
        rgtantname: [
          {
            required: true,
            message: "申请人姓名不能为空！",
            trigger: ["blur", "change"]
          }
          // { validator: isNameLeg, trigger: "blur" }
        ],
        relation: [
          {
            required: true,
            message: "申请人与出险人关系不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        rgtantidtype: [
          {
            required: true,
            message: "证件类型不能为空！",
            trigger: "change"
          }
        ],
        rgtantmobile: [
          {
            required: true,
            message: "电话不能为空！",
            trigger: ["blur", "change"]
          },
          { validator: isMobileNumber1, trigger: "blur" } //注
        ],
        recename: [
          {
            required: true,
            message: "账户所有人姓名不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        receidtype: [
          {
            required: true,
            message: "证件类型不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        relationtocont: [
          {
            required: false,
            // message: "与被保人关系不能为空！",
            trigger: ["blur", "change"]
          }
          // { validator: workunit, trigger: "blur" } //注
        ],
        receidno: [
          {
            required: true,
            message: "证件号码不能为空！",
            trigger: "blur"
          },
          { validator: isCheckID, trigger: "blur" } //注
        ],
        bankaccno: [
          {
            required: true,
            message: "授权账户号码不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        headbankname: [
          {
            required: true,
            message: "总行不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        province: [
          {
            required: true,
            message: "地区不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        bankname: [
          // {
          //   required: true,
          //   message: "支行不能为空！",
          //   trigger: ["blur", "change"]
          // }
          // {
          //   required: true,
          //   message: "支行不能为空！",
          //   trigger: ["blur", "change"]
          // }
        ],
        profession: [
          {
            required: true,
            message: "职业不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        annualincome: [
          {
            required: true,
            message: "请输入年收入",
            trigger: ["blur", "change"]
          }
          // { validator: isMoney, trigger: "blur" } //注
        ],
        contactway: [
          {
            required: true,
            message: "联系方式不能为空！",
            trigger: ["blur", "change"]
          },
          { validator: isMobileNumber, trigger: "blur" } //注
        ],
        workunit: [
          { validator: workunit, trigger: "blur" } //注
        ],
        workaddress: [
          { validator: workaddress, trigger: "blur" } //注
        ],
        rgtconclusion: [
          {
            required: true,
            message: "立案结论不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        norgtreason: [
          {
            required: true,
            message: "不予立案原因不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        remark: [
          {
            message: "电话号码不能为空！",
            trigger: ["blur", "change"]
          },
          { validator: isMobileNumber, trigger: "blur" } //注
        ],
        reasondetail: [
          { required: true, message: "原因说明不能为空！", trigger: "blur" }
        ],
        agentphone: [
          { required: true, message: "营销员电话不能为空！", trigger: "blur" }
        ]
      },
      riskResultList: [],
      // formData:{
      //   pageIndex:1,
      //   pagesize:100
      // }
      formData: {
        pagestart: 1,
        pageend: 100,
        likename: ""
      },
      formData1: {
        pagestart: 0,
        pageend: 100,
        likename: ""
      },
      bankFormData: {
        pagestart: 0,
        pageend: 100,
        likename: ""
      },
      bankFormAddress: {
        pagestart: 0,
        pageend: 100,
        likename: ""
      },
      hosName: ""
    };
  },
  watch: {
    "objForm.accidenttype": function(value) {
      if (value == "02") {
        // debugger;
        if (
          !(
            this.objForm.accprovince ||
            this.objForm.acccity ||
            this.objForm.acccounty ||
            this.objForm.accaddress
          )
        ) {
          // this.objForm.accprovince = this.Oaccprovince;
          // this.objForm.acccity = this.Oacccity;
          // this.objForm.acccounty = this.Oacccounty;
          // this.objForm.accaddress = this.Oaccaddress;
          this.objForm.accprovince = this.objForm.homeprovince;
          this.objForm.acccity = this.objForm.homecity;
          this.objForm.accaddress = this.objForm.homecommunity;
          this.objForm.acccounty = this.objForm.homecounty;
          this.getCityCode();
          this.getcountyCode();
        }
      }
    },
    "objForm.hospitalname": function(newValue, oldValue) {
      if (newValue != oldValue) {
        this.pageData.startPage = 0;
        this.pageData.endPage = 100;
      }
    },
    // "objForm.recename": function(newValue, oldValue) {
    //   if (newValue != null || !"".equals(newValue.trim())) {
    //     this.flag1 = true;
    //     this.flag2 = true;
    //   }
    // },
    // "objForm.receidno": function(newValue, oldValue) {
    //   if (newValue != null || !"".equals(newValue.trim())) {
    //     this.flag1 = true;
    //     this.flag2 = true;
    //   }
    // },
    // "objForm.profession": function(newValue, oldValue) {
    //   if (newValue != null || !"".equals(newValue.trim())) {
    //     this.flag1 = true;
    //     this.flag2 = true;
    //     if (this.objForm.workaddress !== "") {
    //       this.flag1 = true;
    //       this.flag2 = true;
    //     }
    //   }
    // },
    // "objForm.annualincome": function(newValue, oldValue) {
    //   if (newValue != null || !"".equals(newValue.trim())) {
    //     this.flag1 = true;
    //     this.flag2 = true;
    //   }
    // },
    // "objForm.contactway": function(newValue, oldValue) {
    //   if (newValue != null || !"".equals(newValue.trim())) {
    //     this.flag1 = true;
    //     this.flag2 = true;
    //   }
    // },
    // "objForm.receiveaccprovinc": function(newValue, oldValue) {
    //   if (newValue != null || !"".equals(newValue.trim())) {
    //     this.flag1 = true;
    //     this.flag2 = true;
    //   }
    // },
    // "objForm.workaddress": function(value) {
    //   if (value != null || !"".equals(value.trim())) {
    //     this.flag1 = false;
    //   } else {
    //     this.flag1 = false;
    //   }
    // },
    "objForm.relation": function(value) {
      if (value === "00") {
        this.unFlag = true;
      }
      if (this.$route.query.rgtno && this.abc) {
        if (value === "00") {
          this.unFlag = true;
          this.objForm.rgtantname = this.objForm.occname;
          this.objForm.rgtantidtype = this.objForm.occidtype;
          this.objForm.rgtantidno = this.objForm.occidno;
          if (this.objForm.remark) {
            this.objForm.rgtantmobile = this.objForm.remark;
          }
          if (this.objForm.homeprovince) {
            this.objForm.rgtantprovince = this.objForm.homeprovince;
          }
          if (this.objForm.homecity) {
            this.objForm.rgtantcity = this.objForm.homecity;
          }
          if (this.objForm.homecounty) {
            this.objForm.rgtantcounty = this.objForm.homecounty;
          }
          if (this.objForm.homecommunity) {
            this.objForm.rgtantaddress = this.objForm.homecommunity;
          }
          this.getCityCode();
          this.getcountyCode();
          if (this.objForm.homepostcode) {
            this.objForm.postcode = this.objForm.homepostcode;
          }
        } else {
          this.unFlag = false;
        }
      } else {
        if (this.abc) {
          if (value === "00") {
            this.unFlag = true;
            this.objForm.rgtantname = this.objForm.occname;
            this.objForm.rgtantidtype = this.objForm.occidtype;
            this.objForm.rgtantidno = this.objForm.occidno;
            if (this.objForm.remark) {
              this.objForm.rgtantmobile = this.objForm.remark;
            }
            if (this.objForm.homeprovince) {
              this.objForm.rgtantprovince = this.objForm.homeprovince;
            }
            if (this.objForm.homecity) {
              this.objForm.rgtantcity = this.objForm.homecity;
            }
            if (this.objForm.homecounty) {
              this.objForm.rgtantcounty = this.objForm.homecounty;
            }
            if (this.objForm.homecommunity) {
              this.objForm.rgtantaddress = this.objForm.homecommunity;
            }
            this.getCityCode();
            this.getcountyCode();
            if (this.objForm.homepostcode) {
              this.objForm.postcode = this.objForm.homepostcode;
            }
          } else {
            this.unFlag = false;
          }
        }
      }
    },
    "objForm.rgtantmobile": function(value) {
      if (value) {
        this.unValue = true;
      }
    },
    "objForm.rgtantidno": function(value) {
      if (value && !this.unFlag) {
        this.unValueNo = true;
      } else {
        this.unValueNo = false;
      }
    },
    "objForm.accprovince": function(value) {
      if (value === "999999") {
        this.cityList = null;
        this.areaList = null;
      }
    },
    "objForm.rgtantprovince": function(value) {
      if (value === "999999") {
        this.cityList3 = null;
        this.areaList3 = null;
      }
    },
    "objForm.receiveaccprovinc": function(value) {
      if (value === "999999") {
        this.cityList2 = null;
        this.areaList2 = null;
      }
    }
  },
  created() {
    // this.riskResultList = riskResult.bodys;
    this.rgtno = this.$route.query.rgtno
      ? this.$route.query.rgtno
      : sessionStorage.getItem("rgtnumber") || this.objForm.rgtno;
    this.customerno = this.$route.query.customerno;
    this.clmno = this.$route.query.clmno;
    // this.objForm.agentphone = this.$route.query.phone;
    // this.objForm.contno = this.$route.query.contno;
    // this.objForm.agentcode = this.$route.query.agentcode;
    // this.IDTypes = IDType();
    // this.reasoncode ? (this.value = []) : (this.value = "");
  },
  mounted() {
    this.$watermark.set(
      localStorage.getItem("userCode"),
      localStorage.getItem("userName")
    );
    window.addEventListener("scroll", this.handleScroll, true);
    if (!this.customerno) {
      this.flagBtn = false;
    }

    this.getCodeList();
    this.getSheng();
    this.getHeadBanks(); // 银行总行
    this.getBankAddress();
    this.getCityCode();
    this.getcountyCode();
    this.getBranchBank();
    this.initData1();
    // this.getHospitals(); // 就诊医院
    if (this.rgtno) {
      this.queryTranNo(); // 微信悬浮框参数查询
    }
    // this.getBanchBank();
    // this.getRiskRes(this.formData); //出险结果
    // this.getCupation(this.formData1);
    this.getCupationss(); //职业

    if (this.rgtno && this.customerno) {
      this.initInfor();
    }
    if (!this.$route.query.phone) {
      if (this.$route.query.rgtno) {
        // this.initInfor();
      } else {
        if (this.customerno) {
          this.initTableMes();
          if (sessionStorage.getItem("ObjForm")) {
            // console.log(JSON.parse(sessionStorage.getItem("ObjForm")));
            let NewObj = {};
            NewObj = JSON.parse(sessionStorage.getItem("ObjForm"));
            this.objForm = NewObj;
            // Object.assign(this.objForm, NewObj);
            // this.objForm=JSON.parse(sessionStorage.getItem("ObjForm"))
            // alert("qwe");
            // this.objForm.rgtno = sessionStorage.getItem("rgtnumber");
          }
        }
      }
    } else {
      this.confirm = localStorage.getItem("confirm");

      //  this.initInfor();

      if (sessionStorage.getItem("ObjForm")) {
        this.objForm = JSON.parse(sessionStorage.getItem("ObjForm"));
        this.getCityCode();
        this.getcountyCode();

        // console.log(JSON.stringify(this.objForm))
        // this.changevinceres(this.objForm.accprovince)
        // this.changaccityres(this.objForm.acccity)

        // this.changevince3res(this.objForm.rgtantprovince)
        // this.changaccity3res(this.objForm.rgtantcity)

        // this.changevince2res(this.objForm.receiveaccprovinc)
        // this.changaccity2res(this.objForm.receivecity)
        // if (this.$route.query.phone) {
        //   this.objForm.agentphone = this.$route.query.phone;
        // }
        // if (this.$route.query.contno) {
        //   this.objForm.contno = this.$route.query.contno;
        // }
        // if (this.$route.query.agentcode) {
        //   this.objForm.agentcode = this.$route.query.agentcode;
        // }
      } else {
        // this.initInfor();
      }

      // if(sessionStorage.getItem("rgtnumber")){
      //   alert('111')
      //   this.initInfor();
      // }
    }

    // if (sessionStorage.getItem("rgtnumber") && !this.$route.query.phone) {
    //   this.initInfor();
    // }
    // new Promise(()=>{})
    if (
      this.objForm.receidno === "" &&
      this.objForm.contactway === "" &&
      this.objForm.bankaccno === "" &&
      this.objForm.headbankname === "" &&
      this.objForm.profession === "" &&
      this.objForm.annualincome === "" &&
      this.objForm.workunit === "" &&
      this.objForm.receiveaccprovinc === "" &&
      this.objForm.recename === "" &&
      this.objForm.workaddress === ""
    ) {
      this.flag1 = false;
      this.flag2 = false;
    }
    // setTimeout(() => {

    // }, 1000);
    // 延时待初始化完成获取到rgtobj，再调用微信浮动框接口
    setTimeout(() => {
      if (this.$route.query.phone) {
        this.objForm.agentphone = this.$route.query.phone;
      }
      if (this.$route.query.contno) {
        this.objForm.contno = this.$route.query.contno;
      }
      if (this.$route.query.agentcode) {
        this.objForm.agentcode = this.$route.query.agentcode;
      }
      if (this.rgtobj != null && this.rgtclass == "微信渠道") {
        this.$refs.dragno.queryRegisterRelation();
      }
      this.bjObjForm = {
        operator: localStorage.getItem("userCode"),
        mngcom: localStorage.getItem("comCode"),
        customerno: this.$route.query.customerno,
        rgtno: this.$route.query.rgtno,
        hospitalname: this.objForm.hospitalname
      };
    }, 1000);
    // Bus.$on("bJdialogVisible", bJdialogVisible => {
    //   this.bJdialogVisible = bJdialogVisible;
    // });
  },
  beforeDestroy() {
    this.$store.dispatch("titleshow", "");
    window.removeEventListener("scroll", this.handleScroll, true);
  },
  methods: {
    // ====备注信息弹框=====
    changeisshow(event) {
      this.isshowremark = event;
    },
    isShowRemark() {
      this.isshowremark = true;
    },
    // ====备注信息弹框End=====
    // 不予立案通知书打印
    noticepdfprint() {
      if (this.$route.query.rgtno) {
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存预览通知书！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              post(service.noticepdfprint, {
                rgtno: this.objForm.rgtno,
                noticeno: this.objForm.rgtno,
                printtype: "06"
              }).then(res => {
                if (res.data.pdflist) {
                  window.open(res.data.pdflist[0].pdfurl, "_blank");
                } else {
                  this.$message.error("数据更新中请稍后！");
                }
              });
            })
            .catch(() => {});
        } else {
          post(service.noticepdfprint, {
            rgtno: this.objForm.rgtno,
            noticeno: this.objForm.rgtno,
            printtype: "06"
          }).then(res => {
            if (res.data.pdflist) {
              window.open(res.data.pdflist[0].pdfurl, "_blank");
            } else {
              this.$message.error("数据更新中请稍后！");
            }
          });
        }
      } else {
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存预览通知书！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              post(service.noticepdfprint, {
                rgtno: this.objForm.rgtno,
                noticeno: this.objForm.rgtno,
                printtype: "06"
              }).then(res => {
                if (res.data.pdflist) {
                  window.open(res.data.pdflist[0].pdfurl, "_blank");
                } else {
                  this.$message.error("数据更新中请稍后！");
                }
              });
            })
            .catch(() => {});
        } else {
          if (!this.objForm.rgtno) {
            this.$message.error("请先保存页面信息！");
          } else {
            post(service.noticepdfprint, {
              rgtno: this.objForm.rgtno,
              noticeno: this.objForm.rgtno,
              printtype: "06"
            }).then(res => {
              if (res.data.pdflist) {
                window.open(res.data.pdflist[0].pdfurl, "_blank");
              } else {
                this.$message.error("数据更新中请稍后！");
              }
            });
          }
        }
      }
    },
    changeR() {
      if (this.objForm.norgtreason == "03") {
        this.objForm.reasondetail =
          "您好，您通过微信申请理赔，本次预赔付金额可能≥3000元.请及时将理赔资料原件提交本公司，本公司收到您提交的资料后将及时审核。谢谢！";
      } else {
        this.objForm.reasondetail = "";
      }
    },
    clickD() {
      this.timer = new Date().getTime();
      this.bJdialogVisible = true;
      if (this.$route.query.rgtno) {
        this.bjObjForm = {
          operator: localStorage.getItem("userCode"),
          mngcom: localStorage.getItem("comCode"),
          customerno: this.$route.query.customerno,
          rgtno: this.$route.query.rgtno,
          hospitalname: this.objForm.hospitalname
        };
        console.log(this.bjObjForm);
      } else {
        console.log(this.objForm.rgtno);
        this.bjObjForm = {
          operator: localStorage.getItem("userCode"),
          mngcom: localStorage.getItem("comCode"),
          customerno: this.$route.query.customerno,
          rgtno: this.objForm.rgtno,
          hospitalname: this.objForm.hospitalname
        };
      }
    },
    toBeijing() {
      var obj = {
        rgtno: this.objForm.rgtno,
        customerno: this.$route.query.customerno
      };
      this.$router.push({
        name: "BeijingBill",
        params: { dataOfTable: JSON.stringify(obj) }
      });
    },
    handleScroll() {
      let lOne = document.getElementById("0");
      let lSecnd = document.getElementById("1");
      let lThree = document.getElementById("2");
      let lFour = document.getElementById("3");
      let lFive = document.getElementById("4");
      let lSix = document.getElementById("5");
      let lSeven = document.getElementById("6");
      let lEight = document.getElementById("7");
      let lNine = document.getElementById("8");
      let dom = this.$refs.addFiling.parentElement;

      if (lOne.offsetTop - dom.scrollTop >= 60) {
        this.activeStep = 0;
      } else if (
        lSecnd.offsetTop - dom.scrollTop <= 110 &&
        lSecnd.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 1;
      } else if (
        lThree.offsetTop - dom.scrollTop <= 110 &&
        lThree.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 2;
      } else if (
        lFour.offsetTop - dom.scrollTop <= 110 &&
        lFour.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 3;
      } else if (
        lFive.offsetTop - dom.scrollTop <= 110 &&
        lFive.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 4;
      } else if (
        lSix.offsetTop - dom.scrollTop <= 110 &&
        lSix.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 5;
      } else if (
        lSeven.offsetTop - dom.scrollTop <= 110 &&
        lSeven.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 6;
      } else if (
        lEight.offsetTop - dom.scrollTop <= 110 &&
        lEight.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 7;
      } else if (
        lNine.offsetTop - dom.scrollTop <= 110 &&
        lNine.offsetTop - dom.scrollTop >= 10
      ) {
        this.activeStep = 8;
      }
    },
    changeAcc() {
      this.objForm.exempt = "";
    },
    handlePaste() {},
    // 授权账户号码失焦
    bankAccountBluer(val) {
      if (this.bankAccountNumBlur === 1) {
        this.rules.bankaccno[0].message = "请再输入一次授权账号！";
        this.bankFirst = val;
        this.objForm.bankaccno = "";
        if (
          !this.objForm.receidno &&
          !this.objForm.contactway &&
          !this.objForm.bankaccno &&
          !this.objForm.headbankname &&
          !this.objForm.profession &&
          !this.objForm.annualincome &&
          !this.objForm.workunit &&
          !this.objForm.workaddress &&
          !this.objForm.receiveaccprovinc &&
          !this.objForm.recename
        ) {
          this.$message.warning("请再输入一次授权账号！");
        }
        this.$refs.input.focus();
        this.bankAccountNumBlur += 1;
      } else {
        if (val != this.bankFirst) {
          this.rules.bankaccno[0].message = "银行账号两次输入不一致 ！";
          this.bankAccountNumBlur -= 1;
          this.objForm.bankaccno = "";
          this.$refs.input.focus();
          if (
            !this.objForm.receidno &&
            !this.objForm.contactway &&
            !this.objForm.bankaccno &&
            !this.objForm.headbankname &&
            !this.objForm.profession &&
            !this.objForm.annualincome &&
            !this.objForm.workunit &&
            !this.objForm.workaddress &&
            !this.objForm.receiveaccprovinc &&
            !this.objForm.recename
          ) {
            this.$message.error("银行账号两次输入不一致 ！");
          }
        } else {
          this.rules.bankaccno[0].message = "授权账户号码不能为空！";
          this.bankAccountNumBlur -= 1;
        }
      }
    },

    ToCDB(str) {
      var result = "";
      for (var i = 0; i < str.length; i++) {
        if (str.charCodeAt(i) == 12288) {
          result += String.fromCharCode(str.charCodeAt(i) - 12256);
          continue;
        }
        if (str.charCodeAt(i) > 65280 && str.charCodeAt(i) < 65375)
          result += String.fromCharCode(str.charCodeAt(i) - 65248);
        else result += String.fromCharCode(str.charCodeAt(i));
      }
      str = result;
      return str;
    },
    goBank() {
      if (this.$route.query.rgtno) {
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              this.$router.push({ name: "TaskList" });
            })
            .catch(() => {});
        } else {
          this.$router.push({ name: "TaskList" });
        }
      } else {
        if (!this.customerno) {
          this.$router.push({ name: "TaskList" });
          return false;
        }
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              this.$router.push({ name: "TaskList" });
            })
            .catch(() => {});
        } else {
          if (!this.customerno) {
            this.$router.push({ name: "TaskList" });
            return false;
          }
          if (this.objForm.rgtno) {
            this.$router.push({ name: "TaskList" });
          } else {
            this.$confirm(
              "页面信息未保存，是否确认不保存离开本页面！",
              "提示",
              {
                confirmButtonText: "是",
                cancelButtonText: "否",
                cancelButtonClass: "cancelButton",
                confirmButtonClass: "confirmButton",
                type: "warning",
                center: true
              }
            )
              .then(() => {
                this.$router.push({ name: "TaskList" });
              })
              .catch(() => {});
          }
        }
      }
    },
    // 提起调查
    getState() {
      if (localStorage.getItem("startinqflag") == "0") {
        return true;
      }
      if (this.flagBtn) {
        return true;
      }
    },
    toInitiateSurvey() {
      if (this.$route.query.rgtno) {
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              this.$router.push({
                name: "InitiateSurvey",
                query: {
                  clmno: this.objForm.rgtno
                }
              });
            })
            .catch(() => {});
        } else {
          this.$router.push({
            name: "InitiateSurvey",
            query: {
              clmno: this.objForm.rgtno
            }
          });
        }
      } else {
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              this.$router.push({
                name: "InitiateSurvey",
                query: {
                  // clmno: this.$route.query.rgtno
                  clmno: this.objForm.rgtno
                }
              });
              sessionStorage.removeItem("ObjForm");
            })
            .catch(() => {});
        } else {
          if (!this.objForm.rgtno) {
            this.$message.error("请先保存页面信息！");
          } else {
            this.$router.push({
              name: "InitiateSurvey",
              query: { clmno: this.objForm.rgtno }
            });
          }
        }
      }
    },
    // 影像查询
    toInitImg() {
      let routeUrl = this.$router.resolve({
        name: "initImg",
        query: { rgtno: this.objForm.rgtno }
      });
      window.open(routeUrl.href, "_blank");
    },
    // 回退查询
    initData1() {
      post(service.queryLLCaseBack, {
        bodys: {
          clmno: this.rgtno
        }
      }).then(res => {
        if (res.data.header.code === "200") {
          this.casebackList = res.data.bodys;
        }
      });
    },
    //前往回退查询页面
    torRollBackMes() {
      var obj = {
        rgtno: this.rgtno,
        customerno: this.$route.query.customerno
      };
      this.$router.push({
        name: "RollbackMes",
        params: {
          dataOfTable: JSON.stringify(obj)
        }
      });
    },
    // 领款人信息  授权银行数据获取
    getHeadBank() {
      this.bankFormData.pagestart = 0;
      this.bankFormData.pageend = 100;
      post(service.queryBank, {
        pagestart: this.bankFormData.pagestart,
        pageend: this.bankFormData.pageend,
        likename: this.objForm.headbankname
      }).then(res => {
        if (res.data.header.code === "200") {
          this.tBankList = res.data.bodys;
          this.objForm.province = "";
          this.objForm.bankname = "";
        }
      });
    },
    getHeadBanks() {
      this.bankFormData.pagestart = 0;
      this.bankFormData.pageend = 100;
      post(service.queryBank, {
        pagestart: this.bankFormData.pagestart,
        pageend: this.bankFormData.pageend,
        likename: this.objForm.headbankname
      }).then(res => {
        if (res.data.header.code === "200") {
          this.tBankList = res.data.bodys;
        }
      });
    },
    focusBank() {
      this.getBankAddress();
    },
    // 银行所在地区
    getBankAddress() {
      this.bankFormAddress.pagestart = 0;
      this.bankFormAddress.pageend = 100;
      post(service.queryBankLocation, {
        pagestart: this.bankFormAddress.pagestart,
        pageend: this.bankFormAddress.pageend,
        likename: ""
      }).then(res => {
        if (res.data.header.code === "200") {
          this.bankAddressList = res.data.bodys;
        }
      });
    },
    filterBankP(val) {
      if (val) {
        post(service.queryBankLocation, {
          pagestart: 0,
          pageend: 100,
          likename: val
        }).then(res => {
          if (res.data.header.code === "200") {
            this.bankAddressList = res.data.bodys;
          }
        });
      }
    },

    // 银行分行
    getBanchBank(key1, key2) {
      if (key1 && key2) {
        this.getBankAddress();
        post(service.queryTbanklocations, {
          bodys: {
            bankid: key1,
            standardareasid: key2
          }
        }).then(res => {
          if (res.data.header.code === "200") {
            this.branchBankList = res.data.bodys;
            this.objForm.bankname = "";
          }
        });
      }
    },

    clearMes() {
      this.objForm.acccity = null;
      this.objForm.acccounty = null;
      this.cityList = null;
      this.areaList = null;
    },
    clearArea() {
      this.objForm.acccounty = null;
      this.areaList = null;
    },
    clearMes1() {
      this.objForm.rgtantcity = null;
      this.objForm.rgtantcounty = null;
      this.cityList3 = null;
      this.areaList3 = null;
    },
    clearArea1() {
      this.objForm.rgtantcounty = null;
      this.areaList3 = null;
    },
    clearMes2() {
      this.objForm.receivecity = null;
      this.objForm.receivedistrict = null;
      this.cityList2 = null;
      this.areaList2 = null;
    },
    clearArea2() {
      this.objForm.receivedistrict = null;
      this.areaList2 = null;
    },
    //授权银行清空(因与支行联动  授权银行清空后清空支行)
    clearBank() {
      this.objForm.bankname = null;
      this.branchBankList = null;
    },

    // 省--市
    changevince(key) {
      post(service.getCity, {
        bodys: {
          state: "city",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.cityList = res.data.bodys.rows;
          this.objForm.acccity = null;
          this.objForm.acccounty = null;
          this.areaList = null;
        }
      });
    },

    //通过市--县
    changaccity(key) {
      post(service.getCity, {
        bodys: {
          state: "country",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.areaList = res.data.bodys.rows;
          this.objForm.acccounty = null;
          // this.objForm.accaddress = null;
        }
      });
    },
    changeCounty() {
      // this.objForm.accaddress = null;
    },
    getLingCityCode() {
      if (this.objForm.receiveaccprovinc) {
        post(service.getCity, {
          bodys: {
            state: "city",
            code: this.objForm.receiveaccprovinc
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.cityList2 = res.data.bodys.rows;
          }
        });
      }
      if (this.objForm.receivecity) {
        post(service.getCity, {
          bodys: {
            state: "country",
            code: this.objForm.receivecity
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.areaList2 = res.data.bodys.rows;
          }
        });
      }
    },
    // 获取省==市
    changevince2(key) {
      post(service.getCity, {
        bodys: {
          state: "city",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.cityList2 = res.data.bodys.rows;
          this.objForm.receivecity = null;
          this.objForm.receivedistrict = null;
          this.areaList2 = null;
          // this.objForm.receiveaddress = null;
        }
      });
    },

    // 获取市==县
    changaccity2(key) {
      post(service.getCity, {
        bodys: {
          state: "country",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.areaList2 = res.data.bodys.rows;
          this.objForm.receivedistrict = null;
          // this.objForm.receiveaddress = null;
        }
      });
    },

    changeCounty2() {
      // this.objForm.receiveaddress = null;
    },
    // 获取省==市
    changevince3(key) {
      post(service.getCity, {
        bodys: {
          state: "city",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.cityList3 = res.data.bodys.rows;
          this.objForm.rgtantcity = null;
          this.objForm.rgtantcounty = null;
          this.areaList3 = null;
          // this.objForm.rgtantaddress = null;
        }
      });
    },

    // 获取市==县
    changaccity3(key) {
      post(service.getCity, {
        bodys: {
          state: "country",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.areaList3 = res.data.bodys.rows;
          this.objForm.rgtantcounty = null;
          // this.objForm.rgtantaddress = null;
        }
      });
    },
    changeCounty3() {
      // this.objForm.rgtantaddress = null;
    },

    // 获取省
    getSheng() {
      post(service.getCity, {
        bodys: {
          state: "province",
          code: ""
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.provinceList = res.data.bodys.rows;
          this.provinceList1 = res.data.bodys.rows;
          this.provinceList2 = res.data.bodys.rows;
          this.provinceList3 = res.data.bodys.rows;
        }
      });
    },
    getCityCode() {
      if (this.objForm.accprovince) {
        post(service.getCity, {
          bodys: {
            state: "city",
            code: this.objForm.accprovince
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.cityList = res.data.bodys.rows;
          }
        });
        // this.changevince(this.dangerInfor.accprovince)
      }
      if (this.objForm.rgtantprovince) {
        post(service.getCity, {
          bodys: {
            state: "city",
            code: this.objForm.rgtantprovince
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.cityList3 = res.data.bodys.rows;
          }
        });
        // this.changevince(this.dangerInfor.accprovince)
      }
      if (this.objForm.receiveaccprovinc) {
        post(service.getCity, {
          bodys: {
            state: "city",
            code: this.objForm.receiveaccprovinc
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.cityList2 = res.data.bodys.rows;
          }
        });
        // this.changevince(this.dangerInfor.accprovince)
      }
    },
    getcountyCode() {
      if (this.objForm.acccity) {
        // this.changaccity(this.dangerInfor.acccity)
        post(service.getCity, {
          bodys: {
            state: "country",
            code: this.objForm.acccity
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.areaList = res.data.bodys.rows;
          }
        });
      }
      if (this.objForm.rgtantcity) {
        // this.changaccity(this.dangerInfor.acccity)
        post(service.getCity, {
          bodys: {
            state: "country",
            code: this.objForm.rgtantcity
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.areaList3 = res.data.bodys.rows;
          }
        });
      }
      if (this.objForm.receivecity) {
        // this.changaccity(this.dangerInfor.acccity)
        post(service.getCity, {
          bodys: {
            state: "country",
            code: this.objForm.receivecity
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.areaList2 = res.data.bodys.rows;
          }
        });
      }
    },

    getBranchBank() {
      if (this.objForm.bankname) {
        post(service.queryTbanklocations, {
          bodys: {
            bankid: this.objForm.headbankname,
            standardareasid: this.objForm.province
          }
        }).then(res => {
          if (res.data.header.code === "200") {
            this.branchBankList = res.data.bodys;
            // this.objForm.bankname = "";
          }
        });
      }
    },
    // 立案详情查询接口
    initInfor() {
      let _this = this;
      (_this.filingArr = [
        {
          url: service.occperson,
          params: {
            bodys: {
              customerno: this.customerno,
              rgtno: _this.rgtno
            }
          }
        },
        {
          url: service.rgtntregister,
          params: {
            bodys: {
              rgtno: _this.rgtno
            }
          }
        },
        {
          url: service.occinformation,
          params: {
            bodys: {
              customerno: this.customerno,
              rgtno: _this.rgtno
            }
          }
        },
        {
          url: service.rgantperson,
          params: {
            bodys: {
              rgtno: _this.rgtno
            }
          }
        },
        {
          url: service.receviceperson,
          params: {
            bodys: {
              rgtno: _this.rgtno
            }
          }
        },
        {
          url: service.conculsionregister,
          params: {
            bodys: {
              rgtno: _this.rgtno
            }
          }
        }
      ]),
        _this.filingArr.forEach(postItem => {
          _this.axiosList.push(post(postItem.url, postItem.params));
        });
      axios
        .all(_this.axiosList)
        .then(function(res) {
          if (res[0].data.headers.code === "500") {
            this.$message.error(res[0].data.headers.message);
            return;
          }
          _this.tableMessage1 = res[0].data.bodys.rows[0];

          // sessionStorage.setItem('accno',_this.tableMessage1.accno)
          // 出险人信息
          if (res[1].data.headers.code === "500") {
            _this.$message.error(res[1].data.headers.message);
            return;
          }
          _this.tableMessage2 = res[1].data.bodys.rows[0];
          // 立案申请信息
          if (res[2].data.headers.code === "500") {
            _this.$message.error(res[2].data.headers.message);
            return;
          }
          _this.tableMessage3 = res[2].data.bodys.rows[0];
          // 出险信息
          if (res[3].data.headers.code === "500") {
            _this.$message.error(res[3].data.headers.message);
            return;
          }
          _this.tableMessage4 = res[3].data.bodys.rows[0];
          // 申请人信息
          if (res[4].data.headers.code === "500") {
            _this.$message.error(res[4].data.headers.message);
            return;
          }
          _this.tableMessage5 = res[4].data.bodys.rows[0];
          // 领款人信息
          if (res[5].data.headers.code === "500") {
            _this.$message.error(res[5].data.headers.message);
            return;
          }
          _this.tableMessage6 = res[5].data.bodys.rows[0];
          // 立案结论信息

          let newObj = {};

          Object.assign(
            _this.objForm,
            _this.tableMessage1,
            _this.tableMessage2,
            _this.tableMessage3,
            _this.tableMessage4,
            _this.tableMessage5,
            _this.tableMessage6
          );
          _this.getSheng();
          _this.getCityCode();
          _this.getcountyCode();
          _this.getBranchBank();
          // //获取理赔类型
          _this.bigObj = JSON.stringify(_this.objForm);
        })
        .then(() => {
          //   getHospitals() {
          // setTimeout(() => {
          if (this.objForm.hospitalname) {
            post(service.getHospital, {
              pagestart: this.pageData.startPage,
              pageend: this.pageData.endPage,
              likename: this.objForm.hospitalname || ""
            }).then(res => {
              if (res.data.bodys) {
                this.hospitalLists = res.data.bodys;
                this.remarkContents = this.hospitalLists[0].remark;
              } else {
                this.objForm.hospitalname = "";
              }
            });
          }

          // }, 1000);
          // },
        });
    },
    getCodeList: function() {
      post(service.getCodeList, {
        // 证件类型，性别，出险类型 事故原因
        codetype: [
          "llidtype",
          "llsex",
          "accidenttype",
          "accdegree",
          "accreason",
          "llrelation",
          "llclaimtype",
          "relatoinsure"
        ]
      }).then(res => {
        console.log(res);
        if (res.data.header.code === "200") {
          this.cardTypeList = res.data.bodys["llidtype"]; // 证件类型
          console.log("zzza", this.cardTypeList);
          this.sexList = res.data.bodys["llsex"]; // 性别
          this.accidenttypeList = res.data.bodys["accidenttype"]; // 出险类型
          this.shoushangList = res.data.bodys["accdegree"]; // 受伤程度
          this.accReasonList = res.data.bodys["accreason"]; // 事故原因
          this.relations = res.data.bodys["llrelation"]; // 申请人与出险人关系
          // this.chuxianResult = res.data.bodys["accresult"]; // 出险结果
          this.llclaimtypeList = res.data.bodys["llclaimtype"]; // 理赔类型
          this.relatoinsureList = res.data.bodys["relatoinsure"]; // 报案人与出现人关系
        }
      });
    },
    // 获取职业
    codeToname: function(obj, arr) {
      var a = null;
      arr.forEach(element => {
        if (element.code === obj) {
          a = element.name;
        }
      });
      return a;
    },
    updataBank: function() {
      this.addressArr.forEach((item, index) => {
        if (item.name == this.payeeForm.city) {
          this.bankArr = item.address;
        }
      });
    },
    toChangeRel(val) {
      if (val) {
        post(service.queryPayeeInfo, {
          bodys: {
            contno: this.$route.query.contno || this.objForm.contno,
            relationtocont: val,
            rgtno: this.objForm.rgtno
          }
        })
          .then(res => {
            if (res.data.headers.code === "200") {
              this.objForm.recename = res.data.bodys.recename;
              this.objForm.profession = res.data.bodys.profession;
              this.objForm.annualincome = res.data.bodys.annualincome;
              this.objForm.receidtype = res.data.bodys.receidtype;
              this.objForm.receidno = res.data.bodys.receidno;
              this.objForm.headbankname = res.data.bodys.headbankname;
              this.objForm.province = res.data.bodys.province;
              this.objForm.bankname = res.data.bodys.bankname;
              this.objForm.bankaccno = res.data.bodys.bankaccno;
              this.objForm.receiveaccprovinc = res.data.bodys.receiveaccprovinc;
              this.objForm.receivecity = res.data.bodys.receivecity;
              this.objForm.receivedistrict = res.data.bodys.receivedistrict;
              this.objForm.receiveaddress = res.data.bodys.receiveaddress;
              this.objForm.contactway = res.data.bodys.contactway;
              this.objForm.workunit = res.data.bodys.workunit;
              this.objForm.workaddress = res.data.bodys.workaddress;
              // this.changevince2(this.objForm.receiveaccprovinc)
            }
          })
          .then(() => {
            this.getLingCityCode();
          });
      }
    },
    clearName() {
      this.objForm.recename = "";
      this.objForm.profession = "";
      this.objForm.annualincome = "";
      this.objForm.receidtype = "";
      this.objForm.receidno = "";
      this.objForm.headbankname = "";
      this.objForm.province = "";
      this.objForm.bankname = "";
      this.objForm.bankaccno = "";
      this.objForm.receiveaccprovinc = "";
      this.objForm.receivecity = "";
      this.objForm.receivedistrict = "";
      this.objForm.receiveaddress = "";
      this.objForm.contactway = "";
      this.objForm.workunit = "";
      this.objForm.workaddress = "";
      this.$refs.objForm.clearValidate();
    },
    save2(formName) {
      if (this.objForm.rgtconclusion != "02") {
        post(service.checkPayeeInfo, {
          bodys: {
            contNo: this.objForm.contno,
            relationtocont: this.objForm.relationtocont,
            reasoncode: this.objForm.reasoncode,
            deathDate: this.objForm.deathdate,
            recename: this.objForm.recename,
            profession: this.objForm.profession,
            annualincome: this.objForm.annualincome,
            receidtype: this.objForm.receidtype,
            receidno: this.objForm.receidno,
            headbankname: this.objForm.headbankname,
            province: this.objForm.province,
            bankname: this.objForm.bankname,
            bankaccno: this.objForm.bankaccno,
            receiveaccprovinc: this.objForm.receiveaccprovinc,
            receivecity: this.objForm.receivecity,
            receivedistrict: this.objForm.receivedistrict,
            receiveaddress: this.objForm.receiveaddress,
            contactway: this.objForm.contactway,
            workunit: this.objForm.workunit,
            workaddress: this.objForm.workaddress
          }
        }).then(res => {
          if (res.data.headers.success === true) {
            // this.saveForm();
            this.confirmCase(formName);
          } else {
            this.$message.error(res.data.headers.message);
          }
        });
      } else {
        this.confirmCase(formName);
      }
    },
    noFiling() {
      post(service.noFiling, {
        bodys: {
          rgtno: this.objForm.rgtno,
          rgtconclusion: this.objForm.rgtconclusion
        }
      }).then(res => {});
    },
    // 保存
    saveForm() {
      this.$refs.objForm.clearValidate();
      if (!this.customerno) {
        this.$message("请选择出险人！");
        return false;
      }
      this.isSaveFlag = false;
      this.saveFlag = true;
      if (!this.objForm.contno) {
        this.$message({
          showClose: true,
          message: "保单号为必填项!",
          type: "error"
        });
        return false;
      }

      if (this.objForm.idenddate) {
        // if (time1 > idenddate) {
        let time1 =
          new Date(localStorage.getItem("isDate")).getTime() -
            1 * 24 * 60 * 60 * 1000 ||
          new Date().getTime() - 1 * 24 * 60 * 60 * 1000;
        let idenddate = new Date(this.objForm.idenddate).getTime();
        if (time1 > idenddate) {
          this.$message({
            showClose: true,
            message: "证件有效期止期不能小于当前日期!",
            type: "error"
          });
          return false;
        }
      }
      if (this.objForm.applydate) {
        let time2 =
          new Date(localStorage.getItem("isDate")).getTime() ||
          new Date().getTime();
        let applydate = new Date(ISYMD(this.objForm.applydate)).getTime();
        if (time2 < applydate) {
          this.$message({
            showClose: true,
            message: "申请日期不能大于当前日期!",
            type: "error"
          });
          return false;
        }
      }

      if (this.objForm.accidentdate) {
        let accidentdate = new Date(this.objForm.accidentdate).getTime();
        if (this.objForm.reportdate) {
          let reportdate = new Date(this.objForm.reportdate).getTime();
          if (reportdate < accidentdate) {
            this.$message.error("出险日期不能大于报案日期");
            return false;
          }
        }
        let time3 =
          new Date(localStorage.getItem("isDate")).getTime() ||
          new Date().getTime();
        if (time3 < accidentdate) {
          this.$message({
            showClose: true,
            message: "出险日期不能大于当前系统日期!",
            type: "error"
          });
          return false;
        }
      }
      if (this.objForm.dianosedate && this.objForm.accidentdate) {
        if (this.objForm.dianosedate < this.objForm.accidentdate) {
          this.$message({
            showClose: true,
            message: "确诊日期不能小于出险日期!",
            type: "error"
          });
          return false;
        }
      }
      if (this.objForm.deathdate && this.objForm.accidentdate) {
        if (this.objForm.deathdate < this.objForm.accidentdate) {
          this.$message({
            showClose: true,
            message: "身故日期不能小于出险日期!",
            type: "error"
          });
          return false;
        }
      }
      if (this.objForm.dianosedate) {
        let dianosedate = new Date(this.objForm.dianosedate).getTime();
        let time3 =
          new Date(localStorage.getItem("isDate")).getTime() ||
          new Date().getTime();

        if (time3 < dianosedate) {
          this.$message({
            showClose: true,
            message: "确诊日期不能大于当前系统日期!",
            type: "error"
          });
          return false;
        }
      }
      if (this.objForm.deathdate) {
        let deathdate = new Date(this.objForm.deathdate).getTime();
        if (this.objForm.reportdate) {
          let reportdate1 = new Date(this.objForm.reportdate).getTime();
          if (reportdate1 < deathdate) {
            this.$message.error("身故日期不能大于报案日期");
            return false;
          }
        }
        let time3 =
          new Date(localStorage.getItem("isDate")).getTime() ||
          new Date().getTime();
        if (time3 < deathdate) {
          this.$message({
            showClose: true,
            message: "身故日期不能大于当前系统日期!",
            type: "error"
          });
          return false;
        }
      }
      if (this.objForm.rgtantmobile) {
        var reg = /^\d+$|^\d+[.]?\d+$/;
        if (!reg.test(this.objForm.rgtantmobile)) {
          this.$message.error("申请人电话号码不合法");
          return false;
        } else {
          if (this.objForm.rgtantmobile.substr(0, 1) != 1) {
            this.$message.error("申请人电话号码不合法");
            return false;
          } else {
            if (this.objForm.rgtantmobile.length !== 11) {
              this.$message.error("申请人电话号码不合法");
              return false;
            }
          }
        }
      }
      if (this.objForm.remark) {
        var reg = /^\d+$|^\d+[.]?\d+$/;
        if (!reg.test(this.objForm.remark)) {
          this.$message.error("出险人电话号码不合法");
          return false;
        } else {
          if (this.objForm.remark.substr(0, 1) == 1) {
            if (this.objForm.remark.length != 11) {
              this.$message.error("出险人电话号码不合法");
              return false;
            }
          }
        }
      }
      if (this.objForm.contactway) {
        var reg = /^\d+$|^\d+[.]?\d+$/;
        if (!reg.test(this.objForm.contactway)) {
          this.$message.error("领款人电话号码不合法");
          return false;
        } else {
          if (this.objForm.contactway.substr(0, 1) == 1) {
            if (this.objForm.contactway.length != 11) {
              this.$message.error("领款人电话号码不合法");
              return false;
            }
          }
        }
      }

      // if (this.objForm.receidno) {
      //   const reg1 = /^[0-9a-zA-Z]*$/g;
      //   if (!reg1.test(this.objForm.receidno)) {
      //     this.$message.errreceidnoor("请输入合法的证件号码");
      //     return false;
      //   } else {
      //     if (
      //       this.objForm.receidno.length != 15 &&
      //       this.objForm.receidno.length != 18
      //     ) {
      //       this.$message.error("身份证只能为15位或18位");
      //       return false;
      //     } else {
      //       const reg = /(^[1-9]\d{5}(18|19|([23]\d))\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}$)/;
      //       if (!reg.test(this.objForm.receidno)) {
      //         this.$message.error("请输入合法的的身份证号码");
      //         return false;
      //       }
      //     }
      //   }
      // }
      if (this.objForm.receidtype === "1") {
        if (this.objForm.receidno) {
          const reg1 = /^[0-9a-zA-Z]*$/g;
          if (!reg1.test(this.objForm.receidno)) {
            this.$message.error("请输入合法的证件号码");
            return false;
          } else {
            if (
              this.objForm.receidno.length != 15 &&
              this.objForm.receidno.length != 18
            ) {
              this.$message.error("身份证只能为15位或18位");
              return false;
            } else {
              const reg = /(^[1-9]\d{5}(18|19|([23]\d))\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}$)/;
              if (!reg.test(this.objForm.receidno)) {
                this.$message.error("请输入合法的的身份证号码");
                return false;
              }
            }
          }
        }
      }
      if (this.objForm.receidtype === "2" || this.objForm.receidtype === "8") {
        if (this.objForm.receidno) {
          if (!this.unFlag) {
            let reg = /^[0-9a-zA-Z]*$/g;
            if (!reg.test(this.objForm.receidno)) {
              this.$message.error("请输入合法的证件号码");
              return false;
            } else {
              if (this.objForm.receidno.length < 6) {
                this.$message.error("护照的长度必须大于等于6");
                return false;
              }
            }
          }
        }
      }
      if (
        this.objForm.receidtype != "2" &&
        this.objForm.receidtype !== "8" &&
        this.objForm.receidtype != "1"
      ) {
        if (this.objForm.receidno) {
          const reg = /^[0-9a-zA-Z]*$/g;
          if (!reg.test(this.objForm.receidno)) {
            this.$message.error("请输入合法的证件号码");
            return false;
          }
        }
      }
      if (this.objForm.rgtantidtype === "1" && !this.objForm.relation == "00") {
        if (this.objForm.rgtantidno) {
          if (!this.unFlag) {
            const reg1 = /^[0-9a-zA-Z]*$/g;
            if (!reg1.test(this.objForm.rgtantidno)) {
              this.$message.error("请输入合法的证件号码");
              return false;
            } else {
              if (
                this.objForm.rgtantidno.length != 15 &&
                this.objForm.rgtantidno.length != 18
              ) {
                this.$message.error("身份证只能为15位或18位");
                return false;
              } else {
                const reg = /(^[1-9]\d{5}(18|19|([23]\d))\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}$)/;
                if (!reg.test(this.objForm.rgtantidno)) {
                  this.$message.error("请输入合法的的身份证号码");
                  return false;
                }
              }
            }
          }
        }
      }
      if (
        this.objForm.rgtantidtype === "2" ||
        (this.objForm.rgtantidtype === "8" && !this.objForm.relation == "00")
      ) {
        if (this.objForm.rgtantidno) {
          if (!this.unFlag) {
            let reg = /^[0-9a-zA-Z]*$/g;
            if (!reg.test(this.objForm.rgtantidno)) {
              this.$message.error("请输入合法的证件号码");
              return false;
            } else {
              if (this.objForm.rgtantidno.length < 6) {
                this.$message.error("护照的长度必须大于等于6");
                return false;
              }
            }
          }
        }
      }
      if (
        this.objForm.rgtantidtype != "2" &&
        this.objForm.rgtantidtype !== "8" &&
        this.objForm.rgtantidtype != "1" &&
        this.objForm.relation != "00"
      ) {
        if (this.objForm.rgtantidno) {
          if (!this.unFlag) {
            const reg = /^[0-9a-zA-Z]*$/g;
            if (!reg.test(this.objForm.rgtantidno)) {
              this.$message.error("请输入合法的证件号码");
              return false;
            }
          }
        }
      }
      if (this.objForm.annualincome) {
        var reg = /^\d+$|^\d*\.\d+$/g;
        if (!reg.test(this.objForm.annualincome)) {
          this.$message.error("只能填写数字！");
          return false;
        } else {
          // if (
          //   this.objForm.annualincome.substr(0, 1) === "." ||
          //   this.objForm.annualincome.substr(-1, 1) === "."
          // ) {
          //   this.$message.error("只能填写数字！");
          //   return false;
          // } else {
          var amtreg = /^(\d+)(.\d{0,2})?$/;
          if (!amtreg.test(this.objForm.annualincome)) {
            this.$message.error("最多支持两位小数！");
            return false;
          }
          // }
        }
      }
      if (!this.objForm.rgtno) {
        // 影像归档-校验
        post(service.checkIsexitImageInfo, {
          bodys: {
            contno: this.objForm.contno
          }
        }).then(res => {
          if (res.data.header.code === "200") {
            // 影像归档
            post(service.imageInfoFileToStstem, {
              bodys: {
                contno: this.objForm.contno,
                claimno: this.objForm.rgtno
              }
            }).then(res => {
              if (res.data.header.code === "200") {
              }
            });
            post(service.saveregister, {
              bodys: this.objForm
            }).then(res => {
              if (res.data.headers.code === "200") {
                this.$message.success(res.data.headers.message);
                // this.$refs.medicals.getChangeRgtno()
                this.isSave = true;
                sessionStorage.setItem(
                  "rgtnumber",
                  res.data.bodys.rows[0].rgtno
                );
                // this.objForm.rgtno=res.data.bodys.rows[0].rgtno;
                this.objForm.rgtno = JSON.parse(
                  JSON.stringify(res.data.bodys.rows[0].rgtno)
                );
                if (sessionStorage.getItem("ObjForm")) {
                  this.objForm.rgtno = sessionStorage.getItem("rgtnumber");
                  this.$forceUpdate();
                }

                this.genObj = {
                  rgtno: sessionStorage.getItem("rgtnumber"),
                  customerno: this.$route.query.customerno
                };
                this.bigObj2 = JSON.stringify(this.objForm);

                //   // 定义
                this.bigObj = JSON.stringify(this.objForm);
                this.noFiling();
              }
            });
          } else if (res.data.header.code === "505") {
            var strMes =
              "请确认保单号" +
              this.objForm.contno +
              "下是否扫描了理赔影像信息" +
              "?";
            this.$confirm(strMes, "提示", {
              confirmButtonText: "是",
              cancelButtonText: "否",
              type: "warning",
              center: true
            })
              .then(() => {
                // 影像归档
                post(service.imageInfoFileToStstem, {
                  bodys: {
                    contno: this.objForm.contno,
                    claimno: this.objForm.rgtno
                  }
                }).then(res => {
                  if (res.data.header.code === "200") {
                  }
                });
                post(service.saveregister, {
                  bodys: this.objForm
                }).then(res => {
                  if (res.data.headers.code === "200") {
                    this.$message.success(res.data.headers.message);
                    // this.$refs.medicals.getChangeRgtno()
                    this.isSave = true;
                    sessionStorage.setItem(
                      "rgtnumber",
                      res.data.bodys.rows[0].rgtno
                    );
                    // this.objForm.rgtno=res.data.bodys.rows[0].rgtno;
                    this.objForm.rgtno = JSON.parse(
                      JSON.stringify(res.data.bodys.rows[0].rgtno)
                    );
                    if (sessionStorage.getItem("ObjForm")) {
                      //   this.objForm.rgtno=JSON.parse(
                      //   JSON.stringify(res.data.bodys.rows[0].rgtno)
                      // );
                      // alert(this.objForm.rgtno);
                      this.objForm.rgtno = sessionStorage.getItem("rgtnumber");
                      this.$forceUpdate();
                    }

                    this.genObj = {
                      rgtno: sessionStorage.getItem("rgtnumber"),
                      customerno: this.$route.query.customerno
                    };
                    // this.objForm.accno = JSON.parse(
                    //   JSON.stringify(res.data.bodys.rows[0].accno)
                    // );
                    this.bigObj2 = JSON.stringify(this.objForm);

                    //   // 定义
                    this.bigObj = JSON.stringify(this.objForm);
                    this.noFiling();
                  }
                });
              })
              .catch(() => {
                this.$message({
                  type: "info",
                  message: "请更新保单号！"
                });
              });
          } else {
            this.$message.error(res.data.hearders.message);
          }
        });
      } else {
        post(service.saveregister, {
          bodys: this.objForm
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.$message.success(res.data.headers.message);
            // this.$refs.medicals.getChangeRgtno()
            this.isSave = true;
            sessionStorage.setItem("rgtnumber", res.data.bodys.rows[0].rgtno);
            // this.objForm.rgtno=res.data.bodys.rows[0].rgtno;
            this.objForm.rgtno = JSON.parse(
              JSON.stringify(res.data.bodys.rows[0].rgtno)
            );
            if (sessionStorage.getItem("ObjForm")) {
              this.objForm.rgtno = sessionStorage.getItem("rgtnumber");
              this.$forceUpdate();
            }

            this.genObj = {
              rgtno: sessionStorage.getItem("rgtnumber"),
              customerno: this.$route.query.customerno
            };
            // this.objForm.accno = JSON.parse(
            //   JSON.stringify(res.data.bodys.rows[0].accno)
            // );
            this.bigObj2 = JSON.stringify(this.objForm);

            //   // 定义
            this.bigObj = JSON.stringify(this.objForm);
            this.noFiling();
          }
        });
        // 影像归档
        post(service.imageInfoFileToStstem, {
          bodys: {
            contno: this.objForm.contno,
            claimno: this.objForm.rgtno
          }
        }).then(res => {
          if (res.data.header.code === "200") {
          }
        });
      }

      // }
      // });
    },
    // 立案确认
    disConfirmCase() {
      if (localStorage.getItem("registerflag") == "0") {
        return true;
      }
      if (this.flagBtn) {
        return true;
      }
    },
    confirmCase(formName) {
      let _this = this;
      this.$refs.objForm.validate();
      this.confirm = false;
      if (_this.objForm.norgtreason != "05") {
        if (!_this.customerno) {
          _this.$message("请选择出险人！");
          return false;
        }
      }
      if (_this.objForm.rgtno) {
        if (_this.objForm.norgtreason != "05") {
          if (_this.objForm.idenddate) {
            let time1 =
              new Date(localStorage.getItem("isDate")).getTime() -
                1 * 24 * 60 * 60 * 1000 ||
              new Date().getTime() - 1 * 24 * 60 * 60 * 1000;
            let idenddate = new Date(_this.objForm.idenddate).getTime();
            if (time1 > idenddate) {
              _this.$message({
                showClose: true,
                message: "证件有效期止期不能小于当前日期!",
                type: "error"
              });
              return false;
            }
          }
          if (_this.objForm.applydate) {
            let time2 =
              new Date(localStorage.getItem("isDate")).getTime() ||
              new Date().getTime();
            let applydate = new Date(ISYMD(_this.objForm.applydate)).getTime();
            if (time2 < applydate) {
              _this.$message({
                showClose: true,
                message: "申请日期不能大于当前日期!",
                type: "error"
              });
              return false;
            }
          }
          if (_this.objForm.accidentdate) {
            let time3 =
              new Date(localStorage.getItem("isDate")).getTime() ||
              new Date().getTime();
            let accidentdate = new Date(_this.objForm.accidentdate).getTime();
            if (time3 < accidentdate) {
              _this.$message({
                showClose: true,
                message: "出险日期不能大于当前系统日期!",
                type: "error"
              });
              return false;
            }
          }
          if (_this.objForm.dianosedate && _this.objForm.accidentdate) {
            if (_this.objForm.dianosedate < _this.objForm.accidentdate) {
              _this.$message({
                showClose: true,
                message: "确诊日期不能小于出险日期!",
                type: "error"
              });
              return false;
            }
          }
          if (_this.objForm.deathdate && _this.objForm.accidentdate) {
            if (_this.objForm.deathdate < _this.objForm.accidentdate) {
              _this.$message({
                showClose: true,
                message: "身故日期不能小于出险日期!",
                type: "error"
              });
              return false;
            }
          }
          if (_this.objForm.dianosedate) {
            let time3 =
              new Date(localStorage.getItem("isDate")).getTime() ||
              new Date().getTime();
            let dianosedate = new Date(_this.objForm.dianosedate).getTime();
            if (time3 < dianosedate) {
              _this.$message({
                showClose: true,
                message: "确诊日期不能大于当前系统日期!",
                type: "error"
              });
              return false;
            }
          }
          if (_this.objForm.deathdate) {
            let time3 =
              new Date(localStorage.getItem("isDate")).getTime() ||
              new Date().getTime();
            let deathdate = new Date(_this.objForm.deathdate).getTime();
            if (time3 < deathdate) {
              _this.$message({
                showClose: true,
                message: "身故日期不能大于当前系统日期!",
                type: "error"
              });
              return false;
            }
          }
        }
        _this.$refs[formName].validate(valid => {
          if (!valid && _this.objForm.norgtreason != "05") {
            _this.$message.error("页面信息填写不完整！");
            return false;
          } else {
            if (!_this.$route.query.rgtno) {
              if (_this.bigObj2 == JSON.stringify(_this.objForm)) {
                post(service.registerconfirm, {
                  bodys: {
                    customerno: _this.customerno,
                    rgtno: _this.objForm.rgtno,
                    mngcom: localStorage.getItem("comCode"),
                    operator: localStorage.getItem("userCode")
                  }
                }).then(res => {
                  if (res.data.headers.code === "200") {
                    _this.$message({
                      message: res.data.headers.message,
                      type: "success"
                    });
                    _this.$router.push({ name: "TaskList" });
                  } else {
                    _this.$message({
                      message: res.data.headers.message,
                      type: "warning"
                    });
                  }
                });
              } else {
                if (this.bigObj2 !== JSON.stringify(this.objForm)) {
                  this.$message.error("页面信息未保存");
                } else {
                  post(service.registerconfirm, {
                    bodys: {
                      customerno: _this.customerno,
                      rgtno: _this.objForm.rgtno,
                      mngcom: localStorage.getItem("comCode"),
                      operator: localStorage.getItem("userCode")
                    }
                  }).then(res => {
                    if (res.data.headers.code === "200") {
                      _this.$message({
                        message: res.data.headers.message,
                        type: "success"
                      });
                      _this.$router.push({ name: "TaskList" });
                    } else {
                      _this.$message({
                        message: res.data.headers.message,
                        type: "warning"
                      });
                    }
                  });
                }
              }
            }

            if (_this.$route.query.rgtno) {
              if (_this.bigObj == JSON.stringify(_this.objForm)) {
                post(service.registerconfirm, {
                  bodys: {
                    customerno: _this.customerno,
                    rgtno: _this.objForm.rgtno,
                    mngcom: localStorage.getItem("comCode"),
                    operator: localStorage.getItem("userCode")
                  }
                }).then(res => {
                  if (res.data.headers.code === "200") {
                    _this.$message({
                      message: res.data.headers.message,
                      type: "success"
                    });
                    _this.$router.push({ name: "TaskList" });
                  } else {
                    _this.$message({
                      message: res.data.headers.message,
                      type: "warning"
                    });
                  }
                });
              } else {
                if (this.bigObj !== JSON.stringify(this.objForm)) {
                  this.$message.error("页面信息未保存");
                } else {
                  post(service.registerconfirm, {
                    bodys: {
                      customerno: _this.customerno,
                      rgtno: _this.objForm.rgtno,
                      mngcom: localStorage.getItem("comCode"),
                      operator: localStorage.getItem("userCode")
                    }
                  }).then(res => {
                    if (res.data.headers.code === "200") {
                      _this.$message({
                        message: res.data.headers.message,
                        type: "success"
                      });
                      _this.$router.push({ name: "TaskList" });
                    } else {
                      _this.$message({
                        message: res.data.headers.message,
                        type: "warning"
                      });
                    }
                  });
                }
              }
            }
          }
        });
      } else {
        _this.$message("确认前请先进行立案保存！");
        return false;
      }
    },
    getRiskPer() {
      this.abc = true;
      if (this.objForm.relation === "01") {
        this.unFlag = false;
        if (this.objForm.rgtantname === this.objForm.occname) {
          this.objForm.rgtantname = "";
          this.objForm.rgtantidtype = "";
          this.objForm.rgtantidno = "";
          this.objForm.rgtantmobile = "";
          this.objForm.rgtantprovince = "";
          this.objForm.rgtantcity = "";
          this.objForm.rgtantcounty = "";
          this.objForm.rgtantaddress = "";
          this.objForm.postcode = "";
        }
        this.unCheck = false;
      } else if (this.objForm.relation === "02") {
        this.unFlag = false;
        if (this.objForm.rgtantname === this.objForm.occname) {
          this.objForm.rgtantname = "";
          this.objForm.rgtantidtype = "";
          this.objForm.rgtantidno = "";
          this.objForm.rgtantmobile = "";
          this.objForm.rgtantprovince = "";
          this.objForm.rgtantcity = "";
          this.objForm.rgtantcounty = "";
          this.objForm.rgtantaddress = "";
          this.objForm.postcode = "";
        }
      } else if (this.objForm.relation === "03") {
        this.unFlag = false;
        if (this.objForm.rgtantname === this.objForm.occname) {
          this.objForm.rgtantname = "";
          this.objForm.rgtantidtype = "";
          this.objForm.rgtantidno = "";
          this.objForm.rgtantmobile = "";
          this.objForm.rgtantprovince = "";
          this.objForm.rgtantcity = "";
          this.objForm.rgtantcounty = "";
          this.objForm.rgtantaddress = "";
          this.objForm.postcode = "";
        }
      } else if (this.objForm.relation === "99") {
        this.unFlag = false;
        if (this.objForm.rgtantname === this.objForm.occname) {
          this.objForm.rgtantname = "";
          this.objForm.rgtantidtype = "";
          this.objForm.rgtantidno = "";
          this.objForm.rgtantmobile = "";
          this.objForm.rgtantprovince = "";
          this.objForm.rgtantcity = "";
          this.objForm.rgtantcounty = "";
          this.objForm.rgtantaddress = "";
          this.objForm.postcode = "";
        }
      }
    },
    toMarketerSelection() {
      this.confirm = true;
      localStorage.setItem("confirm", this.confirm);
      this.btn = true;
      sessionStorage.setItem("ObjForm", JSON.stringify(this.objForm));
      this.objForm = JSON.parse(sessionStorage.getItem("ObjForm"));

      this.$router.push({
        name: "MarketerSelection",
        query: { customerno: this.customerno, rgtno: this.$route.query.rgtno }
      });
    },
    toRiskList() {
      this.$router.push({ name: "RiskList" });
    },
    // 生成照会
    getPhotoState() {
      if (localStorage.getItem("notesignflag") == "0") {
        return true;
      }
      if (this.flagBtn) {
        return true;
      }
    },
    toPhoto() {
      if (this.$route.query.rgtno) {
        if (!this.objForm.contno) {
          this.$message.error("请先保存页面信息！");
          return;
        }
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              this.$router.push({
                name: "InitiatingPhoto",
                query: {
                  clmno: this.objForm.rgtno,
                  customerno:
                    this.$route.query.customerno ||
                    sessionStorage.getItem("customerno")
                }
              });
            })
            .catch(() => {});
        } else {
          this.$router.push({
            name: "InitiatingPhoto",
            query: {
              clmno: this.objForm.rgtno,
              customerno:
                this.$route.query.customerno ||
                sessionStorage.getItem("customerno")
            }
          });
        }
      } else {
        if (this.bigObj !== JSON.stringify(this.objForm)) {
          this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
            confirmButtonText: "是",
            cancelButtonText: "否",
            cancelButtonClass: "cancelButton",
            confirmButtonClass: "confirmButton",
            type: "warning",
            center: true
          })
            .then(() => {
              this.$router.push({
                name: "InitiatingPhoto",
                query: {
                  clmno: this.objForm.rgtno,
                  customerno:
                    this.$route.query.customerno ||
                    sessionStorage.getItem("customerno")
                }
              });
              sessionStorage.removeItem("ObjForm");
            })
            .catch(() => {});
        } else {
          if (!this.objForm.rgtno) {
            this.$message.error("请先保存页面信息！");
            sessionStorage.removeItem("ObjForm");
          } else {
            this.$router.push({
              name: "InitiatingPhoto",
              query: {
                clmno: this.objForm.rgtno,
                customerno:
                  this.$route.query.customerno ||
                  sessionStorage.getItem("customerno")
              }
            });
            sessionStorage.removeItem("ObjForm");
          }
        }
      }
    },
    initTableMes() {
      // var _this = this;
      // 出险人信息
      post(service.querycustomer1, {
        bodys: {
          customerno: this.customerno,
          mngcom: localStorage.getItem("comCode"),
          operator: localStorage.getItem("userCode")
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.objForm.rgtno = res.data.bodys.rows[0].rgtno;
          this.objForm.occname = res.data.bodys.rows[0].occname;
          this.objForm.occidtype = res.data.bodys.rows[0].occidtype;
          this.objForm.occidno = res.data.bodys.rows[0].occidno;
          this.objForm.sex = res.data.bodys.rows[0].sex;
          this.objForm.age = res.data.bodys.rows[0].age;
          this.objForm.remark = res.data.bodys.rows[0].remark;
          this.objForm.homepostcode = res.data.bodys.rows[0].homepostcode;
          this.objForm.homeprovince = res.data.bodys.rows[0].homeprovince;
          this.objForm.homecity = res.data.bodys.rows[0].homecity;
          this.objForm.homecommunity = res.data.bodys.rows[0].homecommunity;
          this.objForm.homecounty = res.data.bodys.rows[0].homecounty;
          this.Oaccprovince = res.data.bodys.rows[0].homeprovince;
          this.Oacccity = res.data.bodys.rows[0].homecity;
          this.Oacccounty = res.data.bodys.rows[0].homecounty;
          this.Oaccaddress = res.data.bodys.rows[0].homecommunity;
          this.objForm.idenddate = res.data.bodys.rows[0].idenddate;
          this.getCityCode();
          this.getcountyCode();
          if (sessionStorage.getItem("ObjForm")) {
            this.objForm.remark = JSON.parse(
              sessionStorage.getItem("ObjForm")
            ).remark;
          }
          if (sessionStorage.getItem("ObjForm")) {
            this.objForm.idenddate = JSON.parse(
              sessionStorage.getItem("ObjForm")
            ).idenddate;
          }
        }
        // 定义
        this.bigObj = JSON.stringify(this.objForm);
      });
    },
    handleClick(tab, event) {
      this.isbox = true;
      if (tab.index === "0") {
        this.style1 = "margin: 0 0 0 15px";
      }
      if (tab.index === "1") {
        this.style1 = "margin: 0 0 0 141px";
        // this.style1="transform: translateX(100%+15px)"
      }
      if (tab.index === "2") {
        this.style1 = "margin: 0 0 0 270px";
      }
      // if (tab.index === "3") {
      //   this.style1 = "margin: 0 0 0 333px";
      // }
    },
    jump(index) {
      if (index == "top") {
        document.getElementById(0).scrollIntoView();
        this.$store.dispatch("titleshow", "");
      } else {
        this.activeStep = index;
        this.$store.dispatch("titleshow", "true");
        setTimeout(() => {
          if (this.$store.getters.titleclose == "true") {
            document.getElementById(index).scrollIntoView();
          }
        }, 300);
      }
    },
    // 就诊医院下拉框请求下一页数据
    loadmore() {
      this.pageData.startPage += 100;
      this.pageData.endPage += 100;
      post(service.getHospital, {
        pagestart: this.pageData.startPage,
        pageend: this.pageData.endPage,
        likename: this.hosName || ""
      }).then(res => {
        this.hospitalLists = res.data.bodys;
      });
    },
    // 领款人信息 授权银行请求下一页数据
    loadmore3() {
      this.bankFormData.pagestart += 100;
      post(service.queryBank, {
        pagestart: this.bankFormData.pagestart,
        pageend: this.bankFormData.pageend,
        likename: this.objForm.headbankname
      }).then(res => {
        // this.hospitalLists = res.data.bodys;
        this.tBankList = [...this.tBankList, ...res.data.bodys];
      });
    },
    loadmore4() {
      this.bankFormAddress.pagestart += 100;
      post(service.queryBankLocation, this.bankFormAddress).then(res => {
        // this.hospitalLists = res.data.bodys;
        this.bankAddressList = [...this.bankAddressList, ...res.data.bodys];
      });
    },
    loadmore1() {
      this.formData.pagestart++;
      this.getRiskRes(this.formData);
    },
    loadmore2() {
      // this.formData1.pagestart++;
      this.formData1.pagestart += 100;
      this.formData1.pageend += 100;
      this.getCupation(this.formData1);
    },
    // 就诊医院下拉框值改变获取就诊医院备注
    changeHospital(item) {
      post(service.getHospital, {
        pagestart: 0,
        pageend: 100,
        likename: item
      }).then(res => {
        if (res.data.bodys[0].remark) {
          this.remarkContents = res.data.bodys[0].remark;
        } else {
          this.remarkContents = "";
        }
      });
    },
    // 就诊医院下拉框失焦 清空hosName(解决搜索likename固定为上一个likename问题)
    clHos() {
      this.hosName = "";
    },
    // 就诊医院下拉框触焦请求数据
    clearHospital() {
      this.pageData.startPage = 0;
      this.pageData.endPage = 100;
      post(service.getHospital, {
        pagestart: this.pageData.startPage,
        pageend: this.pageData.endPage,
        likename: ""
      }).then(res => {
        this.hospitalLists = res.data.bodys;
      });
    },
    // 就诊医院下拉框（可搜索）防抖执行
    waitFunc(func, wait) {
      let timer = 0;
      return function(...args) {
        if (timer) clearTimeout(timer);
        timer = setTimeout(() => {
          func.apply(this, args);
        }, wait);
      };
    },
    // 就诊医院下拉框（可搜索）
    filtered(val) {
      this.pageData.startPage = 0;
      this.pageData.endPage = 100;
      this.hosName = val;
      if (val != "") {
        // this.getHospitals(val);
        post(service.getHospital, {
          pagestart: this.pageData.startPage,
          pageend: this.pageData.endPage,
          likename: val
        }).then(res => {
          this.hospitalLists = res.data.bodys;
        });
      }
    },
    filtered3(val) {
      this.objForm.startPage = 0;
      this.objForm.endPage = 100;
      this.objForm.headbankname = val;
      if (val != "") {
        this.getHeadBank(val);
      }
    },
    getRiskRes(formData) {
      post(service.ldaccresult, {
        bodys: formData
      }).then(res => {
        const _res = res.data.bodys;
        this.riskResultList = [...this.riskResultList, ..._res];
      });
    },
    // 初始化职业
    getCupationss() {
      setTimeout(() => {
        post(service.occupation, {
          // this.objForm.profession
          likename: "",
          pageend: 800,
          pagestart: 0
        }).then(res => {
          const _res1 = res.data.bodys;
          this.workList = [...this.workList, ..._res1];
        });
      }, 500);
    },
    // ==========================================================
    queryTranNo() {
      post(service.queryTranNo, {
        bodys: {
          rgtno: this.$route.query.rgtno
        }
      })
        .then(res => {
          if (res.data.bodys) {
            this.rgtobj = res.data.bodys.rgtobj;
            this.rptno = res.data.bodys.rptno || "";
            if (res.data.bodys.rgtclass == "") {
              this.rgtclass = "柜面渠道";
            } else if (res.data.bodys.rgtclass == "02") {
              this.rgtclass = "柜面渠道";
            } else if (res.data.bodys.rgtclass == "01") {
              this.rgtclass = "微信渠道";
            } else if (res.data.bodys.rgtclass == "03") {
              this.rgtclass = "电话中心渠道";
            }
          }
        })
        .then(() => {
          this.reportInformation();
        });
    },
    // 报案转立案申请信息
    reportInformation() {
      // if (this.rgtclass == ("电话中心渠道" || "03")) {
      post(service.reportInformation, {
        bodys: {
          rptno: this.rptno || ""
        }
      }).then(res => {
        this.objForm.reportname = res.data.bodys.reportname;
        this.objForm.reportdate = res.data.bodys.reportdate;
        this.objForm.reportmobile = res.data.bodys.reportmobile;
        this.objForm.relatoinsure = res.data.bodys.relatoinsure;
        this.objForm.reportchannel = res.data.bodys.reportchannel;
        if (this.objForm.reportchannel == "01") {
          this.objForm.reportchannel = "微信";
        } else if (this.objForm.reportchannel == "02") {
          this.objForm.reportchannel = "柜面";
        } else if (this.objForm.reportchannel == "03") {
          this.objForm.reportchannel = "电话中心";
        }
      });
      // }
    },
    // 点击医疗单证录入
    getMedical() {
      this.rgtno = this.objForm.rgtno;
      // if (this.$route.query.rgtno) {
      var obj = {
        rgtno: this.objForm.rgtno,
        customerno: this.$route.query.customerno,
        hospitalcode: this.objForm.hospitalname,
        remark: ""
      };
      console.log("obj", obj);
      localStorage.setItem("objData", JSON.stringify(obj));
      if (this.bigObj !== JSON.stringify(this.objForm)) {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            if (!this.objForm.accidentdate) {
              this.$message.error("请录入出险日期！");
              return;
            }
            this.isShowhospital = true;
            // if (this.rgtno && this.customerno) {
            //   this.getCfee();
            // }
            // this.getHospitalsz();
            // this.getHospitalsz1();
          })
          .catch(() => {});
      } else {
        if (!this.objForm.accidentdate) {
          this.$message.error("请录入出险日期！");
          return;
        }
        this.isShowhospital = true;
        // if (this.rgtno && this.customerno) {
        //   this.getCfee();
        // }
        // this.getHospitalsz();
        // this.getHospitalsz1();
      }
    }
  }
};
</script>
<style lang="less" scoped>
.isNewdate{
  /deep/.el-form-item__label{
    width: 100px!important;
  }
  /deep/.el-form-item__content{
    margin-left: 100px!important;
  }
}
.mels {
  /deep/ .el-tabs__nav-scroll {
    width: 350px;
    margin: 0 auto;
  }
  /deep/ .el-tabs__item {
    font-size: 20px;
  }
}

.diamh {
  /deep/.el-date-editor.el-input {
    width: 100% !important;
  }
}
.twoTitle {
  border-left: 2px solid #409eff;
  padding-left: 10px;
  font-size: 16px;
}
.generalMedical {
  .el-select,
  .generalMedical .el-input {
    width: 100% !important;
  }
  /deep/.el-input-number.is-controls-right .el-input__inner {
    width: 100% !important;
  }
  /deep/ .el-input-number .el-input {
    width: auto !important;
  }
  /deep/ .el-input-number--medium {
    width: auto !important;
  }
}
/deep/.el-dialog__header {
  padding: 0;
}
.jiuzhens {
  position: absolute;
  top: 0;
  left: 86%;
  border: none;
  padding: 10px 0px;
}
.jiuzhens:focus,
.jiuzhens:hover {
  color: none;
  background: none;
}
.addFiling {
  margin: 10px;
  // margin-right: 0;
  margin-bottom: 0;
  box-sizing: border-box;

  .left {
    width: 90%;
    float: left;
  }

  .right {
    padding: 0 5px;
    text-align: center;
    float: right;
    width: 7%;
    border: 1px solid #cccccc;
    border-radius: 100px;
    background: #fff;
    position: absolute;
    right: 1%;
    margin-top: 20px;
    p {
      padding-bottom: 8px;
    }
    p:first-of-type {
      margin-top: 45px;
    }
    p:last-of-type {
      margin-bottom: 100px;
    }
    .downArrow {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
    }
    .upArrow {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 10px;
    }

    .top {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 30px;
    }

    .btn_text {
      border-bottom: 1px dotted #cccccc;
    }
  }

  .header {
    background-color: #0673ff;
    height: 50px;
    line-height: 50px;
    border-radius: 25px 25px 0 0;
    padding: 0 30px;
    overflow: hidden;
    color: #fff;
    font-size: 20px;
    font-family: Source Han Sans CN;
    i {
      font-size: 30px;
      float: right;
      margin-top: 19px;
    }
  }
  .work_queue {
    position: relative;
    span {
      display: inline-block;
      background-color: #0673ff;
      color: #fff;
      padding: 0 15px;
      height: 33px;
      line-height: 33px;
      border-radius: 10px 10px 0 0;
    }
    .box {
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 10px solid #0673ff;
      position: absolute;
      top: 33px;
      left: 15px;
      z-index: 999;
    }
  }
  .block {
    background-color: #fff;
    height: 80px;
    padding-top: 27px;
    box-sizing: border-box;
  }
  .el-collapse {
    margin-bottom: 20px;
  }
  .box {
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #0673ff;
    position: absolute;
    z-index: 999;
  }
  .botton_box {
    position: fixed;
    bottom: -6.5px;
    width: 74%;
    left: 50%;
    transform: translateX(-50%);
    height: 74px;
    line-height: 74px;
    background-image: url("../../assets/images/filing/footer2.png");
    background-size: 100% 60px;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 1000;
  }
}
</style>
<style lang="less">
.addFiling {
  .el-row {
    &:first-child {
      padding-top: 20px;
    }
    &:last-child {
      padding-top: 0;
      margin-bottom: 0;
    }
    padding-top: 0px;
  }
  .grid-content {
    border-radius: 4px;
    min-height: 36px;
    .report {
      display: inline-block;
      width: 180px;
      height: 33px;
      text-align: center;
      line-height: 33px;
      background-color: #0673ff;
      color: #fff;
      font-size: 12px;
      font-family: Source Han Sans CN;
      border-radius: 25px;
    }
  }
  .row-bg {
    padding: 10px 0;
    background-color: #f9fafc;
  }
}
.addFiling .place .el-input__inner {
  width: 100%;
}

.addFiling {
  .el-input {
    width: 85%;
  }
  .el-select {
    width: 85%;
    .el-input {
      width: 100%;
    }
  }
  .place {
    display: flex;
    .el-form-item__error {
      white-space: nowrap;
    }
    .el-select {
      width: 100%;
    }
    .risk_address {
      .el-form-item__content {
        margin-left: 8px !important;
      }
    }
    .place_des {
      .el-input__inner {
        width: 230px;
      }
    }
  }
  .bank {
    display: flex;
    .bank_style {
      .el-form-item__content {
        margin-left: 8px !important;
      }
    }
    .el-select {
      width: 180px;
    }
  }
  .apply_address {
    .el-input__inner {
      width: 100%;
    }
    display: flex;
    .full {
      .el-input {
        width: 220px;
      }
    }
    .el-select {
      width: 22%;
    }
  }
  .address {
    .el-input__inner {
      width: 100%;
    }
    display: flex;
    .el-select {
      width: 100%;
    }
    .el-form-item__error {
      white-space: nowrap;
    }
    .address_style {
      .el-form-item__content {
        margin-left: 30px !important;
      }
    }
    // .el-input {
    //   width: 150px;
    // }
    .full {
      .el-input {
        width: 210px;
      }
    }
  }
  .special {
    .el-input__inner {
      text-transform: uppercase;
    }
  }
  // 备注表格
  .leftItem .el-table .cell {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }
  .reviewInformation .el-textarea .el-input__count {
    // visibility: hidden;
    top: 2px;
  }
  //  End
  .el-collapse-item__arrow {
    display: none;
  }

  .el-collapse-item__header {
    background-color: #0673ff;
    height: 30px;
    line-height: 30px;
    border-radius: 10px 10px 0 0;
    padding: 0 15px;
    overflow: hidden;
    color: #fff;
    font-size: 16px;
    font-family: Source Han Sans CN;
  }

  .el-collapse-item__content {
    padding-bottom: 0px;
  }
}
</style>
<style lang="less">
.addFiling .el-tabs--card > .el-tabs__header .el-tabs__item.is-active {
  background-color: #0673ff;
  border-bottom: none;
  border-radius: 8px 8px 0 0;
  color: #fff;
}

.addFiling .el-tabs__header {
  margin: 0;
}

.addFiling .el-tabs--card > .el-tabs__header .el-tabs__item {
  background-color: #fff;
  color: #999999;
}
.addFiling .el-collapse-item__wrap {
  padding: 0 10px;
}
.confirmButton {
  padding: 9px 28px;
}
.cancelButton {
  padding: 9px 28px;
}
// .addFiling .el-input__inner{
//   width: 85%;
// }
.addFiling .bank .el-input__inner {
  width: 100%;
}
.addFiling .el-date-editor.el-input,
.el-date-editor.el-input__inner {
  width: 85% !important;
}
.addFiling .el-checkbox__inner {
  z-index: 0;
}
.addFiling .el-tabs--card > .el-tabs__header .el-tabs__nav {
  border: none;
}

.addFiling {
  .place {
    .select {
      width: 200px;
    }
    .el-input__prefix,
    .el-input__suffix {
      right: 1px;
    }
  }
  .apply_address {
    .el-input__prefix,
    .el-input__suffix {
      right: 1px;
    }
  }
  .address {
    .el-input__prefix,
    .el-input__suffix {
      right: 1px;
    }
  }
  .bank {
    .el-select {
      width: 100%;
    }
    .el-input__prefix,
    .el-input__suffix {
      right: 1px;
    }
  }
  .el-cascader {
    .el-input__prefix,
    .el-input__suffix {
      right: 1px;
    }
  }
}
.addFiling .el-cascader {
  width: 85%;
  .el-input {
    width: 100%;
  }
}
.addFiling .el-select .el-input__inner {
  width: 100%;
}
.addFiling .el-cascader .el-input__inner {
  width: 100%;
}
.addFiling .el-button.is-round {
  padding: 7px 13px;
}
.addFiling .occuprptStyle .el-form-item__label {
  line-height: 20px;
}
.addFiling .el-tabs__item {
  height: 33px;
  line-height: 33px;
}
.addFiling {
  .reasoncodeSty {
    .el-form-item__error {
      top: 72%;
    }
  }
}
</style>
