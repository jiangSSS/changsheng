<template>
  <div class="reviewInformation" id="reviewInformation" ref="reviewInformation">
    <div class="left">
      <el-collapse v-model="activeName">
        <el-collapse-item name="1" id="0">
          <template slot="title">
            出险人信息
            <i
              class="header-icon el-icon-caret-bottom"
              style="margin: 0 8px 0 auto;font-size: 30px;"
            ></i>
          </template>
          <el-form ref="form" :model="form" v-model="labelPosition" label-width="140px">
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人姓名">
                    <el-input v-model="dangerperInfor.name" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人证件类型">
                    <el-select
                      v-model="dangerperInfor.idtype"
                      placeholder="请选择"
                      disabled
                      class="disabledinput"
                    >
                      <el-option
                        v-for="item in cardTypeList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人证件号码">
                    <el-input v-model="dangerperInfor.idno" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="性别">
                    <el-select
                      v-model="dangerperInfor.sex"
                      clearable
                      placeholder="请选择"
                      disabled
                      class="disabledinput"
                    >
                      <el-option
                        v-for="item in sexList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出险人年龄">
                    <el-input v-model="dangerperInfor.age" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="电话号码">
                    <el-input v-model="dangerperInfor.phone" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="证件有效止期">
                    <el-input v-model="dangerperInfor.enddate" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="来源渠道">
                    <el-input v-model="rgtclass" disabled maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-form>
        </el-collapse-item>
      </el-collapse>
      <!-- 出险人信息 -->

      <div id="1"></div>
      <div id="2"></div>
      <div id="3"></div>
      <el-tabs v-model="active" type="card" @tab-click="handleClick1" style="margin-bottom:20px;">
        <div :style="style2" :class="isbox ? 'box' : ''"></div>

        <el-tab-pane label="保单信息查询" name="first">
          <el-table
            :data="policyArr1.slice((currentPage1-1)*pagesize,currentPage1*pagesize)"
            style="width: 100%"
            :row-key="getRowKeys"
            :expand-row-keys="expands"
            @expand-change="zydescription"
          >
            <el-table-column type="expand">
              <!-- <template slot-scope="props"> -->
              <template>
                <el-table
                  :data="policydetail"
                  class="sonTable"
                  border
                  style="width: 100%"
                  :header-cell-style="{background:'#F7FAFF'}"
                  :row-style="{background:'#F7FAFF'}"
                >
                  <el-table-column type="index" width="50" align="center" label="序号"></el-table-column>
                  <el-table-column prop="riskname" label="险种名称" align="center" width="150"></el-table-column>
                  <el-table-column prop="riskcode" label="险种代码" align="center" width="100"></el-table-column>
                  <el-table-column prop="amnt" label="保险金额" align="center" width="100"></el-table-column>
                  <el-table-column prop="uwstate" label="险种状态" align="center" width="100"></el-table-column>
                  <el-table-column prop="cvalidate" label="生效日期" align="center" width="100"></el-table-column>
                  <el-table-column prop="prem" label="应交保费" align="center" width="100"></el-table-column>
                  <el-table-column prop="payenddate" label="实际缴费期满日" align="center" width="100"></el-table-column>
                  <el-table-column prop="enddate" label="实际期满日" align="center" width="100"></el-table-column>
                  <el-table-column prop="uwflag" label="核保决定" align="center" width="100"></el-table-column>
                </el-table>
              </template>
            </el-table-column>
            <el-table-column
              label="序号"
              type="index"
              align="center"
              width="50"
              :index="indexMethod1"
            ></el-table-column>
            <el-table-column prop="contno" label="保单号" align="center" width="120"></el-table-column>
            <el-table-column prop="appntname" label="投保人" align="center" width="120"></el-table-column>
            <el-table-column prop="insuredname" label="被保险人" align="center" width="130"></el-table-column>
            <el-table-column prop="riskname" label="主险名称" align="center" width="130"></el-table-column>
            <el-table-column prop="polstate" label="保单状态" align="center" width="100"></el-table-column>
            <el-table-column prop="cvalidate" label="生效日期" align="center" width="100"></el-table-column>
            <el-table-column prop="payenddate" label="实际缴费期满日" align="center" width="150"></el-table-column>
            <el-table-column prop="enddate" label="实际期满日" align="center" width="100"></el-table-column>
            <el-table-column prop="claimflag" label="挂起标志" align="center" width="100"></el-table-column>
            <el-table-column prop="suspension" label="挂起原因" align="center" width="100"></el-table-column>
            <el-table-column prop="appflag" label="团个标志" align="center" width="100"></el-table-column>
            <el-table-column prop="salechnl" label="渠道" align="center" width="100"></el-table-column>
          </el-table>
          <el-pagination
            background
            @size-change="currentPage1"
            @current-change="currentChange1(currentPage1)"
            :current-page.sync="currentPage1"
            :page-size="10"
            layout="prev, pager, next, jumper"
            :total="policyArr1.length"
          ></el-pagination>
        </el-tab-pane>

        <el-tab-pane label="既往赔案查询" name="second">
          <el-table
            style="width: 100%"
            :data="policyArr2.slice((currentPage2-1)*pagesize,currentPage2*pagesize)"
          >
            <el-table-column type="index" width="50" label="序号" :index="indexMethod2"></el-table-column>
            <el-table-column prop="accno" label="事件号" align="center" width="140"></el-table-column>
            <el-table-column prop="rgtno" label="理赔号" align="center" width="140"></el-table-column>
            <el-table-column prop="customername" label="出险人" align="center" width="140"></el-table-column>
            <el-table-column prop="rgtantname" label="申请人" align="center" width="140"></el-table-column>
            <el-table-column prop="accstartdate" label="出险日期" align="center" width="120"></el-table-column>
            <el-table-column prop="outtype" label="出险类型" align="center" width="100"></el-table-column>
            <el-table-column prop="accidentreason" label="事故原因" align="center" width="140"></el-table-column>
            <el-table-column prop="inqconclusion" label="是否调查" align="center" width="80"></el-table-column>
            <el-table-column prop="disease" label="诊断" align="center" width="140"></el-table-column>
            <el-table-column prop="applydate" label="申请日期" align="center" width="120"></el-table-column>
            <el-table-column prop="endcasedate" label="结案日期" align="center" width="120"></el-table-column>
            <el-table-column prop="rgtstate" label="案件状态" align="center" width="100"></el-table-column>
            <el-table-column prop="claimconclusion" label="理赔结论" align="center" width="140"></el-table-column>
            <el-table-column prop="realpay" label="赔付金额" align="center" width="100"></el-table-column>
            <el-table-column label="理赔进展" align="center" width="80">
              <template slot-scope="scope" v-if="scope.row.remarks">
                <!-- <el-popover placement="top-start" trigger="hover" width="200">
                    <div>{{scope.row.remarks}}</div>
                    <template slot="reference" style="border:none;">
                      <img
                        src="../../assets/images/filing/warn.png"
                        alt
                        style="width:20px;height:20px"
                      />
                    </template>
                </el-popover>-->
                <el-popover
                  placement="top-start"
                  popper-class="lipeiPopover"
                  trigger="hover"
                  width="600"
                >
                  <el-timeline>
                    <el-timeline-item
                      v-for="(items,index) in scope.row.remarks"
                      :key="index"
                      placement="top"
                      :timestamp="items.transdate"
                      color="#0673ff"
                    >
                      <div style="font-weight:700">{{items.crtusr}}</div>
                      <div>{{items.remark}}</div>
                    </el-timeline-item>
                  </el-timeline>
                  <template slot="reference" style="border:none;">
                    <img
                      src="../../assets/images/filing/warn.png"
                      alt
                      style="width:20px;height:20px"
                    />
                  </template>
                </el-popover>
              </template>
            </el-table-column>
          </el-table>
          <div style="margin-top:10px;">
            <el-pagination
              background
              @size-change="currentPage2"
              @current-change="currentChange2(currentPage2)"
              :current-page.sync="currentPage2"
              :page-size="10"
              layout="prev, pager, next, jumper"
              :total="policyArr2.length"
            ></el-pagination>
          </div>
        </el-tab-pane>

        <el-tab-pane label="保全记录" name="third">
          <el-table
            :data="policyArr3.slice((currentPage3-1)*pagesize,currentPage3*pagesize)"
            style="width: 100%"
          >
            <el-table-column type="index" width="50" label="序号" :index="indexMethod3"></el-table-column>
            <el-table-column prop="contno" label="保单号" align="center" width="120"></el-table-column>
            <el-table-column prop="posnumber" label="pos交易流水号" align="center" width="140"></el-table-column>
            <el-table-column prop="edorappdate" label="申请收到日" align="center" width="100"></el-table-column>
            <el-table-column prop="edortype" label="保全类型" align="center" width="150"></el-table-column>
            <el-table-column prop="edorstate" label="保全状态" align="center" width="120"></el-table-column>
            <el-table-column prop="edorvalidate" label="保全生效日期" align="center" width="120"></el-table-column>
            <el-table-column prop="operator" label="操作人" align="center" width="120"></el-table-column>
            <el-table-column prop="edorappdate" label="操作日" align="center" width="100"></el-table-column>
            <el-table-column prop="salechnl" label="渠道" align="center" width="120"></el-table-column>
            <el-table-column prop="edorappdate" label="提交时间" align="center" width="100"></el-table-column>
          </el-table>
          <div style="margin-top:10px;">
            <el-pagination
              background
              @size-change="currentPage3"
              @current-change="currentChange3(currentPage3)"
              :current-page.sync="currentPage3"
              :page-size="10"
              layout="prev, pager, next, jumper"
              :total="policyArr3.length"
            ></el-pagination>
          </div>
        </el-tab-pane>
      </el-tabs>

      <el-collapse v-model="activeName">
        <el-collapse-item name="2" id="4">
          <template slot="title">
            立案申请信息
            <i
              class="header-icon el-icon-caret-bottom"
              style="margin: 0 8px 0 auto;font-size: 30px;"
            ></i>
            <!-- 理赔号 保单号 营销员电话 申请日期 是否通知营销员 -->
          </template>
          <el-form ref="form" :model="form" v-model="labelPosition" label-width="140px">
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="理赔号">
                    <el-input v-model="initApplicationInfor.rgtno" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="申请日期">
                    <!-- <el-input v-model="initApplicationInfor.applydate" format = "yyyy-MM-dd" disabled></el-input> -->
                    <el-date-picker
                      type="date"
                      v-model="initApplicationInfor.applydate"
                      style="width: 100%;"
                      format="yyyy-MM-dd"
                      disabled
                      class="disabledinput"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>

              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="报案人姓名">
                    <el-input v-model="initApplicationInfor.rptorname" disabled></el-input>
                  </el-form-item>
                </div>
              </el-col>-->
            </el-row>
            <el-row>
              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="报案日期">
                    <el-input v-model="initApplicationInfor.rptdate" disabled></el-input>
                  </el-form-item>
                </div>
              </el-col>-->
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="保单号">
                    <el-input v-model="initApplicationInfor.polno" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="营销员电话" prop="phone">
                    <el-input v-model="initApplicationInfor.phone" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <div class="grid-content">
                    <el-form-item label="是否通知营销员" prop="notice">
                      <el-select
                        v-model="initApplicationInfor.notice"
                        disabled
                        class="disabledinput"
                      >
                        <el-option label="是" value="1"></el-option>
                        <el-option label="否" value="0"></el-option>
                      </el-select>
                    </el-form-item>
                  </div>

                  <!-- <el-form-item label="报案人与出险人关系">
                    <el-select
                      v-model="initApplicationInfor.relation"
                      clearable
                      placeholder="请选择"
                      disabled
                    >
                      <el-option
                        v-for="item in relations"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                    <el-input v-model="initApplicationInfor.relationname" disabled></el-input>
                  </el-form-item>-->
                </div>
              </el-col>
            </el-row>
          </el-form>
        </el-collapse-item>
      </el-collapse>

      <el-collapse v-model="activeName">
        <el-collapse-item name="3" id="5">
          <template slot="title">
            出险信息
            <i
              class="header-icon el-icon-caret-bottom"
              style="margin: 0 8px 0 auto;font-size: 30px;"
            ></i>
          </template>
          <el-form
            ref="dangerInfor"
            :model="dangerInfor"
            v-model="labelPosition"
            label-width="140px"
            :rules="rules"
          >
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="出险类型"
                    prop="accidenttype"
                    :rules="!candisable?rules.accidenttype:[{requied:false}]"
                  >
                    <el-radio-group
                      v-model="dangerInfor.accidenttype"
                      :disabled="candisable"
                      @change="changeAcc()"
                      :class="candisable&&dangerInfor.accidenttype?'disabledinput':''"
                    >
                      <el-radio
                        :label="item.code"
                        :key="item.code"
                        v-for="item in accidenttypeList"
                      >{{item.codename}}</el-radio>
                      <!-- <el-radio label="02">意外</el-radio> -->
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="直付标志">
                    <el-switch
                      v-model="dangerInfor.directpay"
                      active-value="1"
                      inactive-value="0"
                      active-color="#13ce66"
                      inactive-color="#ff4949"
                      disabled
                    ></el-switch>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="理赔类型"
                    prop="getRescode"
                    :rules="!candisable?rules.getRescode:[{requied:false,message: '请选择', trigger: 'blur'}]"
                  >
                    <!-- :disabled="candisable" -->

                    <el-checkbox-group v-model="getRescode">
                      <el-checkbox
                        v-for="(item) in llclaimtypeList"
                        :key="item.code"
                        :label="item.code"
                        :class="candisable&&getRescode?'disabledinput':''"
                      >{{item.codename}}</el-checkbox>
                    </el-checkbox-group>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="出险日期"
                    prop="accidentdate"
                    :rules="!candisable?rules.accidentdate:[{requied:false,message: '请选择', trigger: 'blur'}]"
                  >
                    <el-date-picker
                      type="date"
                      placeholder="选择日期"
                      v-model="dangerInfor.accidentdate"
                      style="width: 100%;"
                      :disabled="candisable"
                      value-format="yyyy-MM-dd"
                      clearable
                      :class="candisable&&dangerInfor.accidentdate?'disabledinput':''"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="事故原因"
                    prop="accreason"
                    :rules="dangerInfor.accidenttype==='02'&&!candisable?rules.accreason:[{ required: false, message: '请输入事故原因', trigger: 'blur' }]"
                  >
                    <el-select
                      clearable
                      v-model="dangerInfor.accreason"
                      placeholder="请选择"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.accreason?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in accReasonList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="意外事故受伤程度"
                    prop="accdegree"
                    :rules="dangerInfor.accidenttype==='02'&&!candisable?rules.accdegree:[{ required: false, message: '请输入事故原因', trigger: 'blur' }]"
                  >
                    <el-select
                      v-model="dangerInfor.accdegree"
                      clearable
                      placeholder="请选择"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.accdegree?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in shoushangList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="24">
                <div class="grid-content place">
                  <el-form-item
                    label="出险地点"
                    prop="accprovince"
                    :rules="dangerInfor.accidenttype==='02'&&!candisable?rules.accprovince:[{ required: false, message: '请输入省', trigger: 'blur' }]"
                  >
                    <el-select
                      clearable
                      filterable
                      v-model="dangerInfor.accprovince"
                      placeholder="省"
                      :disabled="candisable"
                      @change="changevince(dangerInfor.accprovince)"
                      @clear="clearData()"
                      :class="candisable&&dangerInfor.accprovince?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in provinceList"
                        :key="item.code"
                        :label="item.province"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item
                    label
                    prop="acccity"
                    :rules="dangerInfor.accidenttype==='02'&&dangerInfor.accprovince!=='999999'&&!candisable?rules.acccity:[{ required: false, message: '请输入市', trigger: 'blur' }]"
                    class="risk_address"
                  >
                    <el-select
                      v-model="dangerInfor.acccity"
                      placeholder="市"
                      clearable
                      filterable
                      :disabled="candisable"
                      @change="changaccity(dangerInfor.acccity)"
                      @clear="clearData1()"
                      :class="candisable&&dangerInfor.acccity?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in cityList"
                        :key="item.code"
                        :label="item.city"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item
                    label
                    prop="acccounty"
                    :rules="dangerInfor.accidenttype==='02'&&dangerInfor.accprovince!=='999999'&&!candisable?rules.acccounty:[{ required: false, message: '请输入市', trigger: 'blur' }]"
                    class="risk_address"
                    style="margin-left:8px;"
                  >
                    <el-select
                      v-model="dangerInfor.acccounty"
                      placeholder="区"
                      :disabled="candisable"
                      clearable
                      filterable
                      :class="candisable&&dangerInfor.acccounty?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in areaList"
                        :key="item.code"
                        :label="item.country"
                        :value="item.code"
                        @clear="clearData2()"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item
                    label
                    prop="accaddress"
                    :rules="dangerInfor.accidenttype==='02'&&!candisable?rules.accaddress:[{ required: false, message: '请输入市', trigger: 'blur' }]"
                    class="risk_address"
                  >
                    <span style="display:inline-block;margin-left:8px">
                      <el-input
                        v-model="dangerInfor.accaddress"
                        :disabled="candisable"
                        placeholder="详细地址"
                        clearable
                        style="width: 100%"
                        :class="candisable&&dangerInfor.accaddress?'disabledinput':''"
                      ></el-input>
                    </span>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="事故发生地点性质"
                    prop="accidentsite"
                    :rules="dangerInfor.accidenttype==='02'&&!candisable?rules.accidentsite:[{ required: false, message: '请输入事故发生地点性质', trigger: 'blur' }]"
                  >
                    <!-- <el-input v-model="tableMes.caseno"></el-input> -->
                    <!-- <el-select v-model="dangerInfor.accidentsite" placeholder="请选择">
                      <el-option v-for="item in accnatureList" :key="item.code" :label="item.codename"
                        :value="item.code"></el-option>
                    </el-select>-->
                    <el-cascader
                      v-model="dangerInfor.accidentsite"
                      :options="placeOptions"
                      clearable
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.accidentsite?'disabledinput':''"
                    ></el-cascader>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="就诊医院"
                    :rules="dangerInfor.accidenttype=='01'&&!candisable?rules.hospitalname:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-select
                      placeholder="请选择"
                      v-model="dangerInfor.hospitalname"
                      filterable
                      clearable
                      :disabled="candisable"
                      :filter-method="filteredaa"
                      @change="changeHospital(dangerInfor.hospitalname)"
                      @focus="clearHospital()"
                      v-el-select-loadmore="loadmoreaa"
                      :class="candisable&&dangerInfor.hospitalname?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in hospitalListsaa"
                        :key="item.hospitcode"
                        :label="item.hospitalname"
                        :value="item.hospitcode"
                      ></el-option>
                    </el-select>
                    <el-popover
                      v-if="remarkContents && dangerInfor.hospitalname"
                      placement="top-start"
                      width="200"
                      trigger="hover"
                      content="这"
                    >
                      <div>{{remarkContents}}</div>
                      <el-button slot="reference" class="jiuzhens">
                        <img
                          src="../../assets/images/filing/warn.png"
                          alt
                          style="width:20px;height:20px"
                        />
                      </el-button>
                    </el-popover>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="病区">
                    <el-input
                      v-model="dangerInfor.hospitallesion"
                      :disabled="candisable"
                      clearable
                      :class="candisable&&dangerInfor.hospitallesion?'disabledinput':''"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="床位">
                    <el-input
                      v-model="dangerInfor.hospitalbed"
                      :disabled="candisable"
                      clearable
                      :class="candisable&&dangerInfor.hospitalbed?'disabledinput':''"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>

              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="确诊日期"
                    prop="dianosedate"
                    :rules="getRescode.indexOf('102')!==-1&&!candisable?rules.dianosedate:[{ required: false, message: '请输入事故发生地点性质', trigger: 'blur' }]"
                  >
                    <el-date-picker
                      clearable
                      type="date"
                      placeholder="选择日期"
                      v-model="dangerInfor.dianosedate"
                      style="width: 100%;"
                      :disabled="candisable"
                      value-format="yyyy-MM-dd"
                      :class="candisable&&dangerInfor.dianosedate?'disabledinput':''"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>

              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="身故日期"
                    prop="deathdate"
                    :rules="getRescode.indexOf('100')!==-1&&!candisable?rules.deathdate:[{ required: false, message: '请输入事故发生地点性质', trigger: 'blur' }]"
                  >
                    <el-date-picker
                      clearable
                      type="date"
                      placeholder="选择日期"
                      v-model="dangerInfor.deathdate"
                      style="width: 100%;"
                      :disabled="candisable"
                      value-format="yyyy-MM-dd"
                      :class="candisable&&dangerInfor.deathdate?'disabledinput':''"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>
              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="入院日期">
                    <el-date-picker
                      clearable
                      type="date"
                      placeholder="选择日期"
                      v-model="dangerInfor.inhospitaldate"
                      style="width: 100%;"
                      :disabled="candisable"
                      value-format="yyyy-MM-dd"
                      :class="candisable&&dangerInfor.inhospitaldate?'disabledinput':''"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>-->

              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="出院日期">
                    <el-date-picker
                      clearable
                      type="date"
                      placeholder="选择日期"
                      v-model="dangerInfor.outhospitaldate"
                      style="width: 100%;"
                      :disabled="candisable"
                      value-format="yyyy-MM-dd"
                      :class="candisable&&dangerInfor.outhospitaldate?'disabledinput':''"
                    ></el-date-picker>
                  </el-form-item>
                </div>
              </el-col>-->
            </el-row>
            <el-row>
              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="疾病分类"
                    prop="dieasetype"
                    :rules="dangerInfor.accidenttype=='01'&&!candisable?rules.dieasetype:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group
                      v-model="dangerInfor.dieasetype"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.dieasetype?'disabledinput':''"
                    >
                      <el-radio
                        :label="item.code"
                        :key="item.code"
                        v-for="(item,index) in diseaseList"
                      >{{item.codename}}</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>-->

              <!-- <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="诊断依据" prop="dianobasis">
                    <el-select
                      clearable
                      v-model="dangerInfor.dianobasis"
                      placeholder="请选择"
                      multiple
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.dianobasis?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in dianobasisList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>-->
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="受益人是否指定"
                    prop="pointbnf"
                    :rules="getRescode.indexOf('100')!==-1&&!candisable?rules.pointbnf:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group
                      v-model="dangerInfor.pointbnf"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.pointbnf?'disabledinput':''"
                    >
                      <el-radio label="1">是</el-radio>
                      <el-radio label="0">否</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="申请豁免原因"
                    prop="exempt"
                    :rules="getRescode.indexOf('104')!==-1&&!candisable? rules.exempt:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-select
                      v-if="dangerInfor.accidenttype==='01'"
                      v-model="dangerInfor.exempt"
                      clearable
                      placeholder="请选择"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.exempt?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in resource"
                        :key="item.value"
                        :label="item.text"
                        :value="item.value"
                      ></el-option>
                    </el-select>

                    <el-select
                      v-if="dangerInfor.accidenttype==='02'"
                      v-model="dangerInfor.exempt"
                      clearable
                      placeholder="请选择"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.exempt?'disabledinput':''"
                    >
                      <el-option
                        v-for="item in resource1"
                        :key="item.value"
                        :label="item.text"
                        :value="item.value"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="伤残鉴定报告"
                    prop="disabledrpt"
                    :rules="(getRescode.indexOf('101')!==-1||getRescode.indexOf('103')!==-1||getRescode.indexOf('104')!==-1||getRescode.indexOf('6')!==-1||getRescode.indexOf('7')!==-1)&&!candisable?rules.disabledrpt:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group
                      v-model="dangerInfor.disabledrpt"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.disabledrpt?'disabledinput':''"
                    >
                      <el-radio label="1">是</el-radio>
                      <el-radio label="0">否</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item
                    label="工伤报告（失能鉴定、残疾证）"
                    prop="occuprpt"
                    class="midSty"
                    :rules="(getRescode.indexOf('101')!==-1||getRescode.indexOf('103')!==-1||getRescode.indexOf('104')!==-1||getRescode.indexOf('6')!==-1||getRescode.indexOf('7')!==-1)&&!candisable?rules.occuprpt:[{ required: false, message: '请输入', trigger: 'blur' }]"
                  >
                    <el-radio-group
                      v-model="dangerInfor.occuprpt"
                      :disabled="candisable"
                      :class="candisable&&dangerInfor.occuprpt?'disabledinput':''"
                    >
                      <el-radio label="1">是</el-radio>
                      <el-radio label="0">否</el-radio>
                    </el-radio-group>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-form>
        </el-collapse-item>
      </el-collapse>
      <div style="overflow:hidden">
        <div style="float:right;margin-bottom:10px;">
          <el-button type="primary" round @click="impInfoChange">重要信息修改</el-button>
        </div>
      </div>

      <el-collapse v-model="activeName">
        <el-collapse-item name="4" id="6">
          <template slot="title">
            申请人信息
            <i
              class="header-icon el-icon-caret-bottom"
              style="margin: 0 8px 0 auto;font-size: 30px;"
            ></i>
          </template>
          <el-form ref="form" :model="form" v-model="labelPosition" label-width="135px">
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="申请人姓名">
                    <el-input v-model="applicationInfor.rgtantname" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="申请人与出险人关系" class="midSty">
                    <el-input
                      v-model="applicationInfor.relationname"
                      disabled
                      class="disabledinput"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="证件类型">
                    <el-input v-model="applicationInfor.idtypename" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="证件号码">
                    <el-input v-model="applicationInfor.idno" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="移动电话">
                    <el-input
                      v-model="applicationInfor.rgtantmobile"
                      disabled
                      class="disabledinput"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="邮政编码">
                    <el-input v-model="applicationInfor.postcode" disabled class="disabledinput"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="24">
                <div class="grid-content applyAddress">
                  <el-form-item label="联系地址">
                    <el-input
                      v-model="applicationInfor.rgtantprovincename"
                      disabled
                      class="disabledinput"
                    ></el-input>
                    <el-input
                      v-model="applicationInfor.rgtantcityname"
                      disabled
                      class="disabledinput"
                    ></el-input>
                    <el-input
                      v-model="applicationInfor.rgtantcountyname"
                      disabled
                      class="disabledinput"
                    ></el-input>
                    <span style="width:255px;display:inline-block;">
                      <el-input
                        v-model="applicationInfor.rgtantaddress"
                        placeholder="详细地址"
                        disabled
                        class="disabledinput applyDes"
                      ></el-input>
                    </span>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-form>
        </el-collapse-item>
      </el-collapse>

      <el-collapse v-model="activeName">
        <el-collapse-item name="5" id="7">
          <template slot="title">
            领款人信息
            <i
              class="header-icon el-icon-caret-bottom"
              style="margin: 0 8px 0 auto;font-size: 30px;"
            ></i>
          </template>
          <el-form ref="form" :model="form" v-model="labelPosition" label-width="135px">
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="与被保险人关系">
                    <el-select disabled v-model="drawMoneyInfor.relationtocont">
                      <el-option
                        v-for="item in linglist"
                        :key="item.id"
                        :label="item.name"
                        :value="item.id"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="账户所有人姓名">
                    <el-input v-model="drawMoneyInfor.recename" disabled maxlength="20"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="职业">
                    <el-select v-model="drawMoneyInfor.profession" placeholder="请选择" disabled>
                      <el-option
                        v-for="item in workListss"
                        :key="item.occupationcode"
                        :label="item.occuptionname"
                        :value="item.occupationcode"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="年收入" disabled>
                    <el-input v-model="drawMoneyInfor.annualincome" disabled maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="证件类型">
                    <el-select
                      disabled
                      v-model="drawMoneyInfor.receidtype"
                      placeholder="请选择"
                      clearable
                    >
                      <el-option
                        v-for="item in cardTypeList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="证件号码">
                    <el-input disabled v-model="drawMoneyInfor.receidno" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="16">
                <div class="grid-content place" style="display:flex">
                  <el-form-item label="授权银行" prop="headbankname">
                    <el-select disabled v-model="drawMoneyInfor.headbankname" placeholder="下拉模糊">
                      <el-option
                        v-for="item in tBankList"
                        :key="item.bankid"
                        :label="item.bankname"
                        :value="item.bankid"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item label class="risk_address">
                    <el-select disabled v-model="drawMoneyInfor.province" placeholder="所在地区">
                      <el-option
                        v-for="item in bankAddressList"
                        :key="item.standardareasid"
                        :label="item.standardareasname"
                        :value="item.standardareasid"
                      ></el-option>
                    </el-select>
                  </el-form-item>

                  <el-form-item label class="risk_address">
                    <el-select disabled v-model="drawMoneyInfor.bankname" placeholder="支行">
                      <el-option
                        v-for="item in branchBankListss"
                        :key="item.banklocationsid"
                        :label="item.banklocationsname"
                        :value="item.banklocationsid"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="授权账户号码">
                    <el-input disabled v-model="drawMoneyInfor.bankaccno" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="24">
                <div class="grid-content place">
                  <el-form-item label="联系地址">
                    <el-select disabled v-model="drawMoneyInfor.receiveaccprovinc" placeholder="省">
                      <el-option
                        v-for="item in provinceList"
                        :key="item.code"
                        :label="item.province"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label class="risk_address">
                    <el-select disabled v-model="drawMoneyInfor.receivecity" placeholder="市">
                      <el-option
                        v-for="item in cityList"
                        :key="item.code"
                        :label="item.city"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label class="risk_address" style="margin-left:8px;">
                    <el-select disabled v-model="drawMoneyInfor.receivedistrict" placeholder="区">
                      <el-option
                        v-for="item in areaList"
                        :key="item.code"
                        :label="item.country"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                  <el-form-item label class="risk_address">
                    <span class="full">
                      <el-input
                        disabled
                        v-model="drawMoneyInfor.receiveaddress"
                        placeholder="详细地址"
                        maxlength="100"
                      ></el-input>
                    </span>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="联系方式">
                    <el-input disabled v-model="drawMoneyInfor.contactway" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="单位名称">
                    <el-input disabled v-model="drawMoneyInfor.workunit" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <div class="grid-content">
                  <el-form-item label="单位地址">
                    <el-input disabled v-model="drawMoneyInfor.workaddress" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-form>
        </el-collapse-item>
      </el-collapse>

      <div id="8"></div>
      <div id="9"></div>
      <div id="10"></div>
      <!-- <div id="11"></div>
      <div id="12"></div>-->

      <el-tabs v-model="activeR" type="card" @tab-click="handleClick">
        <!-- <div :class="{box:isbox}"></div> -->
        <div :style="style1" :class="isbox ? 'box' : ''"></div>
        <el-tab-pane label="诊断代码" name="one">
          <div class="work_table">
            <el-table :data="diagnoseListArr" style="width: 100%;padding:0 10px;">
              <el-table-column label="序号" type="index"></el-table-column>
              <el-table-column prop="diagnosticcode" label="诊断代码" align="center">
                <template slot="header" slot-scope="scope">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>诊断代码</span>
                </template>
                <template slot-scope="scope">
                  <!-- <span>{{typeToname(scope.row.diagcode)}}</span> -->
                  <!-- <el-input v-model="scope.row.diagnosticcode" disabled></el-input> -->
                  <p>{{scope.row.diagnosticcode}}</p>
                </template>
              </el-table-column>
              <el-table-column prop="diagnosticname" label="诊断名称" align="center">
                <template slot="header" slot-scope="scope">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>诊断名称</span>
                </template>
                <template slot-scope="scope">
                  <!-- <el-input v-model="scope.row.diagnosticname"></el-input> -->
                  <el-select
                    v-model="scope.row.diagnosticname"
                    clearable
                    placeholder="请选择"
                    filterable
                    :filter-method="filtered"
                    @change="changDiagnosticname(scope.row)"
                    @focus="init"
                    v-el-select-loadmore="loadmore"
                  >
                    <el-option
                      v-for="item in diagcodeList"
                      :key="item.code"
                      :label="item.codename"
                      :value="item.codename"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="customername" label="操作" align="center">
                <template slot-scope="scope">
                  <el-button
                    size="mini"
                    @click="deleteItem('2',scope.$index)"
                    type="danger"
                    round
                  >删除</el-button>
                  <!-- <span class="delete" @click="deleteItem('2',scope.$index)"></span> -->
                </template>
              </el-table-column>
            </el-table>
            <div style="overflow:hidden">
              <div style="float:right;margin:10px 10px 10px 0">
                <el-button type="primary" round @click="addItem('2')">增加</el-button>
              </div>
            </div>
          </div>
        </el-tab-pane>
        <el-tab-pane label="伤残代码" name="two">
          <el-table :data="diseaseListArr" style="width: 100%;padding:0 10px;">
            <el-table-column label="序号" type="index"></el-table-column>
            <el-table-column label="伤残代码" prop="disabilitycode" align="center">
              <template slot="header" slot-scope="scope">
                <span
                  class="redStars"
                  v-if="getRescode.indexOf('101')!==-1||getRescode.indexOf('103')!==-1||getRescode.indexOf('6')!==-1||getRescode.indexOf('7')!==-1"
                >&nbsp;*&nbsp;</span>
                <span>伤残代码</span>
              </template>
              <template slot-scope="scope">
                <!-- <span>{{typeToname(scope.row.diagcode)}}</span> -->
                <!-- <el-input v-model="scope.row.disabilitycode" ></el-input> -->
                <p>{{scope.row.disabilitycode}}</p>
              </template>
            </el-table-column>
            <el-table-column prop="disabilityname" label="伤残名称" align="center">
              <template slot="header" slot-scope="scope">
                <span
                  class="redStars"
                  v-if="getRescode.indexOf('101')!==-1||getRescode.indexOf('103')!==-1||getRescode.indexOf('6')!==-1||getRescode.indexOf('7')!==-1"
                >&nbsp;*&nbsp;</span>
                <span>伤残名称</span>
              </template>
              <template slot-scope="scope">
                <!-- <el-input v-model="scope.row.disabilityname"></el-input> -->
                <el-select
                  v-model="scope.row.disabilityname"
                  clearable
                  placeholder="请选择"
                  filterable
                  @change="changeDisabilityname(scope.row)"
                >
                  <el-option
                    v-for="item in disabilityList"
                    :key="item.code"
                    :label="item.codename"
                    :value="item.codename"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column prop="disabilitylevel" label="伤残等级" align="center">
              <template slot="header" slot-scope="scope">
                <span
                  class="redStars"
                  v-if="getRescode.indexOf('101')!==-1||getRescode.indexOf('103')!==-1||getRescode.indexOf('6')!==-1||getRescode.indexOf('7')!==-1"
                >&nbsp;*&nbsp;</span>
                <span>伤残等级</span>
              </template>
              <template slot-scope="scope">
                <!-- <el-input v-model="scope.row.disabilitylevel"></el-input> -->
                <p>{{scope.row.disabilitylevel}}</p>
              </template>
            </el-table-column>
            <el-table-column label="操作" align="center">
              <template slot-scope="scope">
                <el-button size="mini" @click="deleteItem('1',scope.$index)" type="danger" round>删除</el-button>
                <!-- <span class="delete" @click="deleteItem('1',scope.$index)"></span> -->
              </template>
            </el-table-column>
          </el-table>
          <div style="overflow:hidden">
            <div style="float:right;margin:10px 10px 10px 0">
              <el-button type="primary" round @click="addItem('1')">增加</el-button>
            </div>
          </div>
        </el-tab-pane>
        <el-tab-pane label="手术代码" name="three">
          <el-table :data="operationListArr" style="width: 100%;padding:0 10px;">
            <el-table-column label="序号" type="index"></el-table-column>
            <el-table-column prop="operationcode" label="手术代码" align="center">
              <template slot-scope="scope">
                <!-- <span>{{typeToname(scope.row.diagcode)}}</span> -->
                <!-- <el-input v-model="scope.row.operationcode"></el-input> -->
                <p>{{scope.row.operationcode}}</p>
              </template>
            </el-table-column>
            <el-table-column prop="operationname" label="手术名称" align="center">
              <template slot-scope="scope">
                <!-- <span>{{typeToname(scope.row.diagcode)}}</span> -->
                <!-- <el-input v-model="scope.row.operationname" ></el-input> -->
                <el-select
                  v-model="scope.row.operationname"
                  clearable
                  placeholder="请选择"
                  filterable
                  @change="changeOperationname(scope.row)"
                >
                  <el-option
                    style="width: 300px"
                    v-for="item in operationList"
                    :title="item.codename"
                    :key="item.code"
                    :label="item.codename"
                    :value="item.codename"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column prop="customername" label="操作" align="center">
              <template slot-scope="scope">
                <el-button size="mini" @click="deleteItem('3',scope.$index)" type="danger" round>删除</el-button>
                <!-- <span class="delete" @click="deleteItem('3',scope.$index)"></span> -->
              </template>
            </el-table-column>
          </el-table>
          <div style="overflow:hidden">
            <div style="float:right;margin:10px 10px 10px 0">
              <el-button type="primary" round @click="addItem('3')">增加</el-button>
            </div>
          </div>
        </el-tab-pane>
        <el-tab-pane label="骨折代码" name="four">
          <div class="work_table">
            <el-table :data="fractureListArr" style="width: 100%;padding:0 10px;">
              <el-table-column label="序号" type="index"></el-table-column>
              <el-table-column prop="fracturename" label="骨折部位" align="center">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>骨折部位</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    v-model="scope.row.fracturename"
                    clearable
                    placeholder="请选择"
                    filterable
                    @focus="initfracture(scope.row)"
                    @change="changFracturename(scope.row)"
                  >
                    <el-option
                      v-for="item in fractureList"
                      :key="item.fracturecode"
                      :label="item.fracturename"
                      :value="item.fracturename"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="fracturedetailname" label="骨折具体部位" align="center">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>骨折具体部位</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    v-model="scope.row.fracturedetailname"
                    clearable
                    placeholder="请选择"
                    filterable
                    @focus="initfracture11(scope.row)"
                    @change="changFractureDname(scope.row)"
                  >
                    <el-option
                      v-for="item in fractureDList"
                      :key="item.fracturedetailcode"
                      :label="item.fracturedetailname"
                      :value="item.fracturedetailname"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="fracturedetailname" label="骨折程度" align="center">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>骨折程度</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    v-model="scope.row.fracturelevel"
                    clearable
                    placeholder="请选择"
                    filterable
                    @focus="initfracture11(scope.row)"
                    @change="changFractureDname(scope.row)"
                  >
                    <el-option
                      v-for="(item,index) in fractureDetailList"
                      :key="index"
                      :label="item.fracturelevel"
                      :value="item.fracturelevel"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column label="操作" align="center">
                <template slot-scope="scope">
                  <el-button
                    size="mini"
                    @click="deleteItem('4',scope.$index)"
                    type="danger"
                    round
                  >删除</el-button>
                </template>
              </el-table-column>
            </el-table>
            <div style="overflow:hidden">
              <div style="float:right;margin:10px 10px 10px 0">
                <el-button type="primary" round @click="addItem('4')">增加</el-button>
              </div>
            </div>
          </div>
        </el-tab-pane>
        <el-tab-pane label="重疾代码" name="five">
          <div class="work_table">
            <el-table :data="illnessListArr" style="width: 100%;padding:0 10px;">
              <el-table-column label="序号" type="index"></el-table-column>
              <el-table-column prop="criticalname" label="重疾名称" align="center">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>重疾名称</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    v-model="scope.row.criticalname"
                    clearable
                    placeholder="请选择"
                    filterable
                    :filter-method="filteredIllness"
                    @change="changIllnessname(scope.row)"
                    @focus="initIll"
                    v-el-select-loadmore="loadmoreIll"
                  >
                    <el-option
                      v-for="item in illnessList"
                      :key="item.criticalcode"
                      :label="item.criticalname"
                      :value="item.criticalname"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <!-- <el-table-column prop="bigsource" label="大科" align="center">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>大科</span>
                </template>
                <template slot-scope="scope">
                  <p>{{scope.row.bigsource}}</p>
                </template>
              </el-table-column>
              <el-table-column prop="smallsource" label="小科" align="center">
                <template slot="header" slot-scope="scope">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>小科</span>
                </template>
                <template slot-scope="scope">
                  <p>{{scope.row.smallsource}}</p>
                </template>
              </el-table-column>-->
              <el-table-column label="操作" align="center">
                <template slot-scope="scope">
                  <el-button
                    size="mini"
                    @click="deleteItem('5',scope.$index)"
                    type="danger"
                    round
                  >删除</el-button>
                </template>
              </el-table-column>
            </el-table>
            <div style="overflow:hidden">
              <div style="float:right;margin:10px 10px 10px 0">
                <el-button type="primary" round @click="addItem('5')">增加</el-button>
              </div>
            </div>
          </div>
        </el-tab-pane>
      </el-tabs>
      <div style="text-align:right">
        <el-button type="primary" round @click="matcAdjust">匹配并理算</el-button>
        <el-button type="primary" round @click="toSameAccident">同一事故认定</el-button>
      </div>
      <!-- <div id="13"></div>
      <div id="14"></div>
      <div id="15"></div>
      <div id="16"></div>-->
      <!-- 赔案计算信息 -->
      <div class="work_queue" v-show="isPipei1&&countData1.length>0">
        <span>赔案计算信息</span>
        <div class="box"></div>
      </div>
      <div class="work_table" style="margin-bottom:20px;" v-show="isPipei1&&countData1.length>0">
        <el-table :data="countData1" style="width: 100%">
          <el-table-column label="序号" type="index" align="center"></el-table-column>
          <el-table-column prop="standpay" label="赔付金额" align="center"></el-table-column>
          <el-table-column prop="cutmoney" label="扣减项总金额" align="center"></el-table-column>
          <el-table-column prop="realpay" label="最终赔付金额" align="center"></el-table-column>
          <el-table-column prop="declinepay" label="拒赔金额" align="center"></el-table-column>
        </el-table>
      </div>
      <!-- 理赔类型计算信息 -->
      <div class="work_queue" v-show="isPipei2&&countData2.length>0">
        <span>理赔类型计算信息</span>
        <div class="box"></div>
      </div>
      <div class="work_table" style="margin-bottom:20px;" v-show="isPipei2&&countData2.length>0">
        <el-table :data="countData2" style="width: 100%">
          <el-table-column label="序号" type="index" align="center" width="65"></el-table-column>
          <el-table-column prop="claimtype" label="理赔类型名称" align="center"></el-table-column>
          <el-table-column prop="tabfeemoney" label="账单金额" align="center"></el-table-column>
          <el-table-column prop="selfamnt" label="自费金额" align="center"></el-table-column>
          <el-table-column prop="totalpay" label="统筹/附加金额" align="center"></el-table-column>
          <el-table-column prop="othpay" label="其他补偿" align="center"></el-table-column>
          <el-table-column prop="claimmoney" label="保单合计理算金额" align="center"></el-table-column>
          <el-table-column prop="realpay" label="最终赔付金额" align="center"></el-table-column>
        </el-table>
      </div>
      <!-- 保单计算信息 -->
      <div class="work_queue" v-show="isPipei3&&countData3.length>0">
        <!-- <img src="../../assets/images/report/tab_btn@1x.png" alt=""> -->
        <span>保单计算信息</span>
        <div class="box"></div>
      </div>
      <div class="work_table" style="margin-bottom:20px;" v-show="isPipei3&&countData3.length>0">
        <el-table :data="countData3" style="width: 100%">
          <el-table-column label="序号" type="index" align="center" width="65"></el-table-column>
          <el-table-column prop="contno" label="保单号" align="center"></el-table-column>
          <el-table-column prop="getdutykind" label="理赔类型" align="center">
            <template slot-scope="scope">
              <span>{{scope.row.getdutykind|resodefilt}}</span>
            </template>
          </el-table-column>
          <el-table-column prop="cvalidate" label="生效日期" align="center"></el-table-column>
          <el-table-column prop="contstate" label="保单状态" align="center"></el-table-column>
          <el-table-column prop="riskcode" label="险种代码" align="center"></el-table-column>
          <el-table-column prop="riskname" label="险种名称" align="center"></el-table-column>
          <el-table-column prop="standpay" label="理算金额" align="center"></el-table-column>
          <el-table-column prop="uwflag" label="核保决定" align="center"></el-table-column>
        </el-table>
      </div>
      <!-- 保项计算信息 -->
      <div class="work_queue" v-show="isPipei4&&countData4.length>0">
        <!-- <img src="../../assets/images/report/tab_btn@1x.png" alt=""> -->
        <span>保项计算信息</span>
        <div class="box"></div>
      </div>
      <div class="work_table" style="margin-bottom:20px;" v-show="isPipei4&&countData4.length>0">
        <el-table :data="countData4" style="width: 100%">
          <el-table-column label="序号" type="index" width="65" align="center"></el-table-column>
          <el-table-column prop="adjremark" max-width="45" min-width="35" align="center">
            <template slot-scope="scope">
              <el-popover
                v-if="scope.row.adjremark"
                placement="top-start"
                width="200"
                trigger="hover"
                content
              >
                <div>{{scope.row.adjremark}}</div>
                <template slot="reference" style="border:none;">
                  <img src="../../assets/images/filing/warn.png" alt style="width:20px;height:20px" />
                </template>
              </el-popover>
            </template>
          </el-table-column>
          <el-table-column prop="contno" label="保单号" align="center" width="150"></el-table-column>
          <el-table-column prop="riskcode" label="险种代码" align="center" width="150">
            <template slot-scope="scope">
              <div
                class="riskcodePDF"
                @click="clickCell(scope.row.riskcode)"
              >{{ scope.row.riskcode }}</div>
            </template>
          </el-table-column>
          <el-table-column prop="riskname" label="险种名称" align="center" width="150"></el-table-column>
          <el-table-column prop="getdutyname" label="保险责任" align="center" width="150"></el-table-column>
          <el-table-column prop="standpay" label="理算金额" align="center" width="150"></el-table-column>
          <el-table-column prop="realpay" label="调整为金额" align="center" width="150">
            <template slot-scope="scope">
              <el-input
                v-model="scope.row.realpay"
                @blur="moneyChek(scope.row.realpay)"
                maxlength="13"
              ></el-input>
            </template>
          </el-table-column>
          <el-table-column prop="givetype" label="给付状态" align="center" width="150">
            <template slot-scope="scope">
              <el-select placeholder="请选择" v-model="scope.row.givetype" clearable>
                <el-option
                  v-for="(item,index) in giveTypeList"
                  :label="item.codename"
                  :value="item.code"
                  :key="index"
                ></el-option>
              </el-select>
            </template>
          </el-table-column>
          <el-table-column prop="getstartdate" label="责任起期" align="center" width="150"></el-table-column>
          <el-table-column prop="getenddate" label="责任止期" align="center" width="150"></el-table-column>
          <el-table-column prop="realHospdate" label="住院天数" align="center" width="150"></el-table-column>
          <el-table-column prop="amnt" label="基本保险金额" align="center" width="150"></el-table-column>
          <el-table-column prop="freeamnt" label="优惠保险金额" align="center" width="150"></el-table-column>
          <el-table-column prop="outdutyamnt" label="免赔额" align="center" width="150"></el-table-column>
          <el-table-column prop="agreeamnt" label="剩余免赔额" align="center" width="150"></el-table-column>
          <el-table-column prop="yearbonus" label="红利金额" align="center" width="150"></el-table-column>
        </el-table>
      </div>

      <el-collapse v-model="activeName">
        <el-collapse-item name="6" id="11">
          <template slot="title">
            审核管理
            <i
              class="header-icon el-icon-caret-bottom"
              style="margin: 0 8px 0 auto;font-size: 30px;"
            ></i>
          </template>
          <el-form
            ref="auditObj"
            :model="auditObj"
            v-model="labelPosition"
            :rules="rules"
            label-width="18%"
            :label-position="topLabelPosition"
            style="padding:0 10px;"
          >
            <el-row style="padding-top:20px;">
              <el-col :span="24">
                <div class="grid-content">
                  <el-form-item label="决定解释（包括符号最多700字）" prop="auditexplain">
                    <el-input
                      type="textarea"
                      :autosize="{ minRows: 8}"
                      placeholder="请输入决定解释"
                      maxlength="700"
                      show-word-limit
                      v-model="auditObj.auditexplain"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
            <el-row style="padding-top:20px;">
              <el-col :span="24">
                <div class="grid-content">
                  <el-form-item label="审核意见（包括符号最多700字）" prop="auditidea">
                    <el-input
                      type="textarea"
                      :autosize="{ minRows: 8}"
                      placeholder="请输入审核意见"
                      maxlength="700"
                      show-word-limit
                      v-model="auditObj.auditidea"
                    ></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-form>
          <el-form
            ref="audiObj"
            :model="auditObj"
            :rules="rules"
            v-model="labelPosition"
            label-width="35%"
            :validate-on-rule-change="false"
          >
            <el-row>
              <el-col :span="8">
                <div class="grid-content audit">
                  <el-form-item label="审核结论" prop="auditconclusion">
                    <el-select
                      v-model="auditObj.auditconclusion"
                      clearable
                      placeholder="请选择"
                      @change="changeAudit(auditObj.auditconclusion)"
                    >
                      <el-option
                        v-for="item in llclaimconclusionList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8">
                <!-- 拒赔 -->
                <div class="grid-content" v-if="auditObj.auditconclusion == 5">
                  <!-- <el-form-item
                    label="撤件原因"
                    ref="auditnopassreason"
                    prop="auditnopassreason"
                    @change="audit"
                    :rules="rules.auditnopassreason2"
                  >
                    <el-select v-model="auditObj.auditnopassreason" clearable placeholder="请选择">
                      <el-option
                        v-for="item in reasonswithdrawalList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>-->
                  <el-form-item
                    label="撤件原因"
                    ref="auditcancelreason"
                    prop="auditcancelreason"
                    @change="audit"
                    :rules="auditObj.auditconclusion == 5?rules.auditnopassreason2:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-select
                      v-model="auditObj.auditcancelreason"
                      clearable
                      placeholder="请选择"
                      prop="auditcancelreason"
                    >
                      <el-option
                        v-for="item in reasonswithdrawalList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
                <div class="grid-content" v-if="auditObj.auditconclusion == 4">
                  <el-form-item
                    label="拒赔原因"
                    ref="auditnopassreason"
                    prop="auditnopassreason"
                    @change="audit"
                    :rules="auditObj.auditconclusion == 4?rules.auditnopassreason:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-select v-model="auditObj.auditnopassreason" clearable placeholder="请选择">
                      <el-option
                        v-for="item in llprotestreasonList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
                <div class="grid-content" v-if="auditObj.auditconclusion == 6">
                  <el-form-item
                    label="回退原因"
                    ref="llauditbackreason"
                    prop="llauditbackreason"
                    @change="audit"
                    :rules="auditObj.auditconclusion == 6?rules.llauditbackreason:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-select v-model="auditObj.llauditbackreason" clearable placeholder="请选择">
                      <el-option
                        v-for="item in backReason"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>
              <!-- <el-col :span="8" v-if="auditObj.auditconclusion == 5||auditObj.auditconclusion == 6||auditObj.auditconclusion == 4">
                <div class="grid-content">
                  <el-form-item
                    label="原因说明"
                    prop="auditnopassdesc"

                  >
                    <el-input v-model="auditObj.auditnopassdesc" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>-->

              <!-- <el-col :span="8" v-if="auditObj.auditconclusion == 6">
                <div class="grid-content">
                  <el-form-item
                    label="回退原因"
                    ref="llauditbackreason"
                    prop="llauditbackreason"
                    :rules="auditObj.auditconclusion == 6?rules.llauditbackreason:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-select v-model="auditObj.llauditbackreason" clearable placeholder="请选择">
                      <el-option
                        v-for="item in backReason"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>-->
              <el-col :span="8" v-if="auditObj.auditconclusion == 6">
                <div class="grid-content">
                  <el-form-item
                    label="回退原因说明"
                    ref="backdesc"
                    prop="backdesc"
                    :rules="auditObj.auditconclusion == 6?rules.backdesc:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-input v-model="auditObj.backdesc" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <!-- <el-col :span="8" v-if="auditObj.auditconclusion == 4">
                <div class="grid-content">
                  <el-form-item
                    label="拒赔原因"
                    ref="auditnopassreason1"
                    prop="auditnopassreason"
                    :rules="auditObj.auditconclusion == 4?rules.auditnopassreason1:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-select v-model="auditObj.auditnopassreason" clearable placeholder="请选择">
                      <el-option
                        v-for="item in llprotestreasonList"
                        :key="item.code"
                        :label="item.codename"
                        :value="item.code"
                      ></el-option>
                    </el-select>
                  </el-form-item>
                </div>
              </el-col>-->
              <el-col :span="8" v-if="auditObj.auditconclusion == 4">
                <div class="grid-content">
                  <el-form-item
                    label="原因说明"
                    prop="auditnopassdesc"
                    ref="auditnopassdesc"
                    :rules="auditObj.auditconclusion == 4?rules.auditnopassdesc:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-input v-model="auditObj.auditnopassdesc" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
              <el-col :span="8" v-if="auditObj.auditconclusion == 5">
                <div class="grid-content">
                  <el-form-item
                    label="原因说明"
                    prop="auditcanceldesc"
                    ref="auditcanceldesc1"
                    :rules="auditObj.auditconclusion == 5?rules.auditcanceldesc:[{ required: false, message: '请选择', trigger: 'blur' }]"
                  >
                    <el-input v-model="auditObj.auditcanceldesc" maxlength="100"></el-input>
                  </el-form-item>
                </div>
              </el-col>
            </el-row>
          </el-form>
        </el-collapse-item>
      </el-collapse>
      <div style="overflow:hidden;margin-bottom: 40px;">
        <div style="float:right;margin:10px 10px 30px 0">
          <el-button @click="noticepdfprint()" type="primary" round>通知书预览</el-button>
          <el-button type="primary" @click="saveAudit1()" round :disabled="dissaveAudit1()">审核确认</el-button>
        </div>
      </div>

      <div class="botton_box" style="position: fixed;
      width: 74%;
      bottom: -6.5px">
        <!-- <img src="../../assets/images/filing/footer.png" alt style="width:100%;display:block;" /> -->
        <div style="text-align:center;" class="button_style">
          <!-- <el-button round @click="getHosa" size="mini">医疗单证调整</el-button>
          <el-button round @click="goBj" size="mini">北京医疗单证调整</el-button>-->
          <span>
            <el-button type="primary" round size="mini" @click="getHosa">医疗单证录入</el-button>
            <!-- <el-button type="primary" round v-if="medicineflag == '1'" size="mini" @click="goBj">医疗单证录入</el-button> -->
          </span>
          <!-- <span v-else>
            <el-button type="primary" round v-if="zds == 'QT'" size="mini" @click="getHosa">医疗单证录入</el-button>
            <el-button type="primary" round v-if="zds == 'ZB' || zds == 'BJ'" size="mini" @click="goBj">医疗单证录入</el-button>
          </span>-->
          <el-button
            type="primary"
            round
            @click="toInitiatingPhoto"
            :disabled="getPhotoState()"
            size="mini"
          >生成照会</el-button>
          <el-button
            type="primary"
            round
            @click="toInitiateSurvey"
            :disabled="getState()"
            size="mini"
          >提起调查</el-button>
          <el-button
            type="primary"
            round
            size="mini"
            @click="toSecondary"
            :disabled="startsecondflag == '0' || isShowTwo == '01'"
          >发起二核</el-button>
          <!-- <el-button type="primary" round @click="toExemptionProcess" :disabled="disExmption()">豁免处理</el-button> -->
          <el-button
            type="primary"
            round
            @click="goSecond"
            :disabled="lookTwo == false"
            size="mini"
          >二核结论查看</el-button>
          <el-button type="primary" round @click="toInitImg()" size="mini">影像查询</el-button>
          <el-button
            type="primary"
            round
            size="mini"
            @click="benefitF()"
            :disabled="(!isContractState) || ((!isPipei1&&!countData1.length>0)&&(!isPipei2&&!countData2.length>0)&&(!isPipei3&&!countData3.length>0)&&(!isPipei4&&!countData4.length>0))"
          >受益人分配</el-button>
          <el-button
            type="primary"
            round
            @click="toContractProcess"
            :disabled="!isContractStates"
            size="mini"
          >合同处理</el-button>
          <el-button type="primary" round @click="isShowRemark()" size="mini">备注信息</el-button>
          <el-button
            type="primary"
            round
            size="mini"
            @click="torRollBackMes()"
            :disabled="casebackList.length == 0"
          >回退查询</el-button>
          <el-button @click="saveAudit()" type="primary" round size="mini">保 存</el-button>
          <el-button type="primary" round @click="goBack()" size="mini">返 回</el-button>
        </div>
      </div>
    </div>
    <!-- <div style="position:fixed;top:80px;right:0;"> -->
    <!-- <beijing-dialog
      :bJdialogVisible.sync="bJdialogVisible"
      :bjObjForm.sync="bjObjForm"
      :key="timer"
    />-->

    <div class="right">
      <!-- <img src="../../assets/images/filing/anchor_bgc.png" alt=""> -->
      <img src="../../assets/images/filing/downArrow.png" alt class="downArrow" />
      <img src="../../assets/images/filing/TOP.png" alt @click="jump('top')" class="top" />
      <img src="../../assets/images/filing/upArrow.png" alt @click="jump('top')" class="upArrow" />
      <!-- <p style="margin-top:82px;">12344</p>
      <p>ghhjj</p>-->
      <p
        v-for="(item,index) in btnArr"
        :key="index"
        class="btn_text"
        @click="jump(index)"
        :style="{color: activeStep === index ? '#F1CF60' : '#333'}"
      >{{item}}</p>
      <!-- </div> -->
      <!-- 对私受益人分配 -->
      <el-dialog :visible.sync="dialogFormVisible" width="94%">
        <div class="work_queue" style="display: flex;">
          <!-- <img src="../../assets/images/report/tab_btn@1x.png" alt=""> -->
          <span>赔案保单信息</span>
          <div class="box"></div>
        </div>
        <div class="lable">
          <el-table
            :data="benefitData"
            @row-click="getBenfit"
            border
            highlight-current-row
            :header-cell-style="{background:'#F7FAFF',color:'#333333'}"
          >
            <el-table-column label="序号" type="index" align="center" width="50"></el-table-column>
            <el-table-column prop="contno" align="center" label="保单号"></el-table-column>
            <el-table-column prop="pay" align="center" label="赔付金额"></el-table-column>
            <el-table-column prop="state" align="center" label="分配情况"></el-table-column>
          </el-table>
        </div>
        <div class="work_queue" style="display: flex;margin-top: 10px;">
          <!-- <img src="../../assets/images/report/tab_btn@1x.png" alt=""> -->
          <span>理赔受益人信息</span>
          <div class="box"></div>
        </div>
        <div class="lable">
          <el-table
            :data="benefitArray"
            style="width: 100%"
            :header-cell-style="{background:'#F7FAFF',color:'#333333'}"
          >
            <el-table-column label="序号" type="index" align="center" width="50"></el-table-column>
            <!-- <el-table-column label="姓名" align="center" width="140">
              <template slot="header" slot-scope="scope">
                <span class="redStars">&nbsp*&nbsp</span>
                <span>姓名</span>
              </template>
              <template slot-scope="scope" prop="name">
                <el-input v-model="scope.row.name" maxlength="20"></el-input>
              </template>
            </el-table-column>-->
            <el-table-column label="证件类型" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>证件类型</span>
              </template>
              <template slot-scope="scope" prop="name">
                <el-select placeholder="请选择" v-model="scope.row.idtype">
                  <el-option
                    v-for="item in cardTypeList"
                    :key="item.code"
                    :label="item.codename"
                    :value="item.code"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="证件号码" align="center" width="170">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>证件号码</span>
              </template>
              <template slot-scope="scope" prop="idno">
                <el-input
                  v-model="scope.row.idno"
                  @input="changeToUpperCase(scope.row)"
                  @change="scope.row.idno = ToCDB(scope.row.idno)"
                ></el-input>
              </template>
            </el-table-column>
            <el-table-column label="与被保险人关系" align="center" width="150">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>与被保险人关系</span>
              </template>
              <template prop="relationtoinsured" slot-scope="scope">
                <el-select
                  placeholder="请选择"
                  v-model="scope.row.relationtoinsured"
                  @change="toChangeRelation(scope.row,scope.$index)"
                >
                  <el-option
                    v-for="item in relations"
                    :key="item.code"
                    :label="item.codename"
                    :value="item.code"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column prop="bnflot" label="分配比例" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>分配比例（%）</span>
              </template>
              <template slot-scope="scope" prop="name">
                <el-input
                  type="text"
                  v-model="scope.row.bnflot"
                  maxlength="100"
                  @blur="twoNum(scope.row)"
                ></el-input>
              </template>
            </el-table-column>
            <el-table-column label="账户所有人姓名" align="center" width="150">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>账户所有人姓名</span>
              </template>
              <template slot-scope="scope" prop="payeename">
                <el-input
                  :disabled="disableds(scope.row)"
                  v-model="scope.row.payeename"
                  maxlength="20"
                ></el-input>
              </template>
            </el-table-column>
            <el-table-column prop="payeeidno" label="授权账户号码" align="center" width="240">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>授权账户号码</span>
              </template>
              <template slot-scope="scope" prop="bankaccno">
                <el-input v-model="scope.row.bankaccno" maxlength="100"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="授权银行" align="center" width="250">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>授权银行</span>
              </template>
              <template slot-scope="scope">
                <el-select
                  placeholder="请选择"
                  v-model="scope.row.bankcode"
                  @change="getBanchBank(scope.row)"
                  clearable
                  filterable
                >
                  <el-option
                    v-for="item in tBankList"
                    :key="item.bankid"
                    :label="item.bankname"
                    :value="item.bankid"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="所在地区" align="center" width="200">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>所在地区</span>
              </template>
              <template slot-scope="scope" prop="bankprovince">
                <el-select
                  v-model="scope.row.bankprovince"
                  placeholder="请选择"
                  @change="getBanchBank(scope.row)"
                  filterable
                  clearable
                >
                  <el-option
                    v-for="item in bankAddressList"
                    :key="item.standardareasid"
                    :label="item.standardareasname"
                    :value="item.standardareasid"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="支行" align="center" width="280">
              <template slot="header">
                <!-- <span class="redStars">&nbsp*&nbsp</span> -->
                <span>支行</span>
              </template>
              <template slot-scope="scope">
                <el-select v-model="scope.row.bankbranch" clearable filterable placeholder="请选择">
                  <el-option
                    v-for="(item,index) in newbranchBankList[scope.$index]"
                    :key="index"
                    :label="item.banklocationsname"
                    :value="item.banklocationsid"
                  ></el-option>
                </el-select>
                <el-select class="nobankData" v-model="scope.row.bankbranch" placeholder="请选择">
                  <el-option
                    v-for="item in branchBankList"
                    :key="item.banklocationsid"
                    :label="item.banklocationsname"
                    :value="item.banklocationsid"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="职业" align="center" width="220">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>职业</span>
              </template>
              <template slot-scope="scope">
                <el-select placeholder="请选择" v-model="scope.row.occupation" filterable>
                  <el-option
                    v-for="item in workList"
                    :key="item.occupationcode"
                    :label="item.occuptionname"
                    :value="item.occupationcode"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="年收入" align="center" width="140">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>年收入</span>
              </template>
              <template slot-scope="scope" prop="annualincome">
                <el-input v-model="scope.row.annualincome" type="text" maxlength="100" min="0"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="联系方式" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;&nbsp;</span>
                <span>联系方式</span>
              </template>
              <template slot-scope="scope" prop="phone">
                <el-input v-model="scope.row.phone" maxlength="100"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="住所地址省" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>住所地址省</span>
              </template>
              <template slot-scope="scope" prop="addressprovince">
                <el-select
                  v-model="scope.row.addressprovince"
                  placeholder="省"
                  @change="changevince1(scope.row,scope.$index)"
                  filterable
                >
                  <el-option
                    v-for="(item,index) in provinceList"
                    :key="index"
                    :label="item.province"
                    :value="item.code"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="住所地址市" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>住所地址市</span>
              </template>
              <template slot-scope="scope" prop="addresscity">
                <el-select
                  v-model="scope.row.addresscity"
                  placeholder="市"
                  @change="changaccity1(scope.row)"
                  filterable
                >
                  <el-option
                    v-for="(item,index) in newcitylist1[scope.$index]"
                    :key="index"
                    :label="item.city"
                    :value="item.code"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="住所地址区" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>住所地址区</span>
              </template>
              <template slot-scope="scope" prop="addressarea">
                <el-select
                  @change="changecountry(scope.row)"
                  v-model="scope.row.addressarea"
                  placeholder="区"
                  filterable
                >
                  <el-option
                    v-for="(item,index) in newarealist1[scope.$index]"
                    :key="index"
                    :label="item.country"
                    :value="item.code"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="详细住址" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>详细住址</span>
              </template>
              <template slot-scope="scope" prop="addressdetail">
                <el-input v-model="scope.row.addressdetail"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="工作单位名称" align="center" width="160">
              <template slot-scope="scope" prop="workunit">
                <el-input v-model="scope.row.workunit" maxlength="100"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="工作单位地址" align="center" width="160">
              <template slot-scope="scope" prop="workaddress">
                <el-input v-model="scope.row.workaddress" maxlength="100"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="操作">
              <template slot-scope="scope">
                <el-button size="mini" @click="deleteData(scope.$index)">删除</el-button>
              </template>
            </el-table-column>
          </el-table>
          <div style="background-color:#fff;text-align:right;padding:10px 20px;">
            <el-button
              type="primary"
              round
              :disabled="this.deleteBnfContNo == ''"
              @click="addData()"
            >增 加</el-button>
            <el-button
              type="primary"
              round
              :disabled="this.deleteBnfContNo == ''"
              @click="saveBenefit()"
            >保 存</el-button>
          </div>
        </div>
      </el-dialog>
      <!-- 对公受益人分配 -->
      <el-dialog :visible.sync="dialogFormPublic" width="94%">
        <div class="work_queue" style="display: flex;">
          <span>赔案保单信息</span>
          <div class="box"></div>
        </div>
        <div class="lable">
          <el-table
            :data="benefitData"
            @row-click="getPubBenfit"
            border
            highlight-current-row
            :header-cell-style="{background:'#F7FAFF',color:'#333333'}"
          >
            <el-table-column label="序号" type="index" align="center" width="50"></el-table-column>
            <el-table-column prop="contno" label="保单号" align="center"></el-table-column>
            <el-table-column prop="pay" label="赔付金额" align="center"></el-table-column>
            <el-table-column prop="state" label="分配情况" align="center"></el-table-column>
          </el-table>
        </div>
        <div class="work_queue" style="display: flex;margin-top: 10px;">
          <span>理赔受益人信息</span>
          <div class="box"></div>
        </div>
        <div class="lable">
          <el-table
            :data="benefitPubArray"
            style="width: 100%;"
            :header-cell-style="{background:'#F7FAFF',color:'#333333'}"
          >
            <el-table-column label="序号" type="index" align="center" width="50"></el-table-column>
            <el-table-column label="对公账户" align="center" width="160">
              <template slot="header">
                <span class="redStars">&nbsp;*&nbsp;</span>
                <span>对公账户</span>
              </template>
              <template slot-scope="scope" prop="accname">
                <el-select
                  v-model="scope.row.accname"
                  @change="changeAccname(scope.row,scope.$index)"
                  placeholder="请选择"
                >
                  <el-option
                    v-for="item in accountList"
                    :key="item.accname"
                    :label="item.accname"
                    :value="item.accname"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="分配比例（%）" align="center" width="160">
              <template>
                <el-input disabled type="text" value="100"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="账户所有人姓名" align="center" width="150">
              <template slot-scope="scope" prop="accpername">
                <el-input disabled v-model="scope.row.accpername" maxlength="20"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="授权账户号码" align="center" width="240">
              <template slot-scope="scope" prop="bankaccno">
                <el-input disabled v-model="scope.row.bankaccno" maxlength="100"></el-input>
              </template>
            </el-table-column>
            <el-table-column label="授权银行" align="center" width="230">
              <template slot-scope="scope">
                <el-select
                  disabled
                  placeholder="请选择"
                  v-model="scope.row.bankcode"
                  @change="getBanchBank(scope.row)"
                  clearable
                  filterable
                >
                  <el-option
                    v-for="item in tBankList"
                    :key="item.bankid"
                    :label="item.bankname"
                    :value="item.bankid"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="所在地区" align="center" width="200">
              <template slot-scope="scope" prop="bankprovince">
                <el-select
                  disabled
                  v-model="scope.row.bankprovince"
                  placeholder="请选择"
                  @change="getBanchPubBank(scope.row.bankcode,scope.row.bankprovince)"
                >
                  <el-option
                    v-for="item in bankAddressList"
                    :key="item.standardareasid"
                    :label="item.standardareasname"
                    :value="item.standardareasid"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
            <el-table-column label="支行" align="center" width="280">
              <template slot-scope="scope">
                <el-select v-model="scope.row.bankbranch" disabled placeholder="请选择">
                  <el-option
                    v-for="item in branchBankList"
                    :key="item.banklocationsid"
                    :label="item.banklocationsname"
                    :value="item.banklocationsid"
                  ></el-option>
                </el-select>
              </template>
            </el-table-column>
          </el-table>
          <div style="background-color:#fff;text-align:right;padding:10px 20px;">
            <el-button
              type="primary"
              round
              :disabled="this.deleteBnfContNo == ''"
              @click="savePubBenefit()"
            >保 存</el-button>
          </div>
        </div>
      </el-dialog>

      <!--  备注弹框 -->
      <el-dialog :visible.sync="isshowremark" width="74%">
        <remark-dialog
          @changeisshow="changeisshow"
          :is-show-remark.sync="isshowremark"
          :rgtno="this.rgtno"
          :startphase="3"
        ></remark-dialog>
      </el-dialog>
      <el-dialog :visible.sync="isAudit" width="30%" :show-close="false">
        <span>案件不符合审核规则，将提交审批</span>
        <div style="display: flex;align-items: center;margin-top: 30px;">
          <span style="flex-basis: 25%">指定审批人:</span>
          <el-select style="flex-basis: 75%" v-model="auditu" placeholder="请选择" filterable>
            <el-option
              v-for="item in auditorArr"
              :key="item.auditcode"
              :label="item.auditname"
              :value="item.auditcode"
            ></el-option>
          </el-select>
        </div>
        <div style="margin-top: 20px">
          <el-button style="background-color:#0673FF;" round type="primary" @click="cSure('1')">确认</el-button>
          <el-button round type="info" @click="cSure('2')">取消</el-button>
          <!-- <span @click="cSure('1')">确认</span>
          <span @click="cSure('2')">取消</span>-->
        </div>
      </el-dialog>
    </div>
    <!-- 医疗单证 -->
    <el-dialog
      class="diamh"
      :visible.sync="isShowhospital"
      :close-on-click-modal="false"
      width="100%"
      :show-close="false"
      :fullscreen="true"
    >
      <el-tabs v-model="activeNames" class="mels">
        <el-tab-pane label="普通医疗单证" name="first">
          <el-dialog title :visible.sync="dialogVisible" append-to-body class="isshow" width="85%">
            <template>
              <p class="twoTitle">
                费用明细
                <el-button
                  style="float:right; padding: 10px 14px;"
                  class="titleBtn"
                  type="primary"
                  @click="addRowItemz1()"
                >新增</el-button>
              </p>
            </template>
            <el-table
              :data="fyDetail.slice((currentPagez3-1)*pagesizez3,currentPagez3*pagesizez3)"
              center="true"
            >
              <el-table-column label="序号" type="index" width="50" :index="indexMethodz3"></el-table-column>
              <el-table-column prop="feeitemname" label="费用项名称" width="160" align="center">
                <template slot="header">
                  <span>费用项名称</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    placeholder="请选择"
                    v-model="scope.row.feeitemname"
                    filterable
                    clearable
                    @change="changeFeeItem(scope.row)"
                  >
                    <el-option
                      v-for="(item,index) in fyxLists"
                      :label="item.codename"
                      :value="item.code"
                      :key="index"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="feeitemdetil" label="费用名称明细" width="240" align="center">
                <template slot="header">
                  <!-- <span class="redStars">&nbsp*&nbsp</span> -->
                  <span>费用名称明细</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    placeholder="请选择"
                    v-model="scope.row.feeitemdetil"
                    @focus="getfydata(scope.row,scope.$index)"
                    @change="getfeiyongnum"
                    v-el-select-loadmore="loadmorezz"
                    :filter-method="filteredFY"
                    filterable
                    allow-create
                    clearable
                  >
                    <el-option
                      v-for="(item,index) in newfyDetailList1[scope.$index]"
                      :key="index"
                      :label="item.itemname"
                      :value="item.id+'|@|'+item.itemname"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="fee" label="单价" width="130" align="center">
                <template slot-scope="scope">
                  <el-input
                    v-model="scope.row.fee"
                    type="text"
                    @blur="getSum(scope.row)"
                    clearable
                    maxlength="13"
                    min="0"
                  ></el-input>
                </template>
              </el-table-column>
              <el-table-column prop="number" label="数量" width="100" align="center">
                <template slot-scope="scope">
                  <el-input
                    v-model="scope.row.number"
                    type="text"
                    @blur="getSum(scope.row)"
                    clearable
                    maxlength="13"
                    min="0"
                  ></el-input>
                </template>
              </el-table-column>
              <el-table-column prop="price" label="费用金额" width="130" align="center">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>费用金额</span>
                </template>
                <template slot-scope="scope">
                  <el-input
                    v-model="scope.row.price"
                    type="text"
                    clearable
                    @blur="twoNum(scope.row)"
                    maxlength="13"
                    min="0"
                  ></el-input>
                </template>
              </el-table-column>
              <el-table-column prop="specifications" label="规格与单位" width="160" align="center">
                <template slot-scope="scope">
                  <el-input v-model="scope.row.specifications" maxlength="100" clearable></el-input>
                </template>
              </el-table-column>
              <el-table-column prop="healthcaretype" label="医保类别" width="160" align="center">
                <template slot-scope="scope">
                  <el-input v-model="scope.row.healthcaretype" clearable maxlength="100"></el-input>
                </template>
              </el-table-column>
              <el-table-column label="操作" width="80" align="center">
                <template slot-scope="scope">
                  <!-- <span class="delete" @click.native.prevent="deleteRow(scope.$index, gridData)"></span> -->

                  <el-button size="mini" @click="deletez3(scope.$index)">删除</el-button>
                  <!-- <el-button size="mini" @click="dialogVisible = true">录入明细</el-button> -->
                </template>
              </el-table-column>
            </el-table>
            <div style="margin-top:10px;">
              <el-pagination
                background
                @size-change="handleSizeChangez3"
                @current-change="handleCurrentChangez3"
                :page-size="pagesizez3"
                layout="prev, pager, next, jumper"
                :total="fyDetail.length"
              ></el-pagination>
            </div>
            <template>
              <p class="twoTitle">
                扣费明细
                <el-button
                  style="float:right;padding: 10px 14px;"
                  class="titleBtn"
                  type="primary"
                  @click="addRowItemz2()"
                >新增</el-button>
              </p>
            </template>
            <el-table
              :data="kfDetail.slice((currentPagez4-1)*pagesizez4,currentPagez4*pagesizez4)"
              center="true"
            >
              <el-table-column label="序号" type="index" width="50" :index="indexMethodz4"></el-table-column>
              <el-table-column prop="deducttypes" label="扣费类型" align="center" width="160">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>扣费类型</span>
                </template>
                <template slot-scope="scope">
                  <el-select
                    placeholder="请选择"
                    v-model="scope.row.deducttypes"
                    @change="changeKFItem(scope.row)"
                  >
                    <el-option
                      v-for="(item,index) in koufeiTypes"
                      :label="item.codename"
                      :value="item.code"
                      :key="index"
                      filterable
                      clearable
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="deductnames" label="扣费名称" align="center" width="240" clearable>
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>扣费名称</span>
                </template>
                <template slot-scope="scope">
                  <!-- :filter-method="filtered(scope.row)" -->
                  <el-select
                    placeholder="请选择"
                    v-model="scope.row.deductnames"
                    @focus="getkfdata(scope.row,scope.$index)"
                    @change="getkoufeinum"
                    v-el-select-loadmore="loadmorezz1"
                    :filter-method="filteredKF"
                    filterable
                    allow-create
                    clearable
                  >
                    <el-option
                      v-for="(item,index) in newkoufeiLists[scope.$index]"
                      :key="index"
                      :label="item.itemname"
                      :value="item.id+'|@|'+item.itemname"
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="deductfee " label="扣费金额" align="center" width="130">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>扣费金额</span>
                </template>
                <template slot-scope="scope">
                  <el-input
                    v-model="scope.row.deductfee"
                    type="text"
                    @blur="twoNum(scope.row)"
                    maxlength="13"
                    clearable
                    min="0"
                  ></el-input>
                </template>
              </el-table-column>
              <el-table-column prop="deductreasontypes" label="扣费原因类型" align="center" width="200">
                <template slot="header">
                  <span class="redStars">&nbsp;*&nbsp;</span>
                  <span>扣费原因类型</span>
                </template>
                <template slot-scope="scope">
                  <!-- <el-input v-model="scope.row.deductreasontypes" clearable></el-input> -->

                  <el-select placeholder="请选择" v-model="scope.row.deductreasontypes">
                    <el-option
                      v-for="(item,index) in koufeiReason"
                      :key="index"
                      :label="item.codename"
                      :value="item.code"
                      filterable
                      clearable
                    ></el-option>
                  </el-select>
                </template>
              </el-table-column>
              <el-table-column prop="deductreasons" label="扣费原因" align="center" width="160">
                <template slot-scope="scope">
                  <el-input v-model="scope.row.deductreasons" clearable maxlength="100"></el-input>
                </template>
              </el-table-column>
              <el-table-column prop="deductemark" label="备注" align="center" width="160">
                <template slot-scope="scope">
                  <el-input v-model="scope.row.deductemark" maxlength="80" clearable></el-input>
                </template>
              </el-table-column>
              <el-table-column label="操作" width="80" align="center">
                <template slot-scope="scope">
                  <el-button size="mini" @click="deletez4(scope.$index)">删除</el-button>
                </template>
              </el-table-column>
            </el-table>
            <div style="margin-top:10px;">
              <el-pagination
                background
                @size-change="handleSizeChangez4"
                @current-change="handleCurrentChangez4"
                :page-size="pagesizez4"
                layout="prev, pager, next, jumper"
                :total="kfDetail.length"
              ></el-pagination>
            </div>
            <span slot="footer" class="dialog-footer">
              <el-button type="primary" @click="beSure">确定</el-button>
              <el-button type="primary" @click="dialogVisible = false">返回</el-button>
            </span>
          </el-dialog>
          <div class="generalMedical" style="padding:10px;">
            <!-- 门诊 -->
            <div class="work_queue">
              <!-- <img src="../../assets/images/report/tab_btn@1x.png" alt=""> -->
              <span>普通门诊单证录入信息</span>
              <div class="box"></div>
            </div>
            <div class="work_table">
              <el-table
                ref="ruleForm"
                style="width: 100%"
                :data="commonOutpatient.slice((currentPagez1-1)*pagesizez1,currentPagez1*pagesizez1)"
                :header-cell-style="{color:'#555',textAlign:'center'}"
                :cell-style="{textAlign:'center'}"
                @sort-change="changeSort"
              >
                <el-table-column label="序号" type="index" width="60" :index="indexMethodz1"></el-table-column>
                <el-table-column prop="mainfeeno" label="收据编号" width="150">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>收据编号</span>
                  </template>
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.mainfeeno"
                      @blur="inputMainfeeno(scope.row)"
                      maxlength="100"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="hospitalcode" label="医院名称" width="330">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>医院名称</span>
                  </template>
                  <template slot-scope="scope">
                    <el-select
                      v-model="scope.row.hospitalcode"
                      placeholder="请选择"
                      v-el-select-loadmore="loadmorez11"
                      filterable
                      clearable
                      :filter-method="filteredz"
                      @focus="getRow(scope.row,scope.$index)"
                    >
                      <el-option
                        v-for="item in newhospitalListsz[scope.$index]"
                        :key="item.hospitcode"
                        :label="item.hospitalname"
                        :value="item.hospitcode"
                      ></el-option>
                    </el-select>
                  </template>
                </el-table-column>
                <el-table-column prop="feedate" label="就诊时间" width="160" sortable="custom">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>就诊时间</span>
                  </template>
                  <template slot-scope="scope">
                    <el-date-picker
                      v-model="scope.row.feedate"
                      type="date"
                      placeholder="选择日期"
                      value-format="yyyy-MM-dd"
                      @blur="changeFeeDate(scope.row)"
                    ></el-date-picker>
                  </template>
                </el-table-column>
                <el-table-column prop="billmoney" label="费用总金额" width="140">
                  <template slot-scope="scope">
                    <!-- <div
                    v-if="scope.row.billmoney"
                    class="riskcodePDF"
                    @click="getDetail1(scope.row)"
                  >{{ scope.row.billmoney }}</div>
                    <el-button v-else size="mini" @click="getDetail1(scope.row)">录入明细</el-button>-->
                    <div
                      v-if="scope.row.billmoney"
                      class="riskcodePDF"
                      @click="getDetailz1(scope.row,scope.$index)"
                    >{{ scope.row.billmoney}}</div>
                    <div v-else class="riskcodePDF" @click="getDetailz1(scope.row,scope.$index)">0</div>
                  </template>
                </el-table-column>
                <el-table-column prop="selfamnt" label="自费金额" width="140">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>自费金额</span>
                  </template>
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.selfamnt"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="selfamnt" label="特殊自费" width="140">
                  <template slot="header">
                    <span>特殊自费</span>
                    <el-popover
                      placement="top-start"
                      title
                      width="200"
                      trigger="hover"
                      content="彩虹桥系列、长生福特殊自费金额"
                    >
                      <span slot="reference">
                        <img
                          src="../../assets/images/filing/warn.png"
                          alt
                          style="width:16px;height:16px"
                        />
                      </span>
                    </el-popover>
                  </template>
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.specselfamnt"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="socifee" label="统筹/附加金额" width="140">
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.socifee"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="sociflag" label="社保标志" width="120">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>社保标志</span>
                  </template>
                  <template slot-scope="scope">
                    <el-select v-model="scope.row.sociflag">
                      <el-option label="有" value="1"></el-option>
                      <el-option label="无" value="0"></el-option>
                    </el-select>
                  </template>
                </el-table-column>
                <el-table-column prop="otherfee" label="其他补偿" width="140">
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.otherfee"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="refusemoney" label="扣费明细" width="140">
                  <template slot-scope="scope">
                    <p>{{scope.row.refusemoney}}</p>
                  </template>
                </el-table-column>
                <el-table-column prop="indemnity" label="收据计算金额" width="140">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>收据计算金额</span>
                  </template>
                  <template slot-scope="scope">
                    <p>{{scope.row.indemnity}}</p>
                    <!-- <el-input v-model="scope.row.indemnity"  type="number" @blur="twoNum(scope.row)" min="0"></el-input> -->
                  </template>
                </el-table-column>
                <el-table-column prop="operation" label="是否手术" width="120">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>是否手术</span>
                  </template>
                  <template slot-scope="scope">
                    <el-select v-model="scope.row.operation" placeholder="请选择">
                      <el-option label="是" value="1"></el-option>
                      <el-option label="否" value="0"></el-option>
                    </el-select>
                  </template>
                </el-table-column>
                <el-table-column label="操作">
                  <template slot-scope="scope">
                    <el-button size="mini" @click="deletez1(scope.row,scope.$index)">删除</el-button>
                  </template>
                </el-table-column>
              </el-table>
              <div style="margin-top:10px;text-align:left">
                <el-pagination
                  style="display:inline-block;"
                  background
                  @size-change="handleSizeChangez1"
                  @current-change="handleCurrentChangez1"
                  :page-size="pagesizez1"
                  layout="prev, pager, next, jumper"
                  :total="commonOutpatient.length"
                ></el-pagination>
                <el-button
                  style="float:right;margin-right:30px;"
                  type="primary"
                  round
                  size="mini"
                  @click="addRowz1()"
                >增 加</el-button>
              </div>
              <div style="padding:10px 0;"></div>
            </div>
            <!-- 住院 -->
            <div class="work_queue" style="margin-top:20px;">
              <!-- <img src="../../assets/images/report/tab_btn@1x.png" alt=""> -->
              <span>普通住院单证录入信息</span>
              <div class="box"></div>
            </div>
            <div class="work_table">
              <el-table
                :data="commonHospital.slice((currentPagez2-1)*pagesizez2,currentPagez2*pagesizez2)"
                style="width: 100%"
                :header-cell-style="{color:'#555',textAlign:'center'}"
                :cell-style="{textAlign:'center'}"
              >
                <el-table-column label="序号" type="index" width="60" :index="indexMethodz2"></el-table-column>
                <el-table-column prop="mainfeeno" label="收据编号" width="150">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>收据编号</span>
                  </template>
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.mainfeeno"
                      @blur="inputMainfeeno1(scope.row)"
                      maxlength="100"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="hospitalcode" label="医院名称" width="330">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>医院名称</span>
                  </template>
                  <template slot-scope="scope">
                    <el-select
                      v-model="scope.row.hospitalcode"
                      placeholder="请选择"
                      v-el-select-loadmore="loadmoresz1"
                      filterable
                      clearable
                      :filter-method="filteredz1"
                      @focus="getRow1(scope.row,scope.$index)"
                    >
                      <el-option
                        v-for="item in newhospitalListsz1[scope.$index]"
                        :key="item.hospitcode"
                        :label="item.hospitalname"
                        :value="item.hospitcode"
                      ></el-option>
                    </el-select>
                  </template>
                </el-table-column>
                <el-table-column prop="hospstartdate" label="入院日期" width="160">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>入院日期</span>
                  </template>
                  <template slot-scope="scope">
                    <el-date-picker
                      v-model="scope.row.hospstartdate"
                      type="date"
                      placeholder="选择日期"
                      value-format="yyyy-MM-dd"
                      @blur="changeHospstartdate(scope.row)"
                    ></el-date-picker>
                  </template>
                </el-table-column>
                <el-table-column prop="hospenddate" label="出院日期" width="160">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>出院日期</span>
                  </template>
                  <template slot-scope="scope">
                    <el-date-picker
                      v-model="scope.row.hospenddate"
                      type="date"
                      placeholder="选择日期"
                      value-format="yyyy-MM-dd"
                      @blur="changeHospenddate(scope.row,scope.$index)"
                    ></el-date-picker>
                  </template>
                </el-table-column>
                <el-table-column prop="realhospdate" label="普通病房天数" width="120">
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.realhospdate"
                      @blur="checkUnumber1(scope.row,scope.$index)"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="imhospdate" label="重症病房天数" width="120">
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.imhospdate"
                      @blur="checkUnumber2(scope.row)"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="billmoney" label="费用总金额" width="140">
                  <template slot-scope="scope">
                    <div
                      v-if="scope.row.billmoney"
                      class="riskcodePDF"
                      @click="getDetailz2(scope.row,scope.$index)"
                    >{{ scope.row.billmoney}}</div>
                    <div v-else class="riskcodePDF" @click="getDetailz2(scope.row,scope.$index)">0</div>
                  </template>
                </el-table-column>
                <el-table-column prop="socifee" label="统筹/附加金额" width="140">
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.socifee"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="selfamnt" label="自费金额" width="140">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>自费金额</span>
                  </template>
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.selfamnt"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="selfamnt" label="特殊自费" width="140">
                  <template slot="header">
                    <span>特殊自费</span>
                    <el-popover
                      placement="top-start"
                      title
                      width="200"
                      trigger="hover"
                      content="彩虹桥系列、长生福特殊自费金额"
                    >
                      <span slot="reference">
                        <img
                          src="../../assets/images/filing/warn.png"
                          alt
                          style="width:16px;height:16px"
                        />
                      </span>
                    </el-popover>
                  </template>
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.specselfamnt"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="sociflag" label="社保标志" width="120">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>社保标志</span>
                  </template>
                  <template slot-scope="scope">
                    <el-select v-model="scope.row.sociflag" placeholder="请选择">
                      <el-option label="有" value="1"></el-option>
                      <el-option label="无" value="0"></el-option>
                    </el-select>
                  </template>
                </el-table-column>
                <el-table-column prop="otherfee" label="其他补偿" width="140">
                  <template slot-scope="scope">
                    <el-input
                      v-model="scope.row.otherfee"
                      type="text"
                      @blur="getAll(scope.row)"
                      maxlength="13"
                      min="0"
                    ></el-input>
                  </template>
                </el-table-column>
                <el-table-column prop="refusemoney" label="扣费明细" width="140">
                  <template slot-scope="scope">
                    <p>{{scope.row.refusemoney}}</p>
                  </template>
                </el-table-column>
                <el-table-column prop="indemnity" label="收据计算金额" width="140">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>收据计算金额</span>
                  </template>
                  <template slot-scope="scope">
                    <p>{{scope.row.indemnity}}</p>
                    <!-- <el-input v-model="scope.row.indemnity"  type="number" @blur="twoNum(scope.row)" min="0"></el-input> -->
                  </template>
                </el-table-column>
                <el-table-column prop="operation" label="是否手术" width="120">
                  <template slot="header">
                    <span class="redStars">&nbsp;*&nbsp;</span>
                    <span>是否手术</span>
                  </template>
                  <template slot-scope="scope">
                    <el-select v-model="scope.row.operation" placeholder="请选择活动区域">
                      <el-option label="是" value="1"></el-option>
                      <el-option label="否" value="0"></el-option>
                    </el-select>
                  </template>
                </el-table-column>
                <el-table-column label="操作">
                  <template slot-scope="scope">
                    <el-button size="mini" @click="deletez2(scope.row,scope.$index)">删除</el-button>
                  </template>
                </el-table-column>
              </el-table>
              <div style="margin-top:10px;text-align:left">
                <el-pagination
                  style="display:inline-block;"
                  background
                  @size-change="handleSizeChangez2"
                  @current-change="handleCurrentChangez2"
                  :page-size="pagesizez2"
                  layout="prev, pager, next, jumper"
                  :total="commonHospital.length"
                ></el-pagination>
                <el-button
                  style="float: right;margin-right:30px;"
                  type="primary"
                  round
                  size="mini"
                  @click="addRowz2()"
                >增 加</el-button>
              </div>
            </div>
            <div style="text-align:right;margin:50px 28px 0 0;">
              <el-button type="primary" round @click="applyTask">保 存</el-button>
              <el-button type="primary" round @click="toAddFiling">返 回</el-button>
            </div>
          </div>
        </el-tab-pane>
        <el-tab-pane label="北京医疗单证" name="second">
          <beijing-dialog
            :bjObjForm.sync="bjObjForm"
            :isShowhospital.sync="isShowhospital"
            :key="timer"
          />
        </el-tab-pane>
      </el-tabs>
    </el-dialog>
    <Drag v-if="rgtobj != null" ref="dragno" :rgtobj="rgtobj"></Drag>
  </div>
</template>
<script>
import axios from "axios";
import BeijingDialog from "@/components/BeijingDialog";
import Drag from "../../components/dragCard";
import remarkDialog from "../../components/remarkDialog";
import { post, service } from "../../utils/request.js";
import {
  getCodeType,
  checkAudit,
  checkChange,
  nameTocode,
  nameTocode1,
  abc,
  abcd,
  abcde,
  abc1,
  abc2,
  checkdeff,
  checkLfor3,
  checkMfor,
  sumDays,
  checkLfor1,
  checkLfor2,
  accMul,
  numTwo
} from "../../utils/service.js";
export default {
  name: "ReviewInformation",
  components: {
    BeijingDialog,
    Drag,
    remarkDialog
  },
  directives: {
    "el-select-loadmore": {
      bind(el, binding) {
        const elss = el.querySelector(
          ".el-select-dropdown .el-select-dropdown__wrap"
        );
        elss.addEventListener("scroll", function() {
          const condition =
            this.scrollHeight - this.scrollTop - 1 <= this.clientHeight;
          if (condition) {
            binding.value();
          }
        });
      }
    }
  },
  data() {
    return {
      workListss: [],
      isshowremark: false, // 备注弹框
      linglist: [
        {
          id: "8",
          name: "投保人"
        },
        {
          id: "32",
          name: "被保人"
        }
      ],
      rgtclass: "柜面渠道",
      activeNames: "first",
      giveTypeList: [
        {
          code: "0",
          codename: "给付"
        },
        {
          code: "1",
          codename: "拒赔"
        },
        {
          code: "2",
          codename: "不承担"
        }
      ],
      bjObjForm: {},
      bJdialogVisible: false,
      dialogVisible: false,
      isShowhospital: false,
      getRowKeys(row) {
        // alert(row.contno)
        return row.contno;
      },
      remarkContents: "", // 就诊医院备注
      toShowss: false,
      startsecondflag: localStorage.getItem("startsecondflag"),
      expands: [],
      filterVal: "",
      filterValIll: "",
      countyStr: "",
      provinceStr: "",
      cityStr: "",
      // 保项计算信息PDF
      downloadpath: "",
      // ----枚举
      // 是否匹配理算
      deleteBnfContNo: "",
      lookTwo: false,
      isShowTwo: "",
      pagesize: 10,
      currpage: 1,
      isPipei1: false,
      isPipei2: false,
      isPipei3: false,
      isPipei4: false,
      bankFirst: "",
      candisable: true,
      isAudit: false,
      auditu: null,
      currentPage: 1,
      currentPage1: 1,
      currentPage2: 1,
      currentPage3: 1,
      auditorArr: [], // 审批人
      policydetail: [],
      isAuth: true,
      commonOutpatient: [], //普通门诊
      commonHospital: [], // 普通住院
      casebackList: [],
      cardTypeList: [], // 证件类型
      sexList: [], // 性别
      relations: [], // 关系
      reportchnlList: [], //报案渠道
      llclaimtypeList: [], // 理赔类型'
      accidenttypeList: [], //出险类型
      accnatureList: [], // 事故地点性质
      hospitalList: [], // 医院
      diseaseList: [], // 疾病类型
      accReasonList: [], //事故原因
      shoushangList: [], //受伤程度
      // chuxianResult: [], //出险结果
      llclaimconclusionList: [], // 审核结论
      llprotestreasonList: [], // 拒赔原因
      reasonswithdrawalList: [], // 撤件原因
      provinceList: [], //省
      cityList: [], //市
      areaList: [], //区
      cityList1: [],
      cityList111: [],
      newcitylist1: [],
      areaList1: [],
      newarealist1: [],
      // dianobasisList: [], //诊断依据
      // resource: [],
      // resource1: [],
      // resource2: [],
      axiosList: [],
      getRescode: [], // 获取理赔类型
      workList: [], //职业
      diagcodeList: [], // 诊断代码
      illnessList: [], //重疾代码
      sFlag: true,
      value: "",
      tableMes: [],
      checkList: [],
      personalData: [],
      accountList: [],
      listForm: {
        accountname: "",
        accountpername: ""
      },
      relationId: "",
      groupaccountid: "",
      timer: "",
      activeStep: 0,
      btnArr: [
        "出险人信息",
        "保单信息查询",
        "既往赔案查询",
        "保全记录",
        "立案申请信息",
        "出险信息",
        "申请人信息",
        "领款人信息",
        "诊断代码",
        "伤残代码",
        "手术代码",

        // "赔案计算信息",
        // "保单计算信息",
        // "保项计算信息",
        "审核管理"
      ],
      centerDialogVisible: false,
      dialogTableVisible: false,
      form: {
        name: "",
        region: "",
        date1: "",
        date2: "",
        delivery: false,
        type: [],
        resource: "",
        desc: ""
      },
      riskResultList: [],
      activeName: ["1", "2", "3", "4", "5", "6", "17"],
      labelPosition: "right",
      topLabelPosition: "top",
      isbox: true,
      style1: {
        margin: "0 0 0 15px"
      },
      isbox1: true,
      style2: {
        margin: "0 0 0 15px"
      },
      active: "first",
      activeR: "one",
      tableData: [],
      tableData1: [],
      clmno: "",
      countData1: [],
      countData2: [],
      countData3: [],
      countData4: [],
      countData4Copy: [],
      dangerperInfor: {},
      initApplicationInfor: {},
      dangerInfor: {
        // accidenttype:'',
        directpay: "",
        // accidentdate:'',
        // accreason:'',
        // accdegree:''

        getRescode: []
      },
      getRescode: [],
      applicationInfor: {},
      drawMoneyInfor: {},
      policyArr1: [],
      policyArr2: [],
      policyArr3: [],
      getJZS: [], // 疾病，诊断，手术
      getZG: [], // 重疾
      getGZ: [], // 骨折
      dialogFormVisible: false,
      dialogFormPublic: false,
      remarkTableData: [],
      conNum: null,
      benefitData: [],
      backdesc: "",
      // 审核
      auditObj: {
        auditconclusion: "", //审核结论
        auditidea: "", // 审核意见
        auditexplain: "",
        auditnopassreason: "", //拒赔撤件原因
        auditnopassdesc: "", // 拒赔撤件原因说明
        auditcancelreason: "",
        auditcanceldesc: "",
        llauditbackreason: "", //回退原因
        backdesc: "" //回退原因说明
      },
      diseaseListArr: [], //疾病代码
      diagnoseListArr: [], // 诊断代码
      operationListArr: [], // 手术
      operationList: [], // 手术名称
      fractureList: [], // 骨折部位
      fractureDList: [], // 骨折具体部位
      fractureDetailList: [], //骨折程度
      fractureListArr: [], //骨折
      illnessListArr: [], // 重疾
      oldObj: null,
      oldObj1: null,
      benefitArray: [],
      benefitPubArray: [],
      tBankList: [], // 总行
      bankAddressList: [], // 所在地区
      branchBankList: [],
      newbranchBankList: [],
      resource: [
        // 豁免原因
        {
          value: "1",
          text: "恶性肿瘤"
        },
        {
          value: "2",
          text: "非恶性肿瘤"
        }
      ],
      resource1: [
        {
          value: "3",
          text: "交通事故"
        },
        {
          value: "4",
          text: "非交通事故"
        }
      ],
      placeOptions: [
        {
          value: "1",
          label: "室内",
          children: [
            {
              value: "01",
              label: "厂房内"
            },
            {
              value: "02",
              label: "室内职场"
            },
            {
              value: "03",
              label: "住宅内"
            },
            {
              value: "04",
              label: "公共室内"
            },
            {
              value: "15",
              label: "电梯"
            }
          ]
        },
        {
          value: "2",
          label: "室外",
          children: [
            {
              value: "05",
              label: "工地"
            },
            {
              value: "06",
              label: "农田"
            },
            {
              value: "07",
              label: "山岭"
            },
            {
              value: "08",
              label: "公共室外"
            }
          ]
        },
        {
          value: "3",
          label: "道路上"
        },
        {
          value: "4",
          label: "交通工具",
          children: [
            {
              value: "09",
              label: "运营车辆内"
            },
            {
              value: "10",
              label: "私家车辆内"
            },
            {
              value: "11",
              label: "火车"
            },
            {
              value: "12",
              label: "飞机"
            },
            {
              value: "13",
              label: "轮船"
            },
            {
              value: "14",
              label: "非机动车"
            }
          ]
        },
        {
          value: "5",
          label: "其他"
        }
      ],
      itemBenefitData: {},
      emptyList: [
        {
          accname: "",
          accpername: null,
          bankaccno: null,
          bankprovince: null,
          bankcode: null,
          bankbranch: null,
          bankcodename: null,
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          contno: this.deleteBnfContNo
        }
      ],
      rules: {
        auditidea: [
          {
            required: true,
            message: "审核意见不能为空！",
            trigger: "blur"
          }
        ],
        auditexplain: [
          {
            required: true,
            message: "决定解释不能为空！",
            trigger: "blur"
          }
        ],
        auditconclusion: [
          {
            required: true,
            message: "审核结论不能为空！",
            trigger: "change"
          }
        ],
        // auditnopassreason: [
        //   {
        //     required: true,
        //     message: "原因不能为空！",
        //     trigger: ["blur", "change"]
        //   }
        // ],
        auditnopassreason: [
          {
            required: true,
            message: "拒赔原因不能为空！",
            trigger: "change"
          }
        ],
        auditcancelreason: [
          {
            required: true,
            message: "撤件原因不能为空！",
            trigger: "change"
          }
        ],
        auditnopassdesc: [
          {
            required: true,
            message: "原因说明不能为空！",
            trigger: "blur"
          }
        ],
        auditcanceldesc: [
          {
            required: true,
            message: "原因说明不能为空！",
            trigger: "blur"
          }
        ],
        llauditbackreason: [
          {
            required: true,
            message: "回退原因不能为空！",
            trigger: "change"
          }
        ],
        backdesc: [
          {
            required: true,
            message: "回退原因说明不能为空！",
            trigger: "blur"
          }
        ],
        getRescode: [
          {
            required: true,
            message: "理赔类型不能为空！",
            trigger: "blur"
          }
        ],
        accidenttype: [
          {
            required: true,
            message: "出险类型不能为空！",
            trigger: "change"
          }
        ],
        accidentdate: [
          {
            required: true,
            message: "出险日期不能为空！",
            trigger: "blur"
          }
        ],
        accreason: [
          {
            required: true,
            message: "事故原因不能为空！",
            trigger: "change"
          }
        ],
        accdegree: [
          {
            required: true,
            message: "意外事故受伤程度不能为空！",
            trigger: "change"
          }
        ],
        accprovince: [
          {
            required: true,
            message: "省不能为空！",
            trigger: "change"
          }
        ],
        acccity: [
          {
            required: true,
            message: "市不能为空！",
            trigger: "change"
          }
        ],
        acccounty: [
          {
            required: true,
            message: "区不能为空！",
            trigger: "change"
          }
        ],
        accaddress: [
          {
            required: true,
            message: "详细地址不能为空！",
            trigger: "blur"
          }
        ],
        // accidentcourse: [
        //   {
        //     required: true,
        //     message: "请选择出险结果",
        //     trigger: "change"
        //   }
        // ],
        accidentsite: [
          {
            required: true,
            message: "事故发生地点性质不能为空！",
            trigger: "change"
          }
        ],
        // accaddress: [
        //   {
        //     required: true,
        //     message: "请输入出险地点",
        //     trigger: ["blur", "change"]
        //   }
        // ],
        hospitalname: [
          {
            required: true,
            message: "就诊医院不能为空！",
            trigger: "change"
          }
        ],
        dianosedate: [
          {
            required: true,
            message: "确诊日期不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        dieasetype: [
          {
            required: true,
            message: "疾病分类不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        deathdate: [
          {
            required: true,
            message: "身故日期不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        pointbnf: [
          {
            required: true,
            message: "受益人是否指定不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        exempt: [
          {
            required: true,
            message: "申请豁免原因不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        // resource: [
        //   {
        //     required: true,
        //     message: "请选择申请豁免原因",
        //     trigger: ["blur", "change"]
        //   }
        // ],
        disabledrpt: [
          {
            required: true,
            message: "伤残鉴定报告不能为空！",
            trigger: ["blur", "change"]
          }
        ],
        occuprpt: [
          {
            required: true,
            message: "工伤报告不能为空！",
            trigger: ["blur", "change"]
          }
        ]
      },
      money: false,
      formData: {
        pagestart: 1,
        pageend: 100,
        likename: ""
      },
      formData1: {
        pagestart: 0,
        pageend: 100,
        likename: ""
      },
      formDataIll: {
        pagestart: 0,
        pageend: 100,
        likename: ""
      },
      hospitalListsaa: [],
      pageDataaa: {
        startPage: 0,
        endPage: 100
      },
      // ===================================
      zds: localStorage.getItem("ZB"),
      // criticalCode: "",
      hosState: "",
      pageDataz: {
        startPage: 0,
        endPage: 100
      },
      pageDataz1: {
        startPage: 0,
        endPage: 100
      },
      pageDataz2: {
        startPage: 0,
        endPage: 100
      },
      pageDataz3: {
        startPage: 0,
        endPage: 100
      },
      hospitalListsz: [],
      hospitalListsnamez: "",
      newhospitalListsz: [],

      hosState1: "",
      hospitalListsz1: "",
      hospitalListsnamez1: "",
      newhospitalListsz1: [],
      pagesizez1: 10,
      currentPagez1: 1,
      pagesizez2: 10,
      currentPagez2: 1,
      pagesizez3: 10,
      currentPagez3: 1,
      pagesizez4: 10,
      currentPagez4: 1,
      mainData1: null,
      mainData2: null,
      dialogVisible: false,
      medicalList: [],
      getNumList: [],
      fyxLists: [],
      fyDetailList1: [],
      newfyDetailList1: [],
      fyListCode: "",
      kyListCode: "",
      lastTask: "",

      koufeiTypes: [], // 扣费类型
      // 显示代码+名称
      koufeiReason: [], // 扣费原因类型
      commonOutpatient: [], //普通门诊
      kfDetail: [], // 扣费明细
      commonHospital: [], // 普通住院
      fyDetail: [], // 费用明细
      inhospital: null, // 入院日期
      hospitalName: null, // 医院名称
      outhospital: null, //出院日期
      death: null, //身故日期
      accent: null, //出险日期
      ordTime: null, //普通病房天数
      koufeiLists: [],
      newkoufeiLists: [],
      realDate: [],
      fyname: "",
      fycode: "",
      fyStatez: "",
      kfname: "",
      kfcode: "",
      kfStatez: "",
      fypageDataz2: {
        startPage: 0,
        endPage: 100
      },
      kfpageDataz2: {
        startPage: 0,
        endPage: 100
      },
      medicineflag: "",
      isContractState: "",
      isContractStates: "",
      rgtobj: null, // 微信框
      branchBankListss: []
    };
  },
  inject: ["reload"],
  created() {
    this.initBtn();
    // this.getCodeList();
    // this.rgtno = this.$route.query.rgtno;
    this.rgtno = JSON.parse(this.$route.params.dataOfTable).rgtno;
    this.customerno = JSON.parse(this.$route.params.dataOfTable).customerno;
    this.medicineflag =
      JSON.parse(this.$route.params.dataOfTable).medicineflag || "";
    console.log("aaa", this.medicineflag);
    console.log("zzs", this.zds);

    // this.customerno = this.$route.query.customerno;
  },
  mounted() {
    this.$watermark.set(
      localStorage.getItem("userCode"),
      localStorage.getItem("userName")
    );
    this.queryTranNo();
    setTimeout(() => {
      if (this.rgtobj != null) {
        this.$refs.dragno.queryRegisterRelation();
      }
    }, 1000);
    this.bjObjForm = {
      operator: localStorage.getItem("userCode"),
      mngcom: localStorage.getItem("comCode"),
      customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
      rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
      hospitalname: this.dangerInfor.hospitalname
    };
    this.buttonCheck();
    this.queryButtonCheck();

    this.koufeiReason = getCodeType("deductionReason");
    window.addEventListener("scroll", this.handleScroll1, true);
    // this.riskResultList = riskResult.bodys;
    this.cardTypeList = getCodeType("llidtype"); // 证件类型
    this.sexList = getCodeType("llsex"); // 性别
    console.log("sss", this.sexList);
    this.accidenttypeList = getCodeType("accidenttype"); // 出险类型
    this.shoushangList = getCodeType("accdegree"); // 受伤程度
    this.accReasonList = getCodeType("accreason"); // 事故原因
    this.relations = getCodeType("bnfRelationToInsured"); // 申请人与出险人关系
    this.reportchnlList = getCodeType("reportchnl"); // 报案渠道
    // this.chuxianResult = getCodeType("accresult"); // 出险结果
    this.llclaimtypeList = getCodeType("llclaimtype"); // 理赔类型
    this.accnatureList = getCodeType("accnature"); // 事故地点性质
    this.diseaseList = getCodeType("dieasetype"); // 疾病分类
    this.dianobasisList = getCodeType("dianobasis"); // 诊断依据
    this.llclaimconclusionList = getCodeType("llclaimconclusion"); // 审核结论
    this.llprotestreasonList = getCodeType("llprotestreason"); // 拒赔原因
    this.reasonswithdrawalList = getCodeType("reasonswithdrawal"); //撤件
    this.backReason = getCodeType("llbackreason"); // 回退原因
    this.workList = JSON.parse(localStorage.getItem("workcodeList")); //职业类型
    // this.getRiskRes(this.formData); //出险结果
    // this.diagcodeList = JSON.parse(localStorage.getItem("zhengduanList")); // 诊断代码
    // this.getDiagnosis(this.formData1); // 诊断代码
    this.operationList = getCodeType("operationcode"); //手术代码
    this.disabilityList = JSON.parse(localStorage.getItem("disabilityList")); // 伤残代码\
    this.getSheng();
    this.initData1();
    this.initData();
    this.initInfor();
    this.getLipei();
    // this.getAuditList();
    // this.getMsg();
    this.getYi();
    this.toShowTwo();
    this.getBenefitInfo();
    this.getHeadBank();
    this.getBankAddress();
    // this.getCityCode();
    // this.getcountyCode()
    this.searchAudit();
    this.initList();
    this.getHospitalsaa();
    this.getCupationss(); // 领款人职业
    this.getBanchBankss();
    // Bus.$on("bJdialogVisible", bJdialogVisible => {
    //   this.bJdialogVisible = bJdialogVisible;
    // });
  },
  beforeDestroy() {
    this.$store.dispatch("titleshow", "");
    window.removeEventListener("scroll", this.handleScroll1, true);
  },
  watch: {
    "dangerInfor.accprovince": function(value) {
      if (value === "999999") {
        this.cityList = null;
        this.areaList = null;
      }
    }
  },
  methods: {
    getBanchBankss(key1, key2) {
      // if (key1 && key2) {
      // this.getBankAddress();
      setTimeout(() => {
        post(service.queryTbanklocations, {
          bodys: {
            bankid: this.drawMoneyInfor.headbankname,
            standardareasid: this.drawMoneyInfor.province
          }
        }).then(res => {
          if (res.data.header.code === "200") {
            this.branchBankListss = res.data.bodys;
            // this.objForm.bankname = "";
          }
        });
      }, 1000);

      // }
    },
    getCupationss() {
      setTimeout(() => {
        post(service.occupation, {
          // this.objForm.profession
          likename: "",
          pageend: 800,
          pagestart: 0
        }).then(res => {
          const _res1 = res.data.bodys;
          this.workListss = [...this.workListss, ..._res1];
        });
      }, 500);
    },
    // ====备注信息弹框=====
    changeisshow(event) {
      this.isshowremark = event;
    },
    isShowRemark() {
      this.isshowremark = true;
    },
    // ====备注信息弹框End=====
    noticepdfprint() {
      if (this.auditObj.auditconclusion == "5") {
        post(service.noticepdfprint, {
          rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          noticeno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          printtype: "06"
        }).then(res => {
          if (res.data.pdflist) {
            window.open(res.data.pdflist[0].pdfurl, "_blank");
          } else {
            this.$message.error("未查询到预览PDF路径！");
          }
        });
      } else {
        post(service.noticepdfprint, {
          rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          noticeno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          printtype: "05"
        }).then(res => {
          if (res.data.pdflist) {
            window.open(res.data.pdflist[0].pdfurl, "_blank");
          } else {
            this.$message.error("未查询到预览PDF路径！");
          }
        });
      }
    },
    // 微信框
    queryTranNo() {
      post(service.queryTranNo, {
        bodys: {
          rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        // console.log("ZZZZA",res)
        this.rgtobj = res.data.bodys.rgtobj;
        if (res.data.bodys.rgtclass == "") {
          this.rgtclass = "柜面渠道";
        } else if (res.data.bodys.rgtclass == "02") {
          this.rgtclass = "柜面渠道";
        } else if (res.data.bodys.rgtclass == "01") {
          this.rgtclass = "微信渠道";
        } else if (res.data.bodys.rgtclass == "03") {
          this.rgtclass = "电话中心渠道";
        }
        // console.log("ZZZZA",this.rgtobj)
      });
    },
    // 合同处理按钮控制是否置灰
    queryButtonCheck() {
      post(service.contDealButton, {
        bodys: {
          customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        console.log("res", res);
        if (res.data.bodys == true) {
          this.isContractStates = true;
        } else if (res.data.bodys == false) {
          this.isContractStates = false;
        }
      });
    },
    // 根据合同处理控制受益人分配按钮是否置灰
    buttonCheck() {
      post(service.buttonCheck, {
        bodys: {
          customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.bodys == true) {
          this.isContractState = true;
        } else if (res.data.bodys == false) {
          this.isContractState = false;
        }
      });
    },
    handleScroll1() {
      let lOne = document.getElementById("0");
      let lSecnd = document.getElementById("1");
      let lThree = document.getElementById("2");
      let lFour = document.getElementById("3");
      let lFive = document.getElementById("4");
      let lSix = document.getElementById("5");
      let lSeven = document.getElementById("6");
      let lEight = document.getElementById("7");
      let lNine = document.getElementById("8");
      let lTen = document.getElementById("9");
      let lEleven = document.getElementById("10");
      let lTwelve = document.getElementById("11");
      let dom1 = this.$refs.reviewInformation.parentElement;
      if (lOne.offsetTop - dom1.scrollTop >= 60) {
        this.activeStep = 0;
      } else if (
        lSecnd.offsetTop - dom1.scrollTop <= 110 &&
        lSecnd.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 1;
      } else if (
        lThree.offsetTop - dom1.scrollTop <= 110 &&
        lThree.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 2;
      } else if (
        lFour.offsetTop - dom1.scrollTop <= 110 &&
        lFour.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 3;
      } else if (
        lFive.offsetTop - dom1.scrollTop <= 110 &&
        lFive.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 4;
      } else if (
        lSix.offsetTop - dom1.scrollTop <= 110 &&
        lSix.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 5;
      } else if (
        lSeven.offsetTop - dom1.scrollTop <= 110 &&
        lSeven.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 6;
      } else if (
        lEight.offsetTop - dom1.scrollTop <= 110 &&
        lEight.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 7;
      } else if (
        lNine.offsetTop - dom1.scrollTop <= 110 &&
        lNine.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 8;
      } else if (
        lTen.offsetTop - dom1.scrollTop <= 110 &&
        lTen.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 9;
      } else if (
        lEleven.offsetTop - dom1.scrollTop <= 110 &&
        lEleven.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 10;
      } else if (
        lTwelve.offsetTop - dom1.scrollTop <= 110 &&
        lTwelve.offsetTop - dom1.scrollTop >= 10
      ) {
        this.activeStep = 11;
      }
    },
    initfracture(data) {
      post(service.ldfracture, {
        code: "",
        likename: "",
        pagestart: 0,
        pageend: 100
      }).then(res => {
        const _res1 = res.data.bodys;
        this.fractureList = _res1;
        console.log("FFFFF", this.fractureList);
      });
    },
    initfracture11(data) {},
    initIll() {
      this.formDataIll.likename = "";
      this.formDataIll.pagestart = 0;
      this.filterValIll = "";
      post(service.ldcritical, this.formDataIll).then(res => {
        const _res1 = res.data.bodys;
        this.illnessList = _res1;
      });
    },
    loadmoreIll() {
      this.formDataIll.pagestart += 100;
      if (this.filterValIll) {
        this.formDataIll.likename = this.filterValIll;
      }
      post(service.ldcritical, this.formDataIll).then(res => {
        const _res1 = res.data.bodys;
        this.illnessList = [...this.illnessList, ..._res1];
      });
    },
    filteredIllness(val) {
      this.filterValIll = val;
      if (val) {
        let illData = {
          pagestart: 0,
          pageend: 100,
          likename: val
        };
        post(service.ldcritical, illData).then(res => {
          const _res1 = res.data.bodys;
          this.illnessList = _res1;
        });
      }
    },
    changIllnessname(data) {
      this.initIll();
      data.bigsource = abc(data.criticalname, this.illnessList);
      data.smallsource = abcd(data.criticalname, this.illnessList);
      data.criticalcode = abcde(data.criticalname, this.illnessList);
      // this.criticalCode = data.criticalcode;
    },
    changFracturename(data) {
      this.$forceUpdate();
      data.fracturedetailname = "";
      data.fracturecode = abc1(data.fracturename, this.fractureList);
      console.log(data.fracturecode);
      post(service.ldfracture, {
        code: data.fracturecode,
        likename: "",
        pagestart: 0,
        pageend: 100
      }).then(res => {
        const _res1 = res.data.bodys;
        this.fractureDList = _res1;
      });
    },
    changFractureDname(data) {
      data.fracturedetailcode = abc2(
        data.fracturedetailname,
        this.fractureDList
      );
      post(service.ldfracture, {
        code: data.fracturecode,
        likename: data.fracturedetailcode,
        pagestart: 0,
        pageend: 100
      }).then(res => {
        const _res1 = res.data.bodys;
        this.fractureDetailList = _res1;
      });
      console.log(data.fracturedetailcode);
    },
    init() {
      this.formData1.likename = "";
      this.formData1.pagestart = 0;
      this.filterVal = "";
      // this.getDiagnosis(this.formData1)
      post(service.lldiagcode, this.formData1).then(res => {
        const _res1 = res.data.bodys;
        this.diagcodeList = _res1;
      });
    },
    //疾病名称select初始化
    filtered(val) {
      console.log(val);
      this.filterVal = val;
      if (val) {
        let formdata = {
          pagestart: 0,
          pageend: 100,
          likename: val,
          code: ""
        };
        post(service.lldiagcode, formdata).then(res => {
          const _res1 = res.data.bodys;
          this.diagcodeList = _res1;
        });
      }
    },
    moneyChek(value) {
      if (value) {
        var reg = /^\d+$|^\d*\.\d+$/g;
        if (!reg.test(value)) {
          this.$message.error("只能填写数字！");
        } else {
          if (value.substr(0, 1) === "." || value.substr(-1, 1) === ".") {
            this.$message.error("只能填写数字！");
          } else {
            var amtreg = /^(\d+)(.\d{0,2})?$/;
            if (!amtreg.test(value)) {
              this.$message.error("最多支持两位小数！");
            }
          }
        }
      }
    },
    // 受益人分配更改被保险人关系
    toChangeRelation(bodys, index) {
      post(service.queryChangeBnf, {
        bodys
      }).then(res => {
        // this.itemBenefitData = {};
        this.itemBenefitData = res.data.bodys;
        this.benefitArray[index] = this.itemBenefitData;
        for (var key = 0; key < this.benefitArray.length; key++) {
          if (index === key) {
            this.benefitArray.splice(key, 1);
            this.benefitArray[key] = this.itemBenefitData;
          }
        }
      });
    },
    changeAccname(bodys, index) {
      post(service.fuzzyQueryAccount, {
        bodys: {
          accname: bodys.accname
        }
      }).then(res => {
        console.log(res.data.bodys[0]);
        this.benefitPubArray = res.data.bodys;
        this.groupaccountid = res.data.bodys[0].groupaccountid;
        this.getBanchPubBank();
        // this.getBranchBank();
      });
    },
    initBtn() {
      post(service.queryAuth, {
        bodys: {
          operator: localStorage.getItem("userCode"),
          auth: "06"
        }
      }).then(res => {
        if (res.data.headers.code === "200" && res.data.headers.success) {
          if (res.data.bodys.authcode === "1") {
            this.isAuth = false;
          } else {
            this.isAuth = true;
          }
        }
      });
    },
    changeAcc() {
      this.dangerInfor.exempt = "";
    },
    getBenfit(row) {
      // debugger;

      this.deleteBnfContNo = row.contno;

      post(service.queryClaimBnf, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          contno: row.contno
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.benefitArray = res.data.bodys;
          // for (let key in this.benefitArray) {
          //   // if (
          //   //   this.benefitArray[key].bnflot
          //   // ) {
          //   this.benefitArray[key].bnflot = 100;
          //   // }
          // }
          this.conNum = row.contno;
          setTimeout(() => {
            this.getCity();
            this.getCountry();
            this.getBanchData();
            this.getHeadBank();
          }, 1000);
        }
      });
    },
    getPubBenfit(row) {
      this.deleteBnfContNo = row.contno;
      post(service.queryGroupBnf, {
        bodys: {
          contno: row.contno
        }
      }).then(res => {
        if (res.data.headers.code == "200") {
          // console.log(res.data.bodys.length)
          if (res.data.bodys.length == 0) {
            // this.benefitPubArray.push({
            //   accname: "",
            //   accpername: null,
            //   bankaccno: null,
            //   bankprovince: null,
            //   bankcode: null,
            //   bankbranch: null,
            //   bankcodename: null,
            //   clmno: JSON.parse(this.$route.params.dataOfTable).caseno,
            //   contno: this.deleteBnfContNo
            // });
            this.benefitPubArray = this.emptyList;
            this.emptyList[0].accname = "";
            this.getBanchPubBank();
            this.getBranchBank();
            console.log(this.benefitPubArray);
          } else {
            this.benefitPubArray = res.data.bodys;
            this.relationId = res.data.bodys[0].relationId;
            this.groupaccountid = res.data.bodys[0].groupaccountid;
            setTimeout(() => {
              this.getBanchPubBank();
              this.getBranchBank();
            }, 1000);
          }
        }
      });
    },
    addKeppBtn() {},
    handleSizeChange(val) {
      this.pagesize = val;
    },
    handleCurrentChange(val) {
      this.currpage = val;
    },

    currentChange1: function(page) {
      this.currentPage1 = page;
    },
    currentChange2: function(page) {
      this.currentPage2 = page;
    },
    currentChange3: function(page) {
      this.currentPage3 = page;
    },
    indexMethod1(index) {
      return index + 1 + (this.currentPage1 - 1) * 10;
    },
    indexMethod2(index) {
      return index + 1 + (this.currentPage2 - 1) * 10;
    },
    indexMethod3(index) {
      return index + 1 + (this.currentPage3 - 1) * 10;
    },

    // 获取总行
    getHeadBank() {
      post(service.tBank, {
        bodys: {}
      }).then(res => {
        if (res.data.header.code === "200") {
          this.tBankList = res.data.bodys;
        }
      });
    },
    // 银行所在地区
    getBankAddress() {
      post(service.queryStand, {
        bodys: {}
      }).then(res => {
        if (res.data.header.code === "200") {
          this.bankAddressList = res.data.bodys;
        }
      });
    },
    // 银行支行
    getBanchData() {
      for (let key = 0; key < this.benefitArray.length; key++) {
        if (
          this.benefitArray[key].bankprovince &&
          this.benefitArray[key].bankcode
        ) {
          post(service.queryTbanklocations, {
            bodys: {
              bankid: this.benefitArray[key].bankcode,
              standardareasid: this.benefitArray[key].bankprovince
            }
          }).then(res => {
            this.branchBankList = res.data.bodys;
            this.newbranchBankList[key] = res.data.bodys;
          });
        }
      }
    },
    // 银行支行
    getBanchBank(key) {
      key.bankbranch = null;
      if (key.bankcode && key.bankprovince) {
        post(service.queryTbanklocations, {
          bodys: {
            bankid: key.bankcode,
            standardareasid: key.bankprovince
          }
        }).then(res => {
          if (res.data.header.code === "200") {
            this.branchBankList = res.data.bodys;
            for (var i = 0; i < this.benefitArray.length; i++) {
              if (
                key.bankprovince == this.benefitArray[i].bankprovince &&
                key.bankcode == this.benefitArray[i].bankcode
              ) {
                this.newbranchBankList.push(this.branchBankList);
                this.newbranchBankList[i] = res.data.bodys;
              }
            }
          }
        });
      }
    },
    // 对公
    getBanchPubBank(key1, key2) {
      post(service.queryTbanklocations, {
        bodys: {
          bankid: this.benefitPubArray[0].bankcode,
          standardareasid: this.benefitPubArray[0].bankprovince
        }
      }).then(res => {
        if (res.data.header.code === "200") {
          this.branchBankList = res.data.bodys;
          // this.listForm2.bankbranch = "";
        }
      });
    },
    //对公银行支行
    getBranchBank() {
      if (this.benefitPubArray[0].bankbranch) {
        post(service.queryTbanklocations, {
          bodys: {
            bankid: this.benefitPubArray[0].bankcode,
            standardareasid: this.benefitPubArray[0].bankprovince
          }
        }).then(res => {
          if (res.data.header.code === "200") {
            this.branchBankList = res.data.bodys;
          }
        });
      }
    },

    initList() {
      post(service.compAccountQuery, {
        bodys: this.listForm
      })
        .then(result => {
          if (result.data.headers.code === "200") {
            this.accountList = result.data.bodys.rows;
          }
        })
        .catch(error => {});
    },
    benefitF() {
      //  console.log(this.dangerInfor.directpay)
      // 受益人分配
      if (this.dangerInfor.directpay == "0") {
        this.dialogFormVisible = true;
      } else {
        this.dialogFormPublic = true;
        this.initList();
      }
      // 刷新未分配为已分配
      this.getBenefitInfo();
    },

    //删除受益人
    deleteData(index) {
      this.benefitArray.splice(index, 1);
    },

    addData() {
      this.benefitArray.push({
        name: null,
        idtype: "1",
        idno: null,
        relationtoinsured: null,
        bnflot: 100,
        payeename: null,
        bankaccno: null,
        bankprovince: null,
        bankcode: null,
        bankbranch: null,
        occupation: null,
        annualincome: null,
        phone: null,
        addressprovince: null,
        addresscity: null,
        addressarea: null,
        addressdetail: null,
        workunit: null,
        workaddress: null,
        clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        contno: this.deleteBnfContNo
      });
    },
    savePubBenefit() {
      console.log(this.benefitPubArray);
      if (this.benefitPubArray[0].accname == "") {
        this.$message.error("对公账户不能为空！");
      } else {
        post(service.saveGroupBnf, {
          bodys: {
            contno: this.deleteBnfContNo,
            groupaccountid: this.groupaccountid,
            operator: localStorage.getItem("userCode"),
            clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
            relationid: this.relationId
          }
        })
          .then(result => {
            if (result.data.headers.code === "200") {
              this.$message({
                message: result.data.headers.message,
                type: "success"
              });
              // 刷新未分配为已分配
              this.getBenefitInfo();
            }
          })
          .catch(error => {});
      }
    },

    // 保存受益人
    saveBenefit() {
      for (var key = 0; key < this.benefitArray.length; key++) {
        // 证件号码校验
        if (this.benefitArray[key].idtype == 1) {
          var reg1 = /^[0-9a-zA-Z]*$/g;
          if (!reg1.test(this.benefitArray[key].idno)) {
            this.$message.error("请输入合法的证件号码");
            this.benefitArray[key].idno = null;
            return;
          } else {
            if (!this.benefitArray[key].idno) {
              this.$message.error("请输入证件号码");
              return;
            } else if (
              this.benefitArray[key].idno.length != 15 &&
              this.benefitArray[key].idno.length != 18
            ) {
              this.$message.error("身份证只能为15位或18位");
              this.benefitArray[key].idno = null;
              return;
            } else {
              const reg = /(^[1-9]\d{5}(18|19|([23]\d))\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}(((0[13578]|10|12)(0[1-9]|[12]\d|3[01]))|((0[469]|11)(0[1-9]|[12]\d|30))|(02(0[1-9]|[12]\d)))\d{3}$)/;
              if (!reg.test(this.benefitArray[key].idno)) {
                this.$message.error("请输入合法的的身份证号码");
                this.benefitArray[key].idno = null;
                return;
              }
            }
          }
        } else if (
          this.benefitArray[key].idtype == 2 ||
          this.benefitArray[key].idtype == 7
        ) {
          var reg2 = /^[0-9a-zA-Z]*$/g;
          if (!reg2.test(this.benefitArray[key].idno)) {
            this.$message.error("请输入合法的证件号码");
            this.benefitArray[key].idno = null;
            return;
          } else if (this.benefitArray[key].idno.length < 6) {
            this.$message.error("护照的长度必须大于等于6");
            this.benefitArray[key].idno = null;
            return;
          }
        } else {
          var reg1 = /^[0-9a-zA-Z]*$/g;
          if (!reg1.test(this.benefitArray[key].idno)) {
            this.$message.error("请输入合法的证件号码");
            this.benefitArray[key].idno = null;
            return;
          }
        }
        // 联系方式校验
        if (!this.benefitArray[key].phone) {
        } else {
          if (this.benefitArray[key].phone.substr(0, 1) == 1) {
            if (this.benefitArray[key].phone.length != 11) {
              this.$message.error("联系方式不合法！");
              this.benefitArray[key].phone = null;
              return;
            }
          } else if (this.benefitArray[key].phone.length > 100) {
            this.$message.error("联系方式不合法！");
            this.benefitArray[key].phone = null;
            return;
          }
        }
        // 年收入校验
        if (!this.benefitArray[key].annualincome) {
        } else {
          var reg = /^\d+$|^\d*\.\d+$/g;
          if (!reg.test(this.benefitArray[key].annualincome)) {
            this.$message.error("只能填写数字！");
            this.benefitArray[key].annualincome = null;
            return false;
          } else {
            if (
              this.benefitArray[key].annualincome.substr(0, 1) === "." ||
              this.benefitArray[key].annualincome.substr(-1, 1) === "."
            ) {
              this.$message.error("只能填写数字！");
              this.benefitArray[key].annualincome = null;
              return false;
            } else {
              var amtreg = /^(\d+)(.\d{0,2})?$/;
              if (!amtreg.test(this.benefitArray[key].annualincome)) {
                this.$message.error("最多支持两位小数！");
                this.benefitArray[key].annualincome = null;
                return false;
              }
            }
          }
        }
        this.benefitArray[key].name = this.benefitArray[key].payeename;
      }
      if (this.benefitArray.length == 0) {
        post(service.deleteBnf, {
          bodys: {
            clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
            contno: this.deleteBnfContNo
          }
          // 1909120081801

          // JSON.parse(this.$route.params.dataOfTable).rgtno
        }).then(result => {
          if (result.data && result.data.headers.code == "200") {
            this.$message({
              message: result.data.headers.message,
              type: "success"
            });
            this.getBenefitInfo();
          } else if (result.data && result.data.headers.code == "500") {
            this.$message({
              message: result.data.headers.message,
              type: "error"
            });
          }
        });
      } else {
        post(service.saveBnf, {
          bodys: this.benefitArray
          // 1909120081801

          // JSON.parse(this.$route.params.dataOfTable).rgtno
        }).then(result => {
          if (result.data && result.data.headers.code == "200") {
            this.$message({
              message: result.data.headers.message,
              type: "success"
            });
            // 刷新未分配为已分配
            this.getBenefitInfo();
          } else if (result.data && result.data.headers.code == "500") {
            this.$message({
              message: result.data.headers.message,
              type: "error"
            });
          }
        });
      }
    },
    // 取消选择审核人
    // 获取医疗单证
    getYi() {
      // debugger;
      post(service.getcfee, {
        bodys: {
          // 1909120081801
          rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
          // JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(result => {
        if (result.data.headers.code == "200") {
          this.commonOutpatient = result.data.bodys.rows[0].MenZhen;
          this.commonHospital = result.data.bodys.rows[0].ZhuYuan;
        } else {
        }
      });
    },
    cSure(type) {
      var getRe;
      if (type == "1") {
        getRe = this.auditu;
      } else if (type == "2" || !this.auditu) {
        this.isAudit = false;
        return;
      }
      post(service.auditSure, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          operator: localStorage.getItem("userCode"),
          managecom: localStorage.getItem("comCode"),
          auditconclusion: this.auditObj.auditconclusion,
          audituser: getRe
        }
      })
        .then(res => {
          if (res.data.headers.code == "200") {
            this.$message({
              message: res.data.headers.message,
              type: "success"
            });
            this.isAudit = false;
            this.$router.push({ name: "WorkPool" });
          } else if (res.data.headers.code == "500") {
            this.$message({
              message: res.data.headers.message,
              type: "success"
            });
          }
          this.isAudit = false;
          this.$router.push({ name: "WorkPool" });
        })
        .catch();
    },

    // 获取审核意见
    // 获取审核人
    initData1() {
      post(service.queryLLCaseBack, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.header.code === "200") {
          this.casebackList = res.data.bodys;
        }
      });
    },
    getCityCode() {
      // debugger;
      if (this.dangerInfor.accprovince) {
        post(service.getCity, {
          bodys: {
            state: "city",
            code: this.dangerInfor.accprovince
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.cityList = res.data.bodys.rows;
          }
        });
        // this.changevince(this.dangerInfor.accprovince)
      }
    },
    getcountyCode() {
      if (this.dangerInfor.acccity) {
        // this.changaccity(this.dangerInfor.acccity)
        post(service.getCity, {
          bodys: {
            state: "country",
            code: this.dangerInfor.acccity
          }
        }).then(res => {
          if (res.data.headers.code === "200") {
            this.areaList = res.data.bodys.rows;
          }
        });
      }
    },
    getMsg() {
      let _this = this;
      post(service.getMsg, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          // debugger;
          if (res.data.bodys) {
            _this.auditObj.auditconclusion = res.data.bodys.auditconclusion
              ? res.data.bodys.auditconclusion
              : "";
            (_this.auditObj.auditidea = res.data.bodys.auditidea
              ? res.data.bodys.auditidea
              : ""), // 审核不通过原因
              (_this.auditObj.auditnopassreason = res.data.bodys
                .auditnopassreason
                ? res.data.bodys.auditnopassreason
                : ""), //审核不通过依据
              (_this.auditObj.auditnopassdesc = res.data.bodys.auditnopassdesc
                ? res.data.bodys.auditnopassdesc
                : ""), // 拒赔原因说明
              (_this.auditObj.auditcancelreason = res.data.bodys
                .auditcancelreason
                ? res.data.bodys.auditcancelreason
                : ""), //审核不通过依据
              (_this.auditObj.auditcanceldesc = res.data.bodys.auditcanceldesc
                ? res.data.bodys.auditcanceldesc
                : ""), // 拒赔原因说明
              (_this.auditObj.llauditbackreason = res.data.bodys
                .llauditbackreason
                ? res.data.bodys.llauditbackreason
                : ""),
              (_this.auditObj.backdesc = res.data.bodys.backdesc
                ? res.data.bodys.backdesc
                : "");
            _this.auditObj = res.data.bodys;
          }
        }
      });
    },
    // 根据诊断名称获取code
    changDiagnosticname(data) {
      this.init();
      data.diagnosticcode = nameTocode(data.diagnosticname, this.diagcodeList);
      for (var i = 0; i < this.diagnoseListArr.length; i++) {
        if (data.diagnosticname == this.diagnoseListArr[i].codename) {
          this.$message({
            message: "诊断名称不能重复",
            type: "error"
          });
          data.diagnosticname = null;
          data.diagnosticcode = null;
          return;
        }
        for (var key in this.diagnoseListArr) {
          if (data.diagnosticname == this.diagnoseListArr[key].code) {
            this.kyListCode = this.diagnoseListArr[key].code;
          }
        }
      }
    },
    //根据手术名称获取code
    changeOperationname(data) {
      data.operationcode = nameTocode(data.operationname, this.operationList);
    },
    // 根据伤残名称获取code
    changeDisabilityname(data) {
      data.disabilitycode = nameTocode(
        data.disabilityname,
        JSON.parse(localStorage.getItem("disabilityList"))
      );
      data.disabilitylevel = nameTocode1(
        data.disabilityname,
        JSON.parse(localStorage.getItem("disabilityList"))
      );
    },

    // 获取审核人
    getAuditList() {
      // 获取省
      post(service.getAuditor, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          auditname: "",
          operator: localStorage.getItem("userCode"),
          auditconclusion: this.auditObj.auditconclusion,
          reasoncode: this.getRescode ? this.getRescode : null
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.auditorArr = res.data.bodys;
        }
      });
    },
    // 删除省
    clearData() {
      this.dangerInfor.acccity = null;
      this.dangerInfor.acccounty = null;
      this.dangerInfor.accaddress = null;
    },
    // 删除市
    clearData1() {
      this.dangerInfor.acccounty = null;
      this.dangerInfor.accaddress = null;
    },

    clearData2() {
      this.dangerInfor.accaddress = null;
    },
    getSheng() {
      // 获取省
      post(service.getCity, {
        bodys: {
          state: "province",
          code: ""
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.provinceList = res.data.bodys.rows;
        }
      });
    },
    changevince(key) {
      post(service.getCity, {
        bodys: {
          state: "city",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.cityList = res.data.bodys.rows;
          this.dangerInfor.acccity = null;
          this.dangerInfor.acccounty = null;
          this.dangerInfor.accaddress = null;
        }
      });
    },
    getCity() {
      for (let key = 0; key < this.benefitArray.length; key++) {
        if (this.benefitArray[key].addressprovince) {
          post(service.getCity, {
            bodys: {
              state: "city",
              code: this.benefitArray[key].addressprovince
            }
          }).then(res => {
            if (res.data.headers.code === "200") {
              this.newcitylist1[key] = res.data.bodys.rows;
            }
          });
        }
      }
    },
    getCountry() {
      for (let key = 0; key < this.benefitArray.length; key++) {
        if (this.benefitArray[key].addresscity) {
          post(service.getCity, {
            bodys: {
              state: "country",
              code: this.benefitArray[key].addresscity
            }
          }).then(res => {
            if (res.data.headers.code === "200") {
              this.newarealist1[key] = res.data.bodys.rows;
            }
          });
        }
      }
    },
    areaFor() {},
    changevince1(key, a) {
      key.addresscity = "";
      key.addressarea = "";
      key.addressdetail = "";
      // 省获取市
      post(service.getCity, {
        bodys: {
          state: "city",
          code: key.addressprovince
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.cityList1 = res.data.bodys.rows;
          for (var i = 0; i < this.benefitArray.length; i++) {
            if (key.addressprovince === this.benefitArray[i].addressprovince) {
              this.newcitylist1.push(this.cityList1);
              this.newcitylist1[i] = res.data.bodys.rows;
            }
          }
          // key.addresscity = null;
          // key.addressarea = null;
          // key.addressdetail = null;
        }
      });
    },

    // 获取市==县
    changaccity1(key) {
      key.addressarea = "";
      key.addressdetail = "";
      post(service.getCity, {
        bodys: {
          state: "country",
          code: key.addresscity
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.areaList1 = res.data.bodys.rows;
          for (var i = 0; i < this.benefitArray.length; i++) {
            if (key.addresscity === this.benefitArray[i].addresscity) {
              this.newarealist1.push(this.areaList1);
              this.newarealist1[i] = res.data.bodys.rows;
            }
          }
        }
      });
    },
    changecountry(key) {
      key.addressdetail = "";
    },
    changaccity(key) {
      post(service.getCity, {
        bodys: {
          state: "country",
          code: key
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.areaList = res.data.bodys.rows;
          this.dangerInfor.acccounty = null;
          this.dangerInfor.accaddress = null;
        }
      });
    },

    //
    addItem(type) {
      // debugger;
      if (type === "1") {
        this.diseaseListArr.push({
          // 疾病
          disabilitycode: "",
          disabilityname: "",
          disabilitylevel: ""
        });
      } else if (type === "2") {
        this.diagnoseListArr.push({
          //诊断
          diagnosticcode: "",
          diagnosticname: ""
        });
      } else if (type === "3") {
        this.operationListArr.push({
          //手术
          operationcode: "",
          operationname: ""
        });
      } else if (type === "4") {
        this.fractureListArr.push({
          fracturename: "",
          fracturedetailname: "",
          fracturedetailcode: "",
          fracturelevel: ""
        });
      } else if (type === "5") {
        this.illnessListArr.push({
          criticalname: "",
          bigsource: "",
          smallsource: "",
          criticalcode: ""
        });
      }
    },
    deleteItem(type, index) {
      if (type === "1") {
        this.diseaseListArr.splice(index, 1);
      } else if (type === "2") {
        this.diagnoseListArr.splice(index, 1);
      } else if (type === "3") {
        this.operationListArr.splice(index, 1);
      } else if (type === "4") {
        this.fractureListArr.splice(index, 1);
      } else if (type === "5") {
        this.illnessListArr.splice(index, 1);
      }
    },
    getLipei() {
      post(service.getResaonCode, {
        bodys: {
          caseno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          customerno: JSON.parse(this.$route.params.dataOfTable).customerno
        }
      })
        .then(result => {
          if (result.data.headers.code === "200") {
            // _this.getRescode = result.data.bodys.rows
            this.getRescode = result.data.bodys.rows.map(e => {
              return e.reasoncode;
            });
            // // this.caseData = result.data.bodys;
          }
        })
        .catch();
      //获取理赔类型
    },
    // 理算匹配
    // matcAdjust() {
    //   post(service.adjustment, {
    //     bodys: {
    //       caseno: JSON.parse(this.$route.params.dataOfTable).caseno,
    //       accdate: this.dangerInfor.accidentdate,
    //       conttype: "1",
    //       usercode: localStorage.getItem("userCode"),
    //       comcode: localStorage.getItem("comCode")
    //     }
    //   }).catch();
    //   //获取理赔类型
    // },
    // 理算匹配
    matcAdjust() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        post(service.adjustment, {
          bodys: {
            caseno: JSON.parse(this.$route.params.dataOfTable).rgtno,
            accdate: this.dangerInfor.accidentdate,
            conttype: "1",
            usercode: localStorage.getItem("userCode"),
            comcode: localStorage.getItem("comCode")
          }
        })
          .then(
            result => {
              if (result.data.header.code === "200") {
                this.$message.success(result.data.header.message);
                this.initData();
                this.queryButtonCheck(); // 匹配理算成功后刷新合同处理按钮判断
                // setTimeout(() => {
                // this.reload();
                //   this.reload();
                // }, 1000);
              } else {
                this.$message.error(result.data.header.message);
              }
            },
            err => {}
          )
          .catch(error => {
            // loading.close();
          });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          center: true,
          type: "warning"
        })
          .then(() => {
            post(service.adjustment, {
              bodys: {
                caseno: JSON.parse(this.$route.params.dataOfTable).rgtno,
                accdate: this.dangerInfor.accidentdate,
                conttype: "1",
                usercode: localStorage.getItem("userCode"),
                comcode: localStorage.getItem("comCode")
              }
            })
              .then(
                result => {
                  if (result.data.header.code === "200") {
                    // this.$alert("匹配理算成功", {
                    //   confirmButtonText: "确定",
                    //   callback: action => {
                    //     this.initData();
                    //     this.isPipei = true;
                    //     // 理算成功后刷新
                    //   }
                    // });
                    this.$message.success(result.data.header.message);
                    this.initData();
                    this.queryButtonCheck(); // 匹配理算成功后刷新合同处理按钮判断
                  } else {
                    this.$message.error(result.data.header.message);
                  }
                },
                err => {}
              )
              .catch(error => {
                // loading.close();
              });
          })
          .catch(() => {});
      }
    },
    zydescription(row, expandedRows) {
      this.expands = [];
      if (expandedRows.length > 0) {
        row ? this.expands.push(row.contno) : "";
      }
      console.log(expandedRows);
      let vm = this;
      let bodys = {
        contno: row.contno
      };
      post(service.getPolicyDetail, {
        bodys
      }).then(res => {
        this.policydetail = res.data.bodys;
      });
      //   if(expandedRows.length>1){
      //   expandedRows.shift()
      // }
    },
    // 影像查询
    toInitImg() {
      let routeUrl = this.$router.resolve({
        name: "initImg",
        query: {
          rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      });
      window.open(routeUrl.href, "_blank");
    },
    revisionOfMedicalC() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      var obj = {
        // rgtno: this.$route.query.rgtno,
        rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
        hospitalcode: this.dangerInfor.hospitalname,
        remark: ""
      };
      if (this.oldObj == this.oldObj1) {
        if (localStorage.getItem("ZB") === "BJ") {
          this.$router.push({
            name: "BeijingBill",
            params: { dataOfTable: JSON.stringify(obj) }
          });
        } else {
          this.$router.push({
            name: "GeneralMedical",
            params: { dataOfTable: JSON.stringify(obj) }
          });
        }
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            if (localStorage.getItem("ZB") === "BJ") {
              this.$router.push({
                name: "BeijingBill",
                params: { dataOfTable: JSON.stringify(obj) }
              });
            } else {
              this.$router.push({
                name: "GeneralMedical",
                params: { dataOfTable: JSON.stringify(obj) }
              });
            }
          })
          .catch(() => {});
      }
    },
    //返回按钮点击事件

    // 获取基本信息
    //返回按钮点击事件
    goBack() {
      // debugger;
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        this.$router.go(-1);
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.go(-1);
          })
          .catch(() => {});
      }
    },
    changeAudit(data) {
      this.$refs.audiObj.clearValidate();
      // this.$refs.audiObj.clearValidate();
      this.$forceUpdate();
      // alert('111')
      if (data == "6") {
        (this.auditObj.auditnopassreason = ""), //拒赔，撤件
          (this.auditObj.auditnopassdesc = ""); // 拒赔，撤件原因
        (this.auditObj.auditcancelreason = ""), //拒赔，撤件
          (this.auditObj.auditcanceldesc = ""); // 拒赔，撤件原因
      } else if (data == "4") {
        (this.auditObj.llauditbackreason = ""), // 回退
          (this.auditObj.backdesc = ""); // 回退原因
        (this.auditObj.auditcancelreason = ""), //拒赔，撤件
          (this.auditObj.auditcanceldesc = ""); // 拒赔，撤件原因
      } else if (data == "5") {
        this.$refs.audiObj.clearValidate();
        (this.auditObj.llauditbackreason = ""), // 回退
          (this.auditObj.backdesc = ""); // 回退原因
        (this.auditObj.auditnopassreason = ""), //拒赔，撤件
          (this.auditObj.auditnopassdesc = ""); // 拒赔，撤件原因
      } else {
        (this.auditObj.auditnopassreason = ""), //拒赔，撤件
          (this.auditObj.auditnopassdesc = ""), // 拒赔，撤件原因
          (this.auditObj.llauditbackreason = ""), // 回退
          (this.auditObj.backdesc = ""); // 回退原因
        (this.auditObj.auditcancelreason = ""), //拒赔，撤件
          (this.auditObj.auditcanceldesc = ""); // 拒赔，撤件原因
      }

      // // this.auditObj.auditnopassreason = '';
      // // this.auditObj.auditnopassdesc = '';

      // this.$refs['auditnopassreason'].resetField();
      // this.$refs['auditnopassreason1'].resetField();
      // this.$refs['auditnopassdesc'].resetField();
      // this.$refs['auditnopassdesc1'].resetField();
      // this.$refs['audiObj'].clearValidate();
      // this.$refs.audiObj.clearValidate();
      // this.$refs['backdesc'].resetField();
      this.$forceUpdate();
    },
    audit() {
      this.$forceUpdate();
    },
    // 保存审核信息
    saveAudit() {
      this.getAuditList();
      var postObj = {
        clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        auditconclusion: this.auditObj.auditconclusion, //审核结论
        auditidea: this.auditObj.auditidea, // 审核意见
        auditexplain: this.auditObj.auditexplain, // 审核意见
        auditnopassreason: this.auditObj.auditnopassreason, //拒赔，撤件
        auditnopassdesc: this.auditObj.auditnopassdesc, // 拒赔，撤件原因
        auditcancelreason: this.auditObj.auditcancelreason, //拒赔，撤件
        auditcanceldesc: this.auditObj.auditcanceldesc, // 拒赔，撤件原因
        llauditbackreason: this.auditObj.llauditbackreason, // 回退
        backdesc: this.auditObj.backdesc, // 回退原因
        operate: "00",
        llclaimdetailschemas:
          this.countData4.length == 0 ||
          checkChange(this.countData4, JSON.parse(this.countData4Copy))
            .length == 0
            ? null
            : checkChange(this.countData4, JSON.parse(this.countData4Copy)),
        approveinfo:
          this.candisable == true
            ? null
            : {
                accidenttype: this.dangerInfor.accidenttype
                  ? this.dangerInfor.accidenttype
                  : null, //  出险类别
                directpay: this.dangerInfor.directpay
                  ? this.dangerInfor.directpay
                  : null, // 直付标志
                reasoncode: this.getRescode ? this.getRescode : null, // 理赔类型
                accidentdate: this.dangerInfor.accidentdate
                  ? this.dangerInfor.accidentdate
                  : null, // 出险日期
                accreason: this.dangerInfor.accreason
                  ? this.dangerInfor.accreason
                  : null, // 事故原因
                accdegree: this.dangerInfor.accdegree
                  ? this.dangerInfor.accdegree
                  : null, // 以为事故受伤程度
                // accidentcourse: this.dangerInfor.accidentcourse
                //   ? this.dangerInfor.accidentcourse
                //   : null, // 出险结果
                accidentsite: this.dangerInfor.accidentsite
                  ? this.dangerInfor.accidentsite
                  : null, // 事故地点发生性质
                accprovince: this.dangerInfor.accprovince
                  ? this.dangerInfor.accprovince
                  : null, // 出险地点省
                acccity: this.dangerInfor.acccity
                  ? this.dangerInfor.acccity
                  : null, // 出险地点市
                acccounty: this.dangerInfor.acccounty
                  ? this.dangerInfor.acccounty
                  : null, // 出险地点区
                accaddress: this.dangerInfor.accaddress
                  ? this.dangerInfor.accaddress
                  : null, // 详细地址
                hospitalname: this.dangerInfor.hospitalname
                  ? this.dangerInfor.hospitalname
                  : null, // 就诊医院
                hospitallesion: this.dangerInfor.hospitallesion
                  ? this.dangerInfor.hospitallesion
                  : null, // 病区
                hospitalbed: this.dangerInfor.hospitalbed
                  ? this.dangerInfor.hospitalbed
                  : null, // 床位
                // inhospitaldate: this.dangerInfor.inhospitaldate
                //   ? this.dangerInfor.inhospitaldate
                //   : null, //入院日期
                // outhospitaldate: this.dangerInfor.outhospitaldate
                //   ? this.dangerInfor.outhospitaldate
                //   : null, // 出院日期
                dianosedate: this.dangerInfor.dianosedate
                  ? this.dangerInfor.dianosedate
                  : null, //确诊日期
                // dieasetype: this.dangerInfor.dieasetype
                //   ? this.dangerInfor.dieasetype
                //   : null, // 疾病分类
                // dianobasis: this.dangerInfor.dianobasis
                //   ? this.dangerInfor.dianobasis
                //   : null, // 诊断依据
                deathdate: this.dangerInfor.deathdate
                  ? this.dangerInfor.deathdate
                  : null, //身故日期
                pointbnf: this.dangerInfor.pointbnf
                  ? this.dangerInfor.pointbnf
                  : null, // 受益人是否指定
                exempt: this.dangerInfor.exempt
                  ? this.dangerInfor.exempt
                  : null, // 豁免原因
                disabledrpt: this.dangerInfor.disabledrpt
                  ? this.dangerInfor.disabledrpt
                  : null, // 伤残鉴定报告
                occuprpt: this.dangerInfor.occuprpt
                  ? this.dangerInfor.occuprpt
                  : null // 工伤报告（失能鉴定、残疾证
              },
        diagnosticinfos:
          this.diagnoseListArr.length == 0 ? null : this.diagnoseListArr, //诊断代码
        operator: localStorage.getItem("userCode"),
        managecom: localStorage.getItem("comCode"),
        disabilityinfos:
          this.diseaseListArr.length == 0 ? null : this.diseaseListArr, //伤残代码
        operationinfos:
          this.operationListArr.length == 0 ? null : this.operationListArr, //手术代码
        fractureinfos:
          this.fractureListArr.length == 0 ? null : this.fractureListArr, //骨折代码
        criticalinfos:
          this.illnessListArr.length == 0 ? null : this.illnessListArr //重疾代码
      };

      // if (!checkAudit(postObj, this.auditObj.auditconclusion)) {
      post(service.postAudit, {
        bodys: postObj
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.$message({
            message: res.data.headers.message,
            type: "success"
          });
          this.reload();
          this.candisable = true;
          // this.$router.push({ name: "WorkPool" });
          // location.reload()
          //定义
          this.oldObj = JSON.stringify({
            diseaseListArr: this.diseaseListArr,
            diagnoseListArr: this.diagnoseListArr,
            operationListArr: this.operationListArr,
            dangerInfor: this.dangerInfor,
            auditObj: this.auditObj
          });
        } else if (res.data.headers.code === "500") {
          this.$message({
            message: res.data.headers.message,
            type: "error"
          });
        } else if (res.data.headers.code === "500") {
          this.$message({
            message: res.data.headers.message,
            type: "error"
          });
        }
      });
      // } else {
      //   this.$message({
      //     message: checkAudit(postObj, this.auditObj.auditconclusion),
      //     type: "error"
      //   });
      // }
    },
    dissaveAudit1() {
      if (localStorage.getItem("checkflag") == "0") {
        return true;
      }
      if (this.isAuth) {
        return true;
      }
    },
    saveAudit1() {
      this.getAuditList();
      var postObj = {
        clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        auditconclusion: this.auditObj.auditconclusion, //审核结论
        auditidea: this.auditObj.auditidea, // 审核意见
        auditexplain: this.auditObj.auditexplain, // 审核意见
        auditnopassreason: this.auditObj.auditnopassreason, //拒赔，撤件
        auditnopassdesc: this.auditObj.auditnopassdesc, // 拒赔，撤件原因
        auditcancelreason: this.auditObj.auditcancelreason, //拒赔，撤件
        auditcanceldesc: this.auditObj.auditcanceldesc, // 拒赔，撤件原因
        llauditbackreason: this.auditObj.llauditbackreason, // 回退
        backdesc: this.auditObj.backdesc, // 回退原因
        operate: "01",
        llclaimdetailschemas:
          this.countData4.length == 0 ||
          checkChange(this.countData4, JSON.parse(this.countData4Copy))
            .length == 0
            ? null
            : checkChange(this.countData4, JSON.parse(this.countData4Copy)),
        approveinfo:
          this.candisable == true
            ? null
            : {
                accidenttype: this.dangerInfor.accidenttype
                  ? this.dangerInfor.accidenttype
                  : null, //  出险类别
                directpay: this.dangerInfor.directpay
                  ? this.dangerInfor.directpay
                  : null, // 直付标志
                reasoncode: this.getRescode ? this.getRescode : null, // 理赔类型
                accidentdate: this.dangerInfor.accidentdate
                  ? this.dangerInfor.accidentdate
                  : null, // 出险日期
                accreason: this.dangerInfor.accreason
                  ? this.dangerInfor.accreason
                  : null, // 事故原因
                accdegree: this.dangerInfor.accdegree
                  ? this.dangerInfor.accdegree
                  : null, // 以为事故受伤程度
                // accidentcourse: this.dangerInfor.accidentcourse
                //   ? this.dangerInfor.accidentcourse
                //   : null, // 出险结果
                accidentsite: this.dangerInfor.accidentsite
                  ? this.dangerInfor.accidentsite
                  : null, // 事故地点发生性质
                accprovince: this.dangerInfor.accprovince
                  ? this.dangerInfor.accprovince
                  : null, // 出险地点省
                acccity: this.dangerInfor.acccity
                  ? this.dangerInfor.acccity
                  : null, // 出险地点市
                acccounty: this.dangerInfor.acccounty
                  ? this.dangerInfor.acccounty
                  : null, // 出险地点区
                accaddress: this.dangerInfor.accaddress
                  ? this.dangerInfor.accaddress
                  : null, // 详细地址
                hospitalname: this.dangerInfor.hospitalname
                  ? this.dangerInfor.hospitalname
                  : null, // 就诊医院
                hospitallesion: this.dangerInfor.hospitallesion
                  ? this.dangerInfor.hospitallesion
                  : null, // 病区
                hospitalbed: this.dangerInfor.hospitalbed
                  ? this.dangerInfor.hospitalbed
                  : null, // 床位
                // inhospitaldate: this.dangerInfor.inhospitaldate
                //   ? this.dangerInfor.inhospitaldate
                //   : null, //入院日期
                // outhospitaldate: this.dangerInfor.outhospitaldate
                //   ? this.dangerInfor.outhospitaldate
                //   : null, // 出院日期
                dianosedate: this.dangerInfor.dianosedate
                  ? this.dangerInfor.dianosedate
                  : null, //确诊日期
                // dieasetype: this.dangerInfor.dieasetype
                //   ? this.dangerInfor.dieasetype
                //   : null, // 疾病分类
                // dianobasis: this.dangerInfor.dianobasis
                //   ? this.dangerInfor.dianobasis
                //   : null, // 诊断依据
                deathdate: this.dangerInfor.deathdate
                  ? this.dangerInfor.deathdate
                  : null, //身故日期
                pointbnf: this.dangerInfor.pointbnf
                  ? this.dangerInfor.pointbnf
                  : null, // 受益人是否指定
                exempt: this.dangerInfor.exempt
                  ? this.dangerInfor.exempt
                  : null, // 豁免原因
                disabledrpt: this.dangerInfor.disabledrpt
                  ? this.dangerInfor.disabledrpt
                  : null, // 伤残鉴定报告
                occuprpt: this.dangerInfor.occuprpt
                  ? this.dangerInfor.occuprpt
                  : null // 工伤报告（失能鉴定、残疾证
              },
        diagnosticinfos:
          this.diagnoseListArr.length == 0 ? null : this.diagnoseListArr, //诊断代码
        operator: localStorage.getItem("userCode"),
        managecom: localStorage.getItem("comCode"),
        disabilityinfos:
          this.diseaseListArr.length == 0 ? null : this.diseaseListArr, //伤残代码
        operationinfos:
          this.operationListArr.length == 0 ? null : this.operationListArr, //手术代码
        fractureinfos:
          this.fractureListArr.length == 0 ? null : this.fractureListArr, //骨折代码
        criticalinfos:
          this.illnessListArr.length == 0 ? null : this.illnessListArr //重疾代码
      };
      // if (!checkAudit(postObj, this.auditObj.auditconclusion)) {
      post(service.postAudit, {
        bodys: postObj
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.candisable = true;
          this.insureAudit();
          // this.$message({
          //   message: res.data.headers.message,
          //   type: "success"
          // });
          // this.$router.push({ name: "WorkPool" });
          // location.reload()
        } else if (res.data.headers.code === "500") {
          this.$message({
            message: res.data.headers.message,
            type: "error"
          });
        } else if (res.data.headers.code === "500") {
          this.$message({
            message: res.data.headers.message,
            type: "error"
          });
        }
      });
      // } else {
      //   this.$message({
      //     message: checkAudit(postObj, this.auditObj.auditconclusion),
      //     type: "error"
      //   });
      // }
    },
    // 审核确认
    insureAudit() {
      // this.isAudit = true
      post(service.auditSure, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          operator: localStorage.getItem("userCode"),
          managecom: localStorage.getItem("comCode"),
          auditconclusion: this.auditObj.auditconclusion,
          audituser: localStorage.getItem("userCode")
        }
      })
        .then(res => {
          if (res.data.headers.code == 500) {
            this.$message({
              message: res.data.headers.message,
              type: "error"
            });
          } else if (
            res.data.headers.code == 200 &&
            res.data.headers.standbyflag1 == "00"
          ) {
            this.isAudit = true;
          } else if (
            res.data.headers.code == 200 &&
            res.data.headers.standbyflag1 != "00"
          ) {
            this.$message({
              message: res.data.headers.message,
              type: "success"
            });
            this.$router.push({ name: "WorkPool" });
          }
        })
        .catch();
    },

    // post("/audit/auditConfirm", {
    //   bodys: {
    //     clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
    //     auditconclusion: this.auditconclusion,
    //     audituser: this.audituser,
    //     operator: localStorage.getItem('userCode'),
    //     managecom: localStorage.getItem('comCode')
    //   }
    // }).then(res => {
    //   if (res.data.headers.code === "200") {
    //     this.codeData = res.data.bodys;
    //   }
    // });
    // 获取基本信息
    initInfor() {
      let _this = this;
      (_this.postArray = [
        {
          url: service.dangerperInfor, // 出险人信息
          params: {
            bodys: {
              rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.initApplicationInfor, // 立案申请信息
          params: {
            bodys: {
              rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.dangerInfor, //出险信息
          params: {
            bodys: {
              rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
              customerno: JSON.parse(this.$route.params.dataOfTable).customerno
            }
          }
        },
        {
          url: service.applicationInfor, // // 申请人信息
          params: {
            bodys: {
              rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.receviceperson, //领款人信息
          params: {
            bodys: {
              rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.lianPolicy, //
          params: {
            bodys: {
              customerno: JSON.parse(this.$route.params.dataOfTable).customerno
            }
          }
        },
        {
          url: service.lianJiwang, //
          params: {
            bodys: {
              customerno: JSON.parse(this.$route.params.dataOfTable).customerno
            }
          }
        },
        {
          url: service.lianBaoquan, //
          params: {
            bodys: {
              customerno: JSON.parse(this.$route.params.dataOfTable).customerno
            }
          }
        },
        {
          url: service.getquList,
          params: {
            bodys: {
              clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.getMsg,
          params: {
            bodys: {
              clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.queryCritical,
          params: {
            bodys: {
              clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        },
        {
          url: service.queryFracture,
          params: {
            bodys: {
              clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
            }
          }
        }
      ]),
        _this.postArray.forEach(postItem => {
          _this.axiosList.push(post(postItem.url, postItem.params));
        });
      axios.all(_this.axiosList).then(function(res) {
        _this.dangerperInfor = res[0].data.bodys; // 出险人信息
        _this.initApplicationInfor = res[1].data.bodys; // 立案申请信息
        // _this.initApplicationInfor.applydate = res[1].data.bodys.applydate
        _this.dangerInfor = res[2].data.bodys; // 出险信息

        _this.applicationInfor = res[3].data.bodys;
        // 申请人信息
        // _this.drawMoneyInfor = res[4].data.bodys;
        _this.drawMoneyInfor = res[4].data.bodys.rows[0];
        // 领款人信息

        // 审批管理
        _this.policyArr1 = res[5].data.bodys;
        _this.policyArr2 = res[6].data.bodys;
        _this.policyArr3 = res[7].data.bodys;
        _this.getCityCode();
        _this.getcountyCode();
        _this.getJZS = res[8].data.bodys;
        _this.getZG = res[10].data.bodys;
        _this.getGZ = res[11].data.bodys;
        if (_this.getJZS[0] != null) {
          for (var i = 0; i < _this.getJZS.length; i++) {
            if (
              _this.getJZS[i].defocode &&
              _this.getJZS[i].defocodename &&
              _this.getJZS[i].defograde
            ) {
              _this.diseaseListArr.push({
                disabilitycode: _this.getJZS[i].defocode,
                disabilityname: _this.getJZS[i].defocodename,
                disabilitylevel: _this.getJZS[i].defograde
              });
            }
            if (_this.getJZS[i].diagcode && _this.getJZS[i].diagcodename) {
              _this.diagnoseListArr.push({
                diagnosticcode: _this.getJZS[i].diagcode,
                diagnosticname: _this.getJZS[i].diagcodename
              }); //疾病代码
            }
            if (
              _this.getJZS[i].operationcode &&
              _this.getJZS[i].operationcodename
            ) {
              _this.operationListArr.push({
                operationcode: _this.getJZS[i].operationcode,
                operationname: _this.getJZS[i].operationcodename
              });
            }
          }
        }

        for (var i = 0; i < _this.getZG.length; i++) {
          if (
            _this.getZG[i].criticalname &&
            _this.getZG[i].bigsource &&
            _this.getZG[i].smallsource
          ) {
            console.log("1211");
            _this.illnessListArr.push({
              criticalname: _this.getZG[i].criticalname,
              criticalcode: _this.getZG[i].criticalcode,
              bigsource: _this.getZG[i].bigsource,
              smallsource: _this.getZG[i].smallsource
            });
          }
        }

        for (var i = 0; i < _this.getGZ.length; i++) {
          if (
            _this.getGZ[i].fracturename &&
            _this.getGZ[i].fracturedetailname &&
            _this.getGZ[i].fracturecode
          ) {
            _this.fractureListArr.push({
              fracturename: _this.getGZ[i].fracturename,
              fracturedetailname: _this.getGZ[i].fracturedetailname,
              fracturecode: _this.getGZ[i].fracturecode,
              fracturedetailcode: _this.getGZ[i].fracturedetailcode
            });
          }
        }
        if (res[9].data.headers.code === "200") {
          // debugger;
          if (res[9].data.bodys) {
            _this.auditObj.auditconclusion = res[9].data.bodys.auditconclusion
              ? res[9].data.bodys.auditconclusion
              : "";
            (_this.auditObj.auditidea = res[9].data.bodys.auditidea
              ? res[9].data.bodys.auditidea
              : ""), // 审核不通过原因
              (_this.auditObj.auditnopassreason = res[9].data.bodys
                .auditnopassreason
                ? res[9].data.bodys.auditnopassreason
                : ""), //审核不通过依据
              (_this.auditObj.auditnopassdesc = res[9].data.bodys
                .auditnopassdesc
                ? res[9].data.bodys.auditnopassdesc
                : ""), // 拒赔原因说明
              (_this.auditObj.auditcancelreason = res[9].data.bodys
                .auditcancelreason
                ? res[9].data.bodys.auditcancelreason
                : ""), //审核不通过依据
              (_this.auditObj.auditcanceldesc = res[9].data.bodys
                .auditcanceldesc
                ? res[9].data.bodys.auditcanceldesc
                : ""), // 拒赔原因说明
              (_this.auditObj.llauditbackreason = res[9].data.bodys
                .llauditbackreason
                ? res[9].data.bodys.llauditbackreason
                : ""),
              (_this.auditObj.backdesc = res[9].data.bodys.backdesc
                ? res[9].data.bodys.backdesc
                : "");
            _this.auditObj = res[9].data.bodys;
          }
        }
        // _this.auditObj=res[9].data.bodys;

        // _this.getMsg()

        _this.oldObj = JSON.stringify({
          diseaseListArr: _this.diseaseListArr,
          diagnoseListArr: _this.diagnoseListArr,
          operationListArr: _this.operationListArr,
          dangerInfor: _this.dangerInfor,
          auditObj: _this.auditObj
        });
      });
    },
    initData() {
      // 代码信息
      // post("/app/audit/queryCode", {
      //   bodys: {
      //     clmno: JSON.parse(_this.$route.params.dataOfTable).rgtno
      //   }
      // }).then(res => {
      //   if (res.data.headers.code === "200") {
      //     this.codeData = res.data.bodys;
      //   }
      // });

      // 赔案计算信息
      post(service.queryClaimInfo, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.countData1 = res.data.bodys;
          if (this.countData1 != "") {
            this.isPipei1 = true;
          }
        }
      });
      // 理赔类型计算类型
      post(service.queryClaimDutyKindInfo, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.countData2 = res.data.bodys;
          if (this.countData2 != "") {
            this.isPipei2 = true;
          }
        }
      });
      // 保单计算类型
      post(service.queryClaimPolicyInfo, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.countData3 = res.data.bodys;
          if (this.countData3 != "") {
            this.isPipei3 = true;
          }
        }
      });
      // 保项计算类型
      post(service.queryClaimDetailInfo, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.countData4 = res.data.bodys;
          this.countData4Copy = JSON.stringify(this.countData4);
          // this.getBenefitInfo();
          if (this.countData4 != "") {
            this.isPipei4 = true;
          }
        }
      });
    },

    // 北京
    goBj() {
      this.timer = new Date().getTime();
      this.bJdialogVisible = true;
      // if(this.$route.query.rgtno){
      //   this.bjObjForm={
      //   operator: localStorage.getItem("userCode"),
      //   mngcom: localStorage.getItem("comCode"),
      //   customerno: this.$route.query.customerno,
      //   rgtno:this.$route.query.rgtno,
      //   hospitalname:this.objForm.hospitalname
      // }
      // console.log(this.bjObjForm)
      // }else{
      //   console.log(this.objForm.rgtno)
      //   this.bjObjForm={
      //   operator: localStorage.getItem("userCode"),
      //   mngcom: localStorage.getItem("comCode"),
      //   customerno: this.$route.query.customerno,
      //   rgtno:this.objForm.rgtno,
      //   hospitalname:this.objForm.hospitalname
      // }
      // }
      console.log(JSON.parse(this.$route.params.dataOfTable).rgtno);
      this.bjObjForm = {
        operator: localStorage.getItem("userCode"),
        mngcom: localStorage.getItem("comCode"),
        customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
        rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        hospitalname: this.dangerInfor.hospitalname
      };
    },
    // 获取受益人分配信息
    getBenefitInfo() {
      post(service.queryClaimCont, {
        bodys: {
          customerno: JSON.parse(this.$route.params.dataOfTable).customerno, //客户号
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno //赔案号
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.benefitData = res.data.bodys;
        }
      });
    },
    impInfoChange() {
      this.candisable = false;
    },
    handleClick1(tab, event) {
      this.isbox1 = true;
      if (tab.index === "0") {
        this.style2 = "margin: 0 0 0 15px";
      }
      if (tab.index === "1") {
        this.style2 = "margin: 0 0 0 141px";
        // this.style1="transform: translateX(100%+15px)"
      }
      if (tab.index === "2") {
        this.style2 = "margin: 0 0 0 270px";
      }
      // if (tab.index === "3") {
      //   this.style1 = "margin: 0 0 0 333px";
      // }
    },
    handleClick(tab, event) {
      this.isbox = true;
      if (tab.index === "0") {
        this.style1 = "margin: 0 0 0 15px";
      }
      if (tab.index === "1") {
        this.style1 = "margin: 0 0 0 112px";
        // this.style1="transform: translateX(100%+15px)"
      }
      if (tab.index === "2") {
        this.style1 = "margin: 0 0 0 209px";
      }
      if (tab.index === "3") {
        this.style1 = "margin: 0 0 0 306px";
      }
      if (tab.index === "4") {
        this.style1 = "margin: 0 0 0 403px";
      }
      if (tab.index === "5") {
        this.style1 = "margin: 0 0 0 500px";
      }
    },
    jump(index) {
      if (index == "top") {
        document.getElementById(0).scrollIntoView();
        this.$store.dispatch("titleshow", "");
      } else {
        this.activeStep = index;
        this.$store.dispatch("titleshow", "true");
        setTimeout(() => {
          if (this.$store.getters.titleclose == "true") {
            document.getElementById(index).scrollIntoView();
          }
        }, 300);
      }
    },
    // 二核验证  isShowTwo
    toShowTwo() {
      post(service.checkoutsecond, {
        bodys: {
          // clmno: this.$route.query.clmno
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        this.isShowTwo = res.data.header.standbyflag2;
      });
    },
    // 发起二核
    toSecondary() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        this.$router.push({
          name: "Secondary",
          query: {
            clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
            customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
            accidenttype: this.dangerInfor.accidenttype
          }
        });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.push({
              name: "Secondary",
              query: {
                clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
                customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
                accidenttype: this.dangerInfor.accidenttype
              }
            });
          })
          .catch(() => {});
      }
    },
    toSameAccident() {
      // debugger;
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        // this.$router.go(-1);
        this.$router.push({
          name: "SameAccident",
          params: {
            dataOfTable: this.$route.params.dataOfTable
          }
        });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.push({
              name: "SameAccident",
              params: {
                dataOfTable: this.$route.params.dataOfTable
              }
            });
          })
          .catch(() => {});
      }
    },
    disExmption() {
      if (localStorage.getItem("exemptflag") == "0") {
        return true;
      }
    },
    toExemptionProcess() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        this.$router.push({
          name: "ExemptionProcess",
          query: { clmno: sessionStorage.getItem("caseno") }
        });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.push({
              name: "ExemptionProcess",
              query: { clmno: sessionStorage.getItem("caseno") }
            });
          })
          .catch(() => {});
      }
    },
    toContractProcess() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        this.$router.push({
          name: "ContractProcess",
          query: {
            clmno: sessionStorage.getItem("caseno"),
            customerno: sessionStorage.getItem("customerno")
          }
        });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.push({
              name: "ContractProcess",
              query: {
                clmno: sessionStorage.getItem("caseno"),
                customerno: sessionStorage.getItem("customerno")
              }
            });
          })
          .catch(() => {});
      }
    },
    //前往回退查询页面
    torRollBackMes() {
      this.$router.push({
        name: "RollbackMes",
        params: {
          dataOfTable: this.$route.params.dataOfTable
        }
      });
    },
    // 查看二核校验
    searchAudit() {
      post(service.secondSearch, {
        bodys: {
          caseno: JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(res => {
        if (res.data.bodys.length == 0) {
          this.lookTwo = false;
        } else {
          this.lookTwo = true;
        }
      });
    },
    goSecond() {
      this.$router.push({
        name: "secondSearch",
        params: {
          dataOfTable: this.$route.params.dataOfTable
        }
      });
    },
    getState() {
      if (localStorage.getItem("startinqflag") == "0") {
        return true;
      }
    },
    toInitiateSurvey() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        this.$router.push({
          name: "InitiateSurvey",
          query: { clmno: JSON.parse(this.$route.params.dataOfTable).rgtno}
        });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.push({
              name: "InitiateSurvey",
              query: { clmno: JSON.parse(this.$route.params.dataOfTable).rgtno }
            });
          })
          .catch(() => {});
      }
    },
    // 生成照会
    getPhotoState() {
      if (localStorage.getItem("notesignflag") == "0") {
        return true;
      }
    },
    toInitiatingPhoto() {
      this.oldObj1 = JSON.stringify({
        diseaseListArr: this.diseaseListArr,
        diagnoseListArr: this.diagnoseListArr,
        operationListArr: this.operationListArr,
        dangerInfor: this.dangerInfor,
        auditObj: this.auditObj
      });
      if (this.oldObj == this.oldObj1) {
        this.$router.push({
          name: "InitiatingPhoto",
          query: {
            clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
            customerno: JSON.parse(this.$route.params.dataOfTable).customerno
          }
        });
      } else {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面！", "提示", {
          confirmButtonText: "是",
          cancelButtonText: "否",
          cancelButtonClass: "cancelButton",
          confirmButtonClass: "confirmButton",
          type: "warning",
          center: true
        })
          .then(() => {
            this.$router.push({
              name: "InitiatingPhoto",
              query: {
                clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
                customerno: JSON.parse(this.$route.params.dataOfTable).customerno
              }
            });
          })
          .catch(() => {});
      }
    },
    //获取枚举值
    getCodeList: function() {
      // debugger;
    },
    round(num, decimal) {
      if (isNaN(num)) {
        return 0;
      }
      const p1 = Math.pow(10, decimal + 1);
      const p2 = Math.pow(10, decimal);
      return Math.round((num * p1) / 10) / p2;
    },
    toFixeds(num, decimal) {
      return this.round(num, decimal).toFixed(decimal);
    },
    // 保留两位
    twoNum(obj) {
      if (obj.bnflot > 0 && obj.bnflot <= 100) {
        obj.bnflot = this.toFixeds(parseFloat(obj.bnflot), 2);
      } else if (obj.bnflot > 100) {
        obj.bnflot = null;
        this.$message.error("分配比例不能超过100%！");
        return false;
      } else {
        obj.bnflot = null;
      }
    },
    ToCDB(str) {
      var result = "";
      for (var i = 0; i < str.length; i++) {
        if (str.charCodeAt(i) == 12288) {
          result += String.fromCharCode(str.charCodeAt(i) - 12256);
          continue;
        }
        if (str.charCodeAt(i) > 65280 && str.charCodeAt(i) < 65375)
          result += String.fromCharCode(str.charCodeAt(i) - 65248);
        else result += String.fromCharCode(str.charCodeAt(i));
      }
      str = result;
      return str;
    },
    // 保项信息PDF
    clickCell(key) {
      post(service.getpath, {
        bodys: {
          riskcode: key
        }
      }).then(res => {
        this.downloadpath = res.data.bodys.downloadpath;
        if (res.data.bodys.downloadpath) {
          window.open("http://" + this.downloadpath, "_blank");
        }
      });
    },
    changeToUpperCase(row) {
      if (row.idtype == 1) {
        row.idno = row.idno.toUpperCase();
      }
    },
    disableds(row) {
      if (
        (row.relationtoinsured == "01" ||
          row.relationtoinsured == "02" ||
          row.relationtoinsured == "04") &&
        row.idtype != "7" &&
        row.idtype != "10"
      ) {
        return true;
      }
    },
    loadmore() {
      this.formData1.pagestart += 100;
      if (this.filterVal) {
        this.formData1.likename = this.filterVal;
      }
      this.getDiagnosis(this.formData1);
    },
    getDiagnosis(formData1) {
      post(service.lldiagcode, formData1).then(res => {
        const _res1 = res.data.bodys;
        this.diagcodeList = [...this.diagcodeList, ..._res1];
      });
    },
    loadmore1() {
      this.formData.pagestart++;
      this.getRiskRes(this.formData);
    },
    getRiskRes(formData) {
      post(service.ldaccresult, {
        bodys: formData
        // pagestart: "",
        // pageend: "",
        // likename: this.objForm.accidentcourse
      }).then(res => {
        const _res = res.data.bodys;
        this.riskResultList = [...this.riskResultList, ..._res];
      });
    },
    // 就诊医院
    //  pageDataaa: {
    //   startPage: 0,
    //   endPage: 100
    // }
    filteredaa(val) {
      this.pageDataaa.startPage = 0;
      this.pageDataaa.endPage = 100;
      // this.dangerInfor.hospitalname = val;
      if (val != "") {
        // this.getHospitalsaa(val);
        post(service.getHospital, {
          pagestart: this.pageDataaa.startPage,
          pageend: this.pageDataaa.endPage,
          likename: val
        }).then(res => {
          if (!res.data.bodys) {
            this.dangerInfor.hospitalname = "";
          } else {
            this.hospitalListsaa = res.data.bodys;
          }
        });
      }
    },
    clearHospital() {
      // this.dangerInfor.hospitalname = "";
      this.pageDataaa.startPage = 0;
      this.pageDataaa.endPage = 100;
      post(service.getHospital, {
        pagestart: this.pageDataaa.startPage,
        pageend: this.pageDataaa.endPage,
        likename: ""
      }).then(res => {
        this.hospitalListsaa = res.data.bodys;
        if (res.data.bodys == []) {
          this.dangerInfor.hospitalname = "";
        }
      });
    },
    loadmoreaa() {
      this.pageDataaa.startPage += 100;
      this.pageDataaa.endPage += 100;
      post(service.getHospital, {
        pagestart: this.pageDataaa.startPage,
        pageend: this.pageDataaa.endPage,
        likename: this.dangerInfor.hospitalname
      }).then(res => {
        this.hospitalListsaa = [...this.hospitalListsaa, ...res.data.bodys];
      });
    },
    getHospitalsaa() {
      setTimeout(() => {
        post(service.getHospital, {
          pagestart: this.pageDataaa.startPage,
          pageend: this.pageDataaa.endPage,
          likename: this.dangerInfor.hospitalname
        }).then(res => {
          if (!res.data.bodys) {
            this.dangerInfor.hospitalname = "";
          } else {
            this.hospitalListsaa = res.data.bodys;
            this.remarkContents = this.hospitalListsaa[0].remark;
          }
        });
      }, 1000);
    },
    changeHospital(item) {
      post(service.getHospital, {
        pagestart: 0,
        pageend: 100,
        likename: item
      }).then(res => {
        if (res.data.bodys[0].remark) {
          this.remarkContents = res.data.bodys[0].remark;
        } else {
          this.remarkContents = "";
        }
      });
    },
    // ========================================================
    // 合同状态自动处理按钮
    policyStateAutoDeal() {
      post(service.policyStateAutoDeal, {
        bodys: {
          clmno: this.$route.query.clmno,
          customerno: this.$route.query.customerno,
          operator: localStorage.getItem("userCode")
        }
      }).then(res => {
        if (res.data.headers.code === "200") {
          this.$message.success("操作成功");
        } else {
          this.$emssage.error(res.data.headers.message);
        }
      });
    },
    // ============================================>医疗单证start
    getHosa() {
      this.isShowhospital = true;
      if (this.rgtno && this.customerno) {
        this.getCfee();
      }
      this.getFeeItem();
      this.getHospitalsz();
      this.getHospitalsz1();
    },
    // 门诊医院
    filteredz(val) {
      this.pageDataz1.startPage = 0;
      this.pageDataz1.endPage = 100;
      if (val != "") {
        // setTimeout(() => {
        for (let key in this.commonOutpatient) {
          if (this.hosState == key) {
            // this.commonOutpatient[key].hospitalcode = val;
            this.hospitalListsnamez = val;
            // this.getHospitalsz(val);

            post(service.getHospital, {
              pagestart: this.pageDataz1.startPage,
              pageend: this.pageDataz1.endPage,
              likename: val
            }).then(res => {
              this.hospitalListsz = res.data.bodys;
              this.newhospitalListsz.push(this.hospitalListsz);
              this.newhospitalListsz[key] = res.data.bodys;
            });
          }
        }
        // }, 200);
      }
    },
    getRow(row, index) {
      this.hosState = index;
      this.hospitalListsnamez = "";
      this.pageDataz1.startPage = 0;
      this.pageDataz1.endPage = 100;
      post(service.getHospital, {
        pagestart: this.pageDataz1.startPage,
        pageend: this.pageDataz1.endPage,
        likename: ""
      }).then(res => {
        this.hospitalListsz = res.data.bodys;
        this.newhospitalListsz.push(this.hospitalListsz);
        this.newhospitalListsz[index] = res.data.bodys;
      });
    },
    // 医院
    getHospitalsz() {
      // setTimeout(() => {
      for (let key in this.commonOutpatient) {
        post(service.getHospital, {
          pagestart: this.pageDataz1.startPage,
          pageend: this.pageDataz1.endPage,
          likename: this.commonOutpatient[key].hospitalcode || ""
        }).then(res => {
          this.hospitalListsz = res.data.bodys;
          this.newhospitalListsz.push(this.hospitalListsz);
          this.newhospitalListsz[key] = res.data.bodys;
        });
      }
      // }, 800);
    },
    loadmorez11() {
      this.pageDataz1.startPage += 100;
      this.pageDataz1.endPage += 100;
      post(service.getHospital, {
        pagestart: this.pageDataz1.startPage,
        pageend: this.pageDataz1.endPage,
        likename: this.hospitalListsnamez || ""
      }).then(res => {
        this.hospitalListsz = [...this.hospitalListsz, ...res.data.bodys];
        this.newhospitalListsz.push(this.hospitalListsz);
        this.newhospitalListsz[this.hosState] = [
          ...this.hospitalListsz,
          ...res.data.bodys
        ];
      });
    },
    // ---------------------------------------------------------------
    // 住院医院
    filteredz1(val) {
      // row.hospitalcode = val;
      this.pageDataz2.startPage = 0;
      this.pageDataz2.endPage = 100;
      if (val != "") {
        // setTimeout(() => {
        for (let key in this.commonHospital) {
          if (this.hosState1 == key) {
            // this.commonHospital[key].hospitalcode = val;
            this.hospitalListsnamez1 = val;
            // this.getHospitalsz1(val);
            post(service.getHospital, {
              pagestart: this.pageDataz2.startPage,
              pageend: this.pageDataz2.endPage,
              likename: val
            }).then(res => {
              this.hospitalListsz1 = res.data.bodys;
              this.newhospitalListsz1.push(this.hospitalListsz1);
              this.newhospitalListsz1[key] = res.data.bodys;
            });
          }
        }
        // }, 200);
      }
    },
    getRow1(row, index) {
      this.hosState1 = index;
      this.hospitalListsnamez1 = "";
      this.pageDataz2.startPage = 0;
      this.pageDataz2.endPage = 100;
      post(service.getHospital, {
        pagestart: this.pageDataz2.startPage,
        pageend: this.pageDataz2.endPage,
        likename: ""
      }).then(res => {
        this.hospitalListsz1 = res.data.bodys;
        this.newhospitalListsz1.push(this.hospitalListsz1);
        this.newhospitalListsz1[index] = res.data.bodys;
      });
    },
    // 医院
    getHospitalsz1() {
      // setTimeout(() => {
      for (let key in this.commonHospital) {
        post(service.getHospital, {
          pagestart: this.pageDataz2.startPage,
          pageend: this.pageDataz2.endPage,
          likename: this.commonHospital[key].hospitalcode || ""
        }).then(res => {
          this.hospitalListsz1 = res.data.bodys;
          this.newhospitalListsz1.push(this.hospitalListsz1);
          this.newhospitalListsz1[key] = res.data.bodys;
        });
      }
      // }, 800);
    },
    loadmoresz1() {
      this.pageDataz2.startPage += 100;
      this.pageDataz2.endPage += 100;
      post(service.getHospital, {
        pagestart: this.pageDataz2.startPage,
        pageend: this.pageDataz2.endPage,
        likename: this.hospitalListsnamez1 || ""
      }).then(res => {
        this.hospitalListsz1 = [...this.hospitalListsz1, ...res.data.bodys];
        this.newhospitalListsz1.push(this.hospitalListsz1);
        this.newhospitalListsz1[this.hosState1] = [
          ...this.hospitalListsz1,
          ...res.data.bodys
        ];
      });
    },
    // ------<toFixed重写>-----
    round(num, decimal) {
      if (isNaN(num)) {
        return 0;
      }
      const p1 = Math.pow(10, decimal + 1);
      const p2 = Math.pow(10, decimal);
      return Math.round((num * p1) / 10) / p2;
    },
    toFixeds(num, decimal) {
      return this.round(num, decimal).toFixed(decimal);
    },
    // 保留两位
    twoNum(obj) {
      if (obj.selfamnt > 0) {
        obj.selfamnt = this.toFixeds(parseFloat(obj.selfamnt), 2);
        // obj.selfamnt = parseFloat(obj.selfamnt).toFixed(2)
      } else if (obj.selfamnt == 0) {
        obj.selfamnt = 0;
      } else {
        obj.selfamnt = null;
      }
      if (obj.price >= 0) {
        obj.price = this.toFixeds(parseFloat(obj.price), 2);
      } else {
        obj.price = null;
      }

      if (obj.deductfee >= 0) {
        obj.deductfee = this.toFixeds(parseFloat(obj.deductfee), 2);
      } else {
        obj.deductfee = null;
      }
    },
    checkUnumber1(row, index) {
      let aa = /^[0-9]+([.]{1}[5]){0,1}$/;
      if (!aa.test(row.realhospdate)) {
        this.$message({
          message: "修改天数只能0.5的倍数调整",
          type: "error"
        });
        row.realhospdate = this.realDate[index];
      } else {
        if (
          row.realhospdate > this.realDate[index] + 1 ||
          row.realhospdate < this.realDate[index] - 1
        ) {
          this.$message({
            message: "修改天数与系统计算天数相差不能超过1天！",
            type: "error"
          });
          row.realhospdate = this.realDate[index];
        }
      }
    },
    checkUnumber2(data) {
      let aa = /^[0-9]+([.]{1}[5]){0,1}$/;
      if (!aa.test(data.imhospdate)) {
        this.$message({
          message: "修改天数只能0.5的倍数调整",
          type: "error"
        });
        data.imhospdate = 0;
      }
    },
    // 获取所有存在的编号
    // 获取普通门诊单证跟普通单证明细
    // 就诊时间不能大于当前时间
    changeFeeDate(key) {
      if ((new Date() - new Date(key.feedate).getTime()) / 1000 < 0) {
        this.$message({
          message: "就诊时间不能大于当前日期",
          type: "error"
        });
        key.feedate = null;
      }
    },
    //  收据赔付金额 = 费用总金额-统筹/附加金额-其他补偿-扣费明细；
    getAll(res) {
      if (res.selfamnt > 0) {
        res.selfamnt = this.toFixeds(parseFloat(res.selfamnt), 2);
      } else if (res.selfamnt == 0) {
        res.selfamnt = 0;
      } else {
        res.selfamnt = null;
      }

      if (res.socifee >= 0) {
        res.socifee = this.toFixeds(parseFloat(res.socifee), 2);
      } else if (res.socifee == "") {
        res.socifee = 0.0;
      } else {
        res.socifee = null;
      }
      if (res.otherfee >= 0) {
        res.otherfee = this.toFixeds(parseFloat(res.otherfee), 2);
      } else if (res.otherfee == "") {
        this.otherfee == 0.0;
      } else {
        res.otherfee = null;
      }
      if (
        res.billmoney != null &&
        res.socifee != null &&
        res.otherfee != null &&
        res.refusemoney != null
      ) {
        var tbillmoney = parseFloat(res.billmoney);
        var tsocifee = parseFloat(res.socifee);
        var totherfee = parseFloat(res.otherfee);
        var trefusemoney = parseFloat(res.refusemoney);
        var tselfamnt = parseFloat(res.selfamnt);
        // res.indemnity = parseFloat(res.billmoney)- parseFloat(res.socifee)- parseFloat(res.otherfee) - parseFloat(res.refusemoney)

        res.indemnity = this.toFixeds(
          tbillmoney - tsocifee - trefusemoney - totherfee - tselfamnt,
          2
        );
        return;
      } else {
        res.indemnity = null;
      }
    },
    changeHospstartdate(key) {
      if (key.hospstartdate && key.hospenddate) {
        if (
          (new Date(key.hospstartdate).getTime() -
            new Date(key.hospenddate).getTime()) /
            1000 >
          0
        ) {
          this.$message({
            message: "入院日期不能大于出院日期",
            type: "error"
          });
          key.hospstartdate = null;
          return;
        }
      }
      if (key.hospenddate && key.hospstartdate) {
        if (key.hospenddate == key.hospstartdate) {
          key.realhospdate = sumDays(key.hospstartdate, key.hospenddate) + 1;
        } else {
          key.realhospdate = sumDays(key.hospstartdate, key.hospenddate);
        }
      }
      // }
    },
    changeHospenddate(key, index) {
      if (key.hospstartdate && key.hospenddate) {
        if (
          (new Date(key.hospstartdate).getTime() -
            new Date(key.hospenddate).getTime()) /
            1000 >
          0
        ) {
          this.$message({
            message: "出院日期不能小于入院日期",
            type: "error"
          });
          key.hospenddate = null;
          return;
        }
      }
      if (key.hospenddate && key.hospstartdate) {
        if (key.hospenddate == key.hospstartdate) {
          key.realhospdate = sumDays(key.hospstartdate, key.hospenddate) + 1;
        } else {
          key.realhospdate = sumDays(key.hospstartdate, key.hospenddate);
        }
        this.realDate[index] = key.realhospdate;
        console.log("SSS2", this.realDate);
      }
    },
    inputMainfeeno(obj) {
      var newArr = [];
      newArr = this.commonOutpatient.concat(this.commonHospital).map(e => {
        return e.mainfeeno;
      });
      if (obj.mainfeeno) {
        if (
          !checkdeff(newArr, obj.mainfeeno, "1") ||
          !checkdeff(this.getNumList, obj.mainfeeno, "2")
        ) {
          this.$message({
            message: "医疗收据编号重复录入",
            type: "error"
          });
          obj.mainfeeno = null;
        }
      }
    },
    inputMainfeeno1(obj) {
      var newArr = [];
      newArr = this.commonOutpatient.concat(this.commonHospital).map(e => {
        return e.mainfeeno;
      });
      if (obj.mainfeeno) {
        if (
          !checkdeff(newArr, obj.mainfeeno, "1") ||
          !checkdeff(this.getNumList, obj.mainfeeno, "2")
        ) {
          this.$message({
            message: "医疗收据编号重复录入",
            type: "error"
          });
          obj.mainfeeno = null;
        }
      }
    },
    searchNum() {
      post(service.getDeffNum, {
        bodys: {
          clmno: this.$route.query.rgtno,
          customerno: this.$route.query.customerno
        }
      }).then(result => {
        if (result.data.headers.code == "200") {
          this.getNumList = result.data.bodys.rows;
        }
      });
    },
    getSum(obj) {
      if (obj.number >= 0) {
        obj.number = this.toFixeds(parseFloat(obj.number), 2);
      } else {
        obj.number = null;
      }
      if (obj.fee >= 0) {
        obj.fee = this.toFixeds(parseFloat(obj.fee), 2);
      } else {
        obj.fee = null;
      }

      if (obj.fee && obj.number) {
        obj.price = this.toFixeds(accMul(obj.fee, obj.number), 2);
        if (obj.price.length > 16) {
          this.$message.error("费用金额超出限制，请重新调整单价或数量！");
          obj.price = null;
        }
      }
    },
    getFeeItem() {
      post(service.getCodeList, {
        codetype: ["llfeeitem", "deductiontype"]
      }).then(res => {
        console.log("333", res);
        this.fyxLists = res.data.bodys.llfeeitem;
        this.koufeiTypes = res.data.bodys.deductiontype;
      });
    },
    // ===============扣费名称明细Start===================
    getkfdata(row, index) {
      this.kfStatez = index;
      this.kfname = "";
      this.kfcode = row.deducttypes;
      this.kfpageDataz2.startPage = 0;
      this.kfpageDataz2.endPage = 100;
      post(service.llfeeitem, {
        pagestart: this.kfpageDataz2.startPage,
        pageend: this.kfpageDataz2.endPage,
        code: row.deducttypes,
        likename: ""
      }).then(res => {
        this.koufeiLists = res.data.bodys;
        this.newkoufeiLists.push(this.koufeiLists);
        this.newkoufeiLists[index] = res.data.bodys;
      });
    },
    getkoufeinum() {
      this.changeKFname();
    },
    filteredKF(val) {
      this.kfpageDataz2.startPage = 0;
      this.kfpageDataz2.endPage = 100;
      if (val != "") {
        for (let key in this.kfDetail) {
          if (this.kfStatez == key) {
            this.kfDetail[key].deductnames = val;
            this.kfname = val;
            this.changeKFname(val);
          }
        }
      }
    },
    // 扣费类型code 获取扣费名称 likename:模糊查询
    changeKFname(row) {
      for (let key in this.kfDetail) {
        post(service.llfeeitem, {
          pagestart: this.kfpageDataz2.startPage,
          pageend: this.kfpageDataz2.endPage,
          code: this.kfDetail[key].deducttypes,
          likename: this.kfDetail[key].deductnames || ""
        }).then(res => {
          this.koufeiLists = res.data.bodys;
          this.newkoufeiLists.push(this.koufeiLists);
          this.newkoufeiLists[key] = res.data.bodys;
        });
      }
    },
    changeKFItem(row) {
      row.deductnames = ""; // 改变费用项名称 清空对应的费用名称明细
    },
    // 扣费名称  下拉加载更多
    loadmorezz1() {
      this.kfpageDataz2.startPage += 100;
      this.kfpageDataz2.endPage += 100;
      post(service.llfeeitem, {
        pagestart: this.kfpageDataz2.startPage,
        pageend: this.kfpageDataz2.endPage,
        code: this.kfcode,
        likename: this.kfname || ""
      }).then(res => {
        this.koufeiLists = [...this.koufeiLists, ...res.data.bodys];
        this.newkoufeiLists.push(this.koufeiLists);
        this.newkoufeiLists[this.kfStatez] = [
          ...this.koufeiLists,
          ...res.data.bodys
        ];
      });
    },
    // ===============扣费名称明细End===================
    // ===============费用名称明细Start===================
    getfydata(row, index) {
      this.fyStatez = index;
      this.fyname = "";
      this.fycode = row.feeitemname;
      this.fypageDataz2.startPage = 0;
      this.fypageDataz2.endPage = 100;
      post(service.llfeeitem, {
        pagestart: this.fypageDataz2.startPage,
        pageend: this.fypageDataz2.endPage,
        code: row.feeitemname,
        likename: ""
      }).then(res => {
        this.fyDetailList1 = res.data.bodys;
        this.newfyDetailList1.push(this.fyDetailList1);
        this.newfyDetailList1[index] = res.data.bodys;
      });
    },
    getfeiyongnum() {
      this.changeFYname();
    },
    filteredFY(val) {
      this.fypageDataz2.startPage = 0;
      this.fypageDataz2.endPage = 100;
      if (val != "") {
        for (let key in this.fyDetail) {
          if (this.fyStatez == key) {
            this.fyDetail[key].feeitemdetil = val;
            this.fyname = val;
            this.changeFYname(val);
          }
        }
      }
    },
    // 费用项名称 code 获取费用名称明细  likename:模糊查询
    changeFYname(row) {
      for (let key in this.fyDetail) {
        post(service.llfeeitem, {
          pagestart: this.fypageDataz2.startPage,
          pageend: this.fypageDataz2.endPage,
          code: this.fyDetail[key].feeitemname,
          likename: this.fyDetail[key].feeitemdetil || ""
        }).then(res => {
          this.fyDetailList1 = res.data.bodys;
          this.newfyDetailList1.push(this.fyDetailList1);
          this.newfyDetailList1[key] = res.data.bodys;
        });
      }
    },
    changeFeeItem(row) {
      row.feeitemdetil = ""; // 改变费用项名称 清空对应的费用名称明细
    },
    loadmorezz() {
      this.fypageDataz2.startPage += 100;
      this.fypageDataz2.endPage += 100;
      post(service.llfeeitem, {
        pagestart: this.fypageDataz2.startPage,
        pageend: this.fypageDataz2.endPage,
        code: this.fycode,
        likename: this.fyname || ""
      }).then(res => {
        this.fyDetailList1 = [...this.fyDetailList1, ...res.data.bodys];
        this.newfyDetailList1.push(this.fyDetailList1);
        this.newfyDetailList1[this.fyStatez] = [
          ...this.fyDetailList1,
          ...res.data.bodys
        ];
      });
    },
    // ===============费用名称明细End===================
    // 获取医疗账单信息
    getCfee() {
      post(service.getcfee, {
        bodys: {
          // 1909120081801
          // rgtno: this.$route.query.rgtno,
          rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno
          // JSON.parse(this.$route.params.dataOfTable).rgtno
        }
      }).then(result => {
        if (result.data.headers.code == "200") {
          this.searchNum();
          this.commonOutpatient = result.data.bodys.rows[0].MenZhen;
          this.commonHospital = result.data.bodys.rows[0].ZhuYuan;
          localStorage.setItem(
            "comData1",
            JSON.stringify(this.commonOutpatient)
          );
          localStorage.setItem("comData2", JSON.stringify(this.commonHospital));
          this.hospitalName = result.data.bodys.rows[0].hospitalcode; // 医院名称
          this.outhospital = result.data.bodys.rows[0].outhospitaldate; // 出院日期
          this.inhospital = result.data.bodys.rows[0].inhospitaldate; // 入院日期
          this.death = result.data.bodys.rows[0].deathdate; // 入院日期
          this.accent = result.data.bodys.rows[0].accdate; // 出险日期
          this.ordTime =
            sumDays(
              result.data.bodys.rows[0].inhospitaldate,
              result.data.bodys.rows[0].outhospitaldate
            ) + 1; //普通病房天数
          // 普通病房天数修改时上下浮动0.5
          for (let key = 0; key < this.commonHospital.length; key++) {
            if (
              this.commonHospital[key].hospenddate &&
              this.commonHospital[key].hospstartdate
            ) {
              if (
                this.commonHospital[key].hospenddate ==
                this.commonHospital[key].hospstartdate
              ) {
                this.realDate[key] =
                  sumDays(
                    this.commonHospital[key].hospstartdate,
                    this.commonHospital[key].hospenddate
                  ) + 1;
              } else {
                this.realDate[key] = sumDays(
                  this.commonHospital[key].hospstartdate,
                  this.commonHospital[key].hospenddate
                );
              }
              // this.realDate[key] = this.commonHospital[key].realhospdate;
            }
            console.log("XXXXXXXXXXXXXXXXX", this.realDate);
          }
        } else {
          this.searchNum();
        }
      });
    },
    changeSort(column, prop, order) {
      if (column.order === "descending") {
        this.commonOutpatient.sort(function(a, b) {
          if (a.feedate < b.feedate) {
            return -1;
          } else if (a.feedate > b.feedate) {
            return 1;
          } else {
            return 0;
          }
        });
      } else if (column.order === "ascending") {
        this.commonOutpatient.sort(function(a, b) {
          if (a.feedate > b.feedate) {
            return -1;
          } else if (a.feedate < b.feedate) {
            return 1;
          } else {
            return 0;
          }
        });
      }
    },
    deletez1(row, index) {
      // 删除普通门诊
      post(service.deletefeemain, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          // clmno: this.$route.query.rgtno,
          mainfeeno: row.mainfeeno
        }
      }).then(res => {
        this.$message({
          message: "删除成功",
          type: "success"
        });
        // this.commonOutpatient.splice(index, 1);
        // this.getCfee();
        if (this.currentPagez1 == 1) {
          this.commonOutpatient.splice(index, 1);
        } else {
          this.commonOutpatient.splice(
            index + (this.currentPagez1 - 1) * 10,
            1
          );
        }
      });
    },
    // commonHospital
    deletez2(row, index) {
      // 删除普通住院
      post(service.deletefeemain, {
        bodys: {
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          // clmno: this.$route.query.rgtno,
          mainfeeno: row.mainfeeno
        }
      }).then(res => {
        this.$message({
          message: "删除成功",
          type: "success"
        });
        // this.commonHospital.splice(index, 1);
        // this.getCfee();
        if (this.currentPagez2 == 1) {
          this.commonHospital.splice(index, 1);
        } else {
          this.commonHospital.splice(index + (this.currentPagez2 - 1) * 10, 1);
        }
      });
    },
    deletez3(index) {
      // 删除普通门诊
      this.fyDetail.splice(index, 1);
    },
    deletez4(index) {
      // 删除住院
      this.kfDetail.splice(index, 1);
    },
    addRowz1() {
      // 普通门诊
      if (this.commonOutpatient.length == 0) {
        this.commonOutpatient.push({
          feetype: "A",
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          // clmno: this.$route.query.rgtno,
          mainfeeno: null, //收据编号
          // hospitalcode: JSON.parse(this.$route.params.dataOfTable).hospitalcode, // 医院名称
          hospitalcode: this.dangerInfor.hospitalname, // 医院名称
          feedate: null, // 就诊时间
          billmoney: null, // 费用总金额
          selfamnt: 0, // 自费金额
          socifee: 0, // 统筹附加金额
          sociflag: "1", // 社保标志
          otherfee: 0, // 其他补偿
          refusemoney: null, // 扣费明细
          indemnity: null, // 收据赔付金额
          operation: "0", // 是否手术
          specselfamnt: 0,
          ecmno: this.commonOutpatient.length + 1
        });
      } else {
        this.commonOutpatient.push({
          feetype: "A",
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          // clmno: this.$route.query.rgtno,
          mainfeeno: null, //收据编号
          // hospitalcode: JSON.parse(this.$route.params.dataOfTable).hospitalcode, // 医院名称
          // hospitalcode: this.objForm.hospitalname, // 医院名称
          hospitalcode: this.commonOutpatient[this.commonOutpatient.length - 1]
            .hospitalcode, // 医院名称
          feedate: null, // 就诊时间
          billmoney: null, // 费用总金额
          selfamnt: 0, // 自费金额
          socifee: 0, // 统筹附加金额
          sociflag: "1", // 社保标志
          otherfee: 0, // 其他补偿
          refusemoney: null, // 扣费明细
          indemnity: null, // 收据赔付金额
          operation: "0", // 是否手术
          specselfamnt: 0,
          ecmno: this.commonOutpatient.length + 1
        });
      }
      console.log("AAA", this.commonOutpatient);
      this.hospitalListsnamez = "";
      this.pageDataz1.startPage = 0;
      this.pageDataz1.endPage = 100;
      this.getHospitalsz();
    },
    addRowz2() {
      // 住院
      if (this.commonHospital.length == 0) {
        this.commonHospital.push({
          feetype: "B",
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          // clmno: this.$route.query.rgtno,
          mainfeeno: null, //收据编号
          // hospitalcode: JSON.parse(this.$route.params.dataOfTable).hospitalcode, // 医院名称
          // hospitalcode: this.$route.params.hospitalcode, // 医院名称
          hospitalcode: this.dangerInfor.hospitalname, // 医院名称
          hospstartdate: "", // 入院日期
          hospenddate: "", // 出院日期
          billmoney: null, // 费用总金额
          realhospdate: "", // 普通病房天数
          imhospdate: null, // 重症病房天数
          selfamnt: 0, // 自费金额
          socifee: 0, // 统筹附加金额
          sociflag: "1", // 社保标志
          otherfee: 0, // 其他补偿
          refusemoney: null, // 扣费明细
          indemnity: null, // 收据赔付金额
          operation: "0", // 是否手术
          specselfamnt: 0,
          ecmno: this.commonHospital.length + 1
        });
      } else {
        this.commonHospital.push({
          feetype: "B",
          clmno: JSON.parse(this.$route.params.dataOfTable).rgtno,
          // clmno: this.$route.query.rgtno,
          mainfeeno: null, //收据编号
          // hospitalcode: JSON.parse(this.$route.params.dataOfTable).hospitalcode, // 医院名称
          // hospitalcode: this.$route.params.hospitalcode, // 医院名称
          // hospitalcode: this.objForm.hospitalname, // 医院名称
          hospitalcode: this.commonHospital[this.commonHospital.length - 1]
            .hospitalcode, // 医院名称
          hospstartdate: "", // 入院日期
          hospenddate: "", // 出院日期
          billmoney: null, // 费用总金额
          realhospdate: "", // 普通病房天数
          imhospdate: null, // 重症病房天数
          selfamnt: 0, // 自费金额
          socifee: 0, // 统筹附加金额
          sociflag: "1", // 社保标志
          otherfee: 0, // 其他补偿
          refusemoney: null, // 扣费明细
          indemnity: null, // 收据赔付金额
          operation: "0", // 是否手术
          specselfamnt: 0,
          ecmno: this.commonHospital.length + 1
        });
      }
      this.hospitalListsnamez1 = "";
      (this.pageDataz2.startPage = 0),
        (this.pageDataz2.endPage = 100),
        this.getHospitalsz1();
    },
    addRowItemz1() {
      // 普通门诊的费用明细
      this.fyDetail.push({
        feeitemname: "", // 费用项名称
        feeitemdetil: "", // 费用名称明细
        fee: "", //单价
        number: "", //数量
        price: "", //费用金额
        specifications: "", //规格与单价
        healthcaretype: "" //医保类别
      });
    },
    addRowItemz2() {
      this.kfDetail.push({
        deductnames: "", // //扣费名称
        deductreasontypes: "", // 扣费原因类型
        deductemark: "", //备注
        deductreasons: "", // 扣费原因
        deductfee: "", //扣费金额
        deducttypes: "" // 扣费类型MenZhen
      });
    },
    // 获取门诊详细
    getDetailz1(data, index) {
      if (!data.mainfeeno) {
        this.$message({
          message: "请先录入收据编号",
          type: "error"
        });
      } else {
        this.dialogVisible = true;
        // 门诊索引
        localStorage.setItem("detailIndex", data.ecmno - 1);
        // 医疗单证类型（A,B）
        localStorage.setItem("detailState", data.feetype);
        // 判断是新增还是已有明细
        if (data.medicinerequestreceiptlist && data.medicinerequestdeductlist) {
          // 费用明细获取
          this.fyDetail = data.medicinerequestreceiptlist || [];
          // 扣费明细获取
          this.kfDetail = data.medicinerequestdeductlist || [];
        } else {
          this.fyDetail = [];
          this.kfDetail = [];
          // 如果没有明细则默认增加一条费用明细
          if (this.fyDetail.length == 0) {
            this.addRowItemz1();
          }
        }
        // this.mainData1 = data;
        // post(service.getcfeeDetail, {
        //   bodys: {
        //     // rgtno:JSON.parse(this.$route.params.dataOfTable).rgtno,
        //     rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        //     // rgtno: this.$route.query.rgtno,
        //     mainfeeno: data.mainfeeno
        //   }
        // }).then(result => {
        //   if (result.data.headers.code === "200") {
        //     //  this.commonOutDetail =  res.data.headers
        //     this.kfDetail = result.data.bodys.rows[0].deduct;
        //     this.fyDetail = result.data.bodys.rows[0].receipt;
        //     if (this.fyDetail.length == 0) {
        //       this.addRowItemz1();
        //     }
        //   } else if (result.data.headers.code === "500") {
        //     this.kfDetail = [];
        //     this.fyDetail = [];
        //   }
        // });
      }
    },
    // 获取住院详细
    getDetailz2(data, index) {
      if (!data.mainfeeno) {
        this.$message({
          message: "请先录入收据编号",
          type: "error"
        });
      } else {
        this.dialogVisible = true;
        // 住院索引
        localStorage.setItem("detailIndex1", data.ecmno - 1);
        // 医疗单证类型（A,B）
        localStorage.setItem("detailState", data.feetype);
        // 判断是新增还是已有明细
        if (data.medicinerequestreceiptlist && data.medicinerequestdeductlist) {
          console.log("DDDD", data.medicinerequestreceiptlist);
          // 费用明细获取
          this.fyDetail = data.medicinerequestreceiptlist;
          // 扣费明细获取
          this.kfDetail = data.medicinerequestdeductlist;
        } else {
          console.log("DDDD1", data.medicinerequestreceiptlist);
          this.fyDetail = [];
          this.kfDetail = [];
          // 如果没有明细则默认增加一条费用明细
          if (this.fyDetail.length == 0) {
            this.addRowItemz1();
          }
        }
        // this.mainData1 = data; // 住院
        // post(service.getcfeeDetail, {
        //   bodys: {
        //     // rgtno:JSON.parse(this.$route.params.dataOfTable).rgtno,
        //     rgtno: JSON.parse(this.$route.params.dataOfTable).rgtno,
        //     // rgtno: this.$route.query.rgtno,
        //     mainfeeno: data.mainfeeno
        //   }
        // }).then(result => {
        //   if (result.data.headers.code === "200") {
        //     //  this.commonOutDetail =  res.data.headers
        //     this.kfDetail = result.data.bodys.rows[0].deduct;
        //     this.fyDetail = result.data.bodys.rows[0].receipt;
        //     console.log("ggggg", this.kfDetail);

        //     if (this.fyDetail.length == 0) {
        //       this.addRowItemz1();
        //     }
        //   } else if (result.data.headers.code === "500") {
        //     this.kfDetail = [];
        //     this.fyDetail = [];
        //   }
        // });
      }
    },
    //医疗单证录入 // 门诊
    beSure() {
      // 通过明细获取费用总金额跟扣费明细
      let _this = this;
      if (_this.kfDetail.length == 0 && _this.fyDetail.length == 0) {
        this.$message({
          message: "请添加一条明细记录",
          type: "error"
        });
      } else if (checkLfor1(_this.fyDetail) || checkLfor2(_this.kfDetail)) {
        this.$message({
          message: checkLfor1(_this.fyDetail)
            ? checkLfor1(_this.fyDetail)
            : checkLfor2(_this.kfDetail),
          type: "error"
        });
      } else {
        let key = localStorage.getItem("detailIndex");
        let key1 = localStorage.getItem("detailIndex1");
        if (localStorage.getItem("detailState") == "A") {
          this.$message.success("操作成功！");
          this.dialogVisible = false;
          // 费用明细
          this.commonOutpatient[key].medicinerequestreceiptlist = this.fyDetail;
          // 扣费明细
          this.commonOutpatient[key].medicinerequestdeductlist = this.kfDetail;
          // 费用总金额计算
          this.commonOutpatient[key].billmoney = 0;
          this.commonOutpatient[key].medicinerequestreceiptlist.forEach(
            item => {
              this.commonOutpatient[key].billmoney += new Number(item.price);
            }
          );
          // 扣费金额计算
          this.commonOutpatient[key].refusemoney = 0;
          this.commonOutpatient[key].medicinerequestdeductlist.forEach(item => {
            this.commonOutpatient[key].refusemoney += new Number(
              item.deductfee
            );
          });
          // 收据赔付金额计算
          this.commonOutpatient[key].indemnity = this.toFixeds(
            this.commonOutpatient[key].billmoney -
              this.commonOutpatient[key].socifee -
              this.commonOutpatient[key].refusemoney -
              this.commonOutpatient[key].otherfee -
              this.commonOutpatient[key].selfamnt,
            2
          );
        } else if (localStorage.getItem("detailState") == "B") {
          this.$message.success("操作成功！");
          this.dialogVisible = false;
          // 费用明细
          this.commonHospital[key1].medicinerequestreceiptlist = this.fyDetail;
          // 扣费明细
          this.commonHospital[key1].medicinerequestdeductlist = this.kfDetail;
          // 费用总金额计算
          this.commonHospital[key1].billmoney = 0;
          this.commonHospital[key1].medicinerequestreceiptlist.forEach(item => {
            this.commonHospital[key1].billmoney += new Number(item.price);
          });
          // 扣费金额计算
          this.commonHospital[key1].refusemoney = 0;
          this.commonHospital[key1].medicinerequestdeductlist.forEach(item => {
            this.commonHospital[key1].refusemoney += new Number(item.deductfee);
          });
          // 收据赔付金额计算
          this.commonHospital[key1].indemnity = this.toFixeds(
            this.commonHospital[key1].billmoney -
              this.commonHospital[key1].socifee -
              this.commonHospital[key1].refusemoney -
              this.commonHospital[key1].otherfee -
              this.commonHospital[key1].selfamnt,
            2
          );
        }
        // if (this.mainData1.feetype == "A") {
        //   post(service.savecpay, {
        //     bodys: {
        //       remark: "1",
        //       customerno: JSON.parse(_this.$route.params.dataOfTable)
        //         .customerno,
        //       // customerno: _this.$route.query.customerno,
        //       operator: localStorage.getItem("userCode"),
        //       mngcom: localStorage.getItem("comCode"),
        //       commonMedicineRequest: _this.mainData1,
        //       medicinerequestdeductlist: _this.kfDetail, //扣费明细
        //       medicinerequestreceiptlist: _this.fyDetail // 费用明细
        //     }
        //   }).then(result => {
        //     if (result.data.headers && result.data.headers.code === "200") {
        //       _this.mainData1.refusemoney = result.data.bodys.rows[0].deductfee; // 扣费明细
        //       _this.mainData1.billmoney = result.data.bodys.rows[0].receiptfee; // 费用总
        //       console.log(result.data.bodys.rows[0].receiptfee);
        //       var tbillmoney = parseFloat(_this.mainData1.billmoney);
        //       var tsocifee = isNaN(this.mainData1.socifee)
        //         ? 0
        //         : this.mainData1.socifee;
        //       console.log(isNaN(tsocifee));
        //       var totherfee = isNaN(this.mainData1.otherfee)
        //         ? 0
        //         : this.mainData1.otherfee;
        //       //
        //       var tselfamnt = isNaN(this.mainData1.selfamnt)
        //         ? 0
        //         : this.mainData1.selfamnt;
        //       var trefusemoney = isNaN(this.mainData1.refusemoney)
        //         ? 0
        //         : this.mainData1.refusemoney;
        //       _this.mainData1.indemnity = this.toFixeds(
        //         tbillmoney - tsocifee - trefusemoney - totherfee - tselfamnt,
        //         2
        //       );
        //       // tselfamnt
        //       _this.dialogVisible = false;
        //       this.$message({
        //         message: "普通门诊明细费用提交成功",
        //         type: "success"
        //       });
        //     } else if (
        //       result.data.headers &&
        //       result.data.headers.code === "500"
        //     ) {
        //       this.$message({
        //         message: "普通门诊明细费用提交失败",
        //         type: "error"
        //       });
        //     } else {
        //       this.$message({
        //         message: "普通门诊明细费用提交失败",
        //         type: "error"
        //       });
        //     }
        //   });
        // } else if (_this.mainData1.feetype == "B") {
        //   post(service.savecpay, {
        //     bodys: {
        //       customerno: JSON.parse(_this.$route.params.dataOfTable)
        //         .customerno,
        //       // customerno: _this.$route.query.customerno,
        //       operator: localStorage.getItem("userCode"),
        //       mngcom: localStorage.getItem("comCode"),
        //       commonMedicineRequest: _this.mainData1,
        //       medicinerequestdeductlist: _this.kfDetail, //扣费明细
        //       medicinerequestreceiptlist: _this.fyDetail // 费用明细
        //     }
        //   }).then(result => {
        //     if (result.data.headers && result.data.headers.code === "200") {
        //       _this.mainData1.refusemoney = result.data.bodys.rows[0].deductfee; // 扣费明细
        //       _this.mainData1.billmoney = result.data.bodys.rows[0].receiptfee; // 费用总

        //       var tbillmoney = parseFloat(_this.mainData1.billmoney);
        //       var tsocifee = isNaN(_this.mainData1.socifee)
        //         ? 0
        //         : _this.mainData1.socifee;
        //       var totherfee = isNaN(_this.mainData1.otherfee)
        //         ? 0
        //         : _this.mainData1.otherfee;
        //       var trefusemoney = isNaN(_this.mainData1.refusemoney)
        //         ? 0
        //         : _this.mainData1.refusemoney;
        //       var tselfamnt = isNaN(_this.mainData1.selfamnt)
        //         ? 0
        //         : _this.mainData1.selfamnt;
        //       _this.mainData1.indemnity = this.toFixeds(
        //         tbillmoney - tsocifee - trefusemoney - totherfee - tselfamnt,
        //         2
        //       );
        //       _this.dialogVisible = false;
        //       this.$message({
        //         message: "普通住院明细费用提交成功",
        //         type: "success"
        //       });
        //     } else if (
        //       result.data.headers &&
        //       result.data.headers.code === "500"
        //     ) {
        //       this.$message({
        //         message: "普通住院明细费用提交失败",
        //         type: "error"
        //       });
        //     } else {
        //       this.$message({
        //         message: "普通住院明细费用提交失败",
        //         type: "error"
        //       });
        //     }
        //   });
        // }
      }
    },
    handleClose() {},
    // toAddFiling() {
    //   // this.$router.go(-1);
    //   this.isShowhospital = false;

    // },
    toAddFiling() {
      if (
        JSON.stringify(this.commonOutpatient) !=
          localStorage.getItem("comData1") ||
        JSON.stringify(this.commonHospital) != localStorage.getItem("comData2")
      ) {
        this.$confirm("页面信息未保存，是否确认不保存离开本页面？", {
          confirmButtonText: "确定",
          cancelButtonText: "取消",
          type: "warning"
        })
          .then(() => {
            var comout = this.commonOutpatient.map(item => {
              return item.mainfeeno;
            });
            var comhos = this.commonHospital.map(item => {
              return item.mainfeeno;
            });
            var common = comout.concat(comhos);
            post(service.medicinecheckdelete, {
              bodys: {
                mainfeenolist: common,
                clmno: JSON.parse(this.$route.params.dataOfTable).rgtno
                // clmno: this.$route.query.rgtno
              }
            });
            this.isShowhospital = false;
          })
          .catch(() => {});
      } else {
        this.isShowhospital = false;
      }
    },
    codeToname: function(obj, arr) {
      var a = null;
      arr.forEach(element => {
        if (element.code === obj) {
          a = element.name;
        }
      });
      return a;
    },
    //  获取医疗单证列表

    // 录入医疗单证
    applyTask() {
      // debugger;
      if (
        this.commonOutpatient.length == 0 &&
        this.commonHospital.length == 0
      ) {
        this.$message({
          message: "请添加一条数据",
          type: "error"
        });
      } else if (
        checkMfor(this.commonOutpatient, "1") ||
        checkMfor(this.commonHospital, "2")
      ) {
        this.$message({
          message: checkMfor(this.commonOutpatient, "1")
            ? checkMfor(this.commonOutpatient, "1")
            : checkMfor(this.commonHospital, "2"),
          type: "error"
        });
      } else {
        var allArr = this.commonOutpatient.concat(this.commonHospital);
        post(service.submitcfee, {
          bodys: {
            customerno: JSON.parse(this.$route.params.dataOfTable).customerno,
            // customerno: this.$route.query.customerno,
            operator: localStorage.getItem("userCode"),
            mngcom: localStorage.getItem("comCode"),
            // commonlist: allArr,
            commonMedicineRequest: allArr,
            remark: "1"
          }
        }).then(result => {
          if (result.data.headers.code === "200") {
            this.$message({
              message: result.data.headers.message,
              type: "success"
            });
            this.getCfee();
          } else {
            this.$message({
              message: result.data.headers.message,
              type: "error"
            });
          }
        });
      }
    },
    indexMethodz1(index) {
      return index + 1 + (this.currentPagez1 - 1) * 10;
    },
    indexMethodz2(index) {
      return index + 1 + (this.currentPagez2 - 1) * 10;
    },
    indexMethodz3(index) {
      return index + 1 + (this.currentPagez3 - 1) * 10;
    },
    indexMethodz4(index) {
      return index + 1 + (this.currentPagez4 - 1) * 10;
    },
    handleSizeChangez1(val) {
      this.pagesizez1 = val;
    },
    handleCurrentChangez1(val) {
      this.currentPagez1 = val;
    },
    handleSizeChangez2(val) {
      this.pagesizez2 = val;
    },
    handleCurrentChangez2(val) {
      this.currentPagez2 = val;
    },
    handleSizeChangez3(val) {
      this.pagesizez3 = val;
    },
    handleCurrentChangez3(val) {
      this.currentPage3 = val;
    },
    handleSizeChangez4(val) {
      this.pagesizez4 = val;
    },
    handleCurrentChangez4(val) {
      this.currentPagez4 = val;
    }
  }
};
</script>
<style lang="less">
.reviewInformation .el-tabs--card > .el-tabs__header .el-tabs__item {
  background-color: #fff;
  color: #999999;
}
/* input[disabled],
input:disabled,
input.disabled {
  -webkit-text-fill-color: #333;
  -webkit-opacity: 1;
  opacity: 1;
} */
.disabledinput {
  -webkit-text-fill-color: #333;
  -webkit-opacity: 1;
  opacity: 1;
}
/* .reviewInformation .place .el-input {
  width: 130px;
} */
.reviewInformation .bank .el-input {
  width: 30%;
}
.reviewInformation {
  .lingAdress {
    .el-input {
      width: 20% !important;
    }
  }
}
.reviewInformation {
  .lingAdress {
    .lingDes {
      width: 100% !important;
    }
  }
}

.reviewInformation .el-checkbox-group {
  display: flex !important;
}

.audit .el-form-item__content {
  display: flex !important;
  margin-left: 3% !important;
}

.audit .el-form-item__label {
  width: 90px !important;
}
</style>
<style lang="less" scoped>
.bank {
  .el-select {
    width: 100%;
  }
  .el-input__prefix,
  .el-input__suffix {
    right: 1px;
  }
}
.address {
  display: flex;
  .el-input__inner {
    width: 100%;
  }
  .el-select {
    width: 100%;
  }
  .el-form-item__error {
    white-space: nowrap;
  }
  .address_style {
    .el-form-item__content {
      margin-left: 30px !important;
    }
  }
  // .el-input {
  //   width: 150px;
  // }
  .full {
    .el-input {
      width: 210px;
    }
  }
}
.mels {
  /deep/ .el-tabs__nav-scroll {
    width: 350px;
    margin: 0 auto;
  }
  /deep/ .el-tabs__item {
    font-size: 20px;
  }
}
.twoTitle {
  border-left: 2px solid #409eff;
  padding-left: 10px;
  font-size: 16px;
}
.isshow {
  /deep/ .el-input {
    width: auto !important;
    margin: 0 10px !important;
  }
}
.diamh {
  /deep/.el-date-editor.el-input {
    width: 85% !important;
  }
  /deep/.el-select {
    width: 100%;
  }
  /deep/.el-date-editor.el-input {
    width: 85% !important;
  }
}
.jiuzhens {
  position: absolute;
  top: 0;
  left: 86%;
  border: none;
  padding: 10px 0px;
}
.jiuzhens:focus,
.jiuzhens:hover {
  color: none;
  background: none;
}
/deep/.el-table .cell {
  padding-left: 0 !important;
  padding-right: 0 !important;
}
// 支行
.nobankData {
  display: none;
}
.work_queue {
  position: relative;
  text-align: left;
  //   img{
  //      position: relative;
  //   }
  span {
    display: inline-block;
    background-color: #0673ff;
    color: #fff;
    padding: 0 15px;
    height: 33px;
    line-height: 33px;
    border-radius: 10px 10px 0 0;
  }
  .box {
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #0673ff;
    position: absolute;
    top: 33px;
    left: 15px;
    z-index: 999;
  }
}
.reviewInformation {
  margin: 10px;
  // margin-right: 0;
  margin-bottom: 0;
  box-sizing: border-box;

  .left {
    /* margin-left: 10px;
    margin-right: 10px; */
    width: 90%;
    float: left;
  }
  .audit .el-form-item__content {
    display: flex !important;
    margin-left: 28% !important;
  }

  .audit .el-form-item__label {
    width: 0 !important;
    white-space: nowrap;
  }

  .right {
    padding: 0 5px;
    text-align: center;
    float: right;
    width: 7%;
    border: 1px solid #cccccc;
    // height: 580px;
    border-radius: 100px;
    background: #fff;
    position: absolute;
    right: 1%;
    margin-top: 20px;
    // ======================================
    // p标签影响了医疗单证样式
    .btn_text {
      padding-bottom: 8px;
    }
    .btn_text:first-of-type {
      margin-top: 45px;
    }
    .btn_text:last-of-type {
      margin-bottom: 100px;
    }
    .downArrow {
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
    }

    .upArrow {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 10px;
    }

    .top {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 30px;
    }

    .btn_text {
      border-bottom: 1px dotted #cccccc;
    }
  }
  // ==================
  .header {
    background-color: #0673ff;
    height: 50px;
    line-height: 50px;
    border-radius: 25px 25px 0 0;
    padding: 0 30px;
    overflow: hidden;
    color: #fff;
    font-size: 20px;
    font-family: Source Han Sans CN;

    i {
      font-size: 30px;
      float: right;
      margin-top: 19px;
    }
  }

  .el-form {
    background-color: #fff;
    // padding: 0 20px;
  }

  .work_queue {
    position: relative;

    //   img{
    //      position: relative;
    //   }
    span {
      display: inline-block;
      background-color: #0673ff;
      color: #fff;
      padding: 0 15px;
      height: 33px;
      line-height: 33px;
      border-radius: 10px 10px 0 0;
    }

    .box {
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 10px solid #0673ff;
      position: absolute;
      top: 33px;
      left: 15px;
      z-index: 999;
    }
  }

  .block {
    background-color: #fff;
    height: 80px;
    padding-top: 27px;
    box-sizing: border-box;
  }

  .el-collapse {
    margin-bottom: 20px;
  }

  .box {
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #0673ff;
    position: absolute;
    z-index: 999;
  }
  .botton_box {
    width: 74%;

    height: 74px;
    line-height: 74px;
    background-image: url("../../assets/images/filing/footer2.png");
    background-size: 100% 60px;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 1000;
  }

  .dialog-footer {
    text-align: left;
  }
}
</style>
<style lang="less">
.delete {
  display: inline-block;
  width: 21px;
  height: 4px;
  background: linear-gradient(
    180deg,
    rgba(71, 157, 255, 1) 0%,
    rgba(0, 62, 255, 1) 100%
  );
  opacity: 1;
  border-radius: 2px;
  margin-right: 12px;
}
// 备注表格
.leftItem .el-table .cell {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.reviewInformation .el-textarea .el-input__count {
  top: auto !important;
}

//  End
.el-row {
  padding-top: 0px;
  //   margin-bottom: 20px;
  &:first-child {
    padding-top: 20px;
    margin-bottom: 0;
  }

  &:last-child {
    padding-top: 0;
    margin-bottom: 0;
  }
}

.grid-content {
  border-radius: 4px;
  min-height: 36px;

  .report {
    display: inline-block;
    width: 180px;
    height: 40px;
    text-align: center;
    line-height: 40px;
    background-color: #0673ff;
    color: #fff;
    font-size: 14px;
    font-family: Source Han Sans CN;
    border-radius: 25px;
  }
}

.row-bg {
  padding: 10px 0;
  background-color: #f9fafc;
}

.reviewInformation {
  .el-input {
    width: 85%;
  }
  .el-select {
    width: 85%;
    .el-input {
      width: 100%;
    }
  }
  .el-cascader {
    width: 85% !important;
    .el-input {
      width: 100%;
    }
  }
  .el-date-editor.el-input,
  .el-date-editor.el-input__inner {
    width: 85% !important;
  }
  .el-collapse-item__arrow {
    display: none;
  }

  .el-collapse-item__header {
    background-color: #0673ff;
    height: 30px;
    line-height: 30px;
    border-radius: 10px 10px 0 0;
    padding: 0 15px;
    overflow: hidden;
    color: #fff;
    font-size: 16px;
    font-family: Source Han Sans CN;
  }

  .el-collapse-item__content {
    padding-bottom: 0px;
  }

  .el-textarea .el-input__count {
    top: 2px;
  }
}
</style>
<style lang="less">
.reviewInformation .el-tabs--card > .el-tabs__header .el-tabs__item.is-active {
  background-color: #0673ff;
  border-bottom: none;
  border-radius: 8px 8px 0 0;
  color: #fff;
}

.reviewInformation .el-tabs__header {
  margin: 0;
}
.redStars {
  color: #f56c6c;
}

.place {
  display: flex;
  .el-form-item__error {
    white-space: nowrap;
  }
  .el-select {
    width: 100%;
  }

  .risk_address {
    // width: 130px !important;
    .el-form-item__content {
      margin-left: 8px !important;
    }
  }
}
.reviewInformation {
  .applyAddress {
    .el-input {
      width: 20% !important;
    }
    .applyDes {
      width: 100% !important;
    }
  }
}

.reviewInformation .el-checkbox__inner {
  z-index: 0;
}
.reviewInformation {
  .midSty {
    .el-form-item__label {
      line-height: 20px;
    }
  }
}
.el-button.is-round {
  padding: 7px 13px;
}
.reviewInformation
  .el-checkbox__input.is-disabled.is-checked
  .el-checkbox__inner::after {
  border-color: #fff !important;
}
.reviewInformation .el-checkbox__input.is-checked .el-checkbox__inner,
.el-checkbox__input.is-indeterminate .el-checkbox__inner {
  background-color: #409eff !important;
  // border-color: #409EFF;
}
.el-radio__input.is-disabled.is-checked .el-radio__inner {
  background-color: #409eff !important;
}
.el-radio__input.is-disabled.is-checked .el-radio__inner::after {
  background-color: #fff !important;
}
.reviewInformation .el-tabs--card > .el-tabs__header {
  border-bottom: none;
}
.reviewInformation .el-button + .el-button {
  margin-left: 1px;
}
</style>